2025-12-05 18:00:21,184 - InvoiceAuditor - INFO - Node: ingest_invoice | Starting ingestion for INV_DE_004.pdf
2025-12-05 18:00:21,185 - InvoiceAuditor - INFO - Node: extract_data | Extraction successful. Invoice No: INV-123
2025-12-05 18:00:21,188 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-05 19:43:39,083 - InvoiceAuditor - INFO - Node: ingest_invoice | Starting ingestion for INV_DE_004.pdf
2025-12-05 19:43:39,084 - InvoiceAuditor - INFO - Node: extract_data | Starting rules-based extraction for INV_DE_004.pdf
2025-12-05 19:43:39,151 - InvoiceAuditor - ERROR - Rules-Based Extraction Failed: 6 validation errors for InvoiceExtractionSchema
invoice_number
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.12/v/string_type
invoice_date
  Field required [type=missing, input_value={'invoice_number': None, ...tal': None, 'lines': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
vendor_name
  Field required [type=missing, input_value={'invoice_number': None, ...tal': None, 'lines': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
currency
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.12/v/string_type
total_amount
  Field required [type=missing, input_value={'invoice_number': None, ...tal': None, 'lines': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
line_items
  Field required [type=missing, input_value={'invoice_number': None, ...tal': None, 'lines': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-12-05 19:43:39,153 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-05 19:49:31,825 - InvoiceAuditor - INFO - Node: ingest_invoice | Starting ingestion for INV_DE_004.pdf
2025-12-05 19:49:31,826 - InvoiceAuditor - INFO - Node: extract_data | Starting rules-based extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-05 19:49:31,888 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-05 19:49:31,889 - InvoiceAuditor - ERROR - Rules-Based Extraction Failed: 6 validation errors for InvoiceExtractionSchema
invoice_number
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.12/v/string_type
invoice_date
  Field required [type=missing, input_value={'invoice_number': None, ...tal': None, 'lines': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
vendor_name
  Field required [type=missing, input_value={'invoice_number': None, ...tal': None, 'lines': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
currency
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.12/v/string_type
total_amount
  Field required [type=missing, input_value={'invoice_number': None, ...tal': None, 'lines': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
line_items
  Field required [type=missing, input_value={'invoice_number': None, ...tal': None, 'lines': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-12-05 19:49:31,892 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-05 19:50:42,154 - InvoiceAuditor - INFO - Node: ingest_invoice | Starting ingestion for INV_EN_005_scan.png
2025-12-05 19:50:42,156 - InvoiceAuditor - INFO - Node: extract_data | Starting rules-based extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_EN_005_scan.png
2025-12-05 19:50:42,287 - InvoiceAuditor - ERROR - Rules-Based Extraction Failed: tesseract is not installed or it's not in your PATH. See README file for more information.
2025-12-05 19:50:42,290 - root - INFO - Report saved successfully to: data/reports/INV_EN_005_scan.json
2025-12-05 19:53:01,093 - InvoiceAuditor - INFO - Node: ingest_invoice | Starting ingestion for INV_EN_005_scan.png
2025-12-05 19:53:01,094 - InvoiceAuditor - INFO - Node: extract_data | Starting rules-based extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_EN_005_scan.png
2025-12-05 19:53:01,188 - InvoiceAuditor - ERROR - Rules-Based Extraction Failed: tesseract is not installed or it's not in your PATH. See README file for more information.
2025-12-05 19:53:01,192 - root - INFO - Report saved successfully to: data/reports/INV_EN_005_scan.json
2025-12-05 19:57:37,515 - InvoiceAuditor - INFO - Node: ingest_invoice | Starting ingestion for INV_EN_005_scan.png
2025-12-05 19:57:37,517 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_EN_005_scan.png
2025-12-05 19:57:37,614 - InvoiceAuditor - ERROR - File Extraction Failed: tesseract is not installed or it's not in your PATH. See README file for more information.
2025-12-05 19:57:37,618 - root - INFO - Report saved successfully to: data/reports/INV_EN_005_scan.json
2025-12-05 21:20:50,208 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_EN_005_scan.png
2025-12-05 21:20:55,746 - InvoiceAuditor - INFO - raw text: SwiftMove Couriers

$F Express Lane, Chicago, tSA

Iuvotce: INV-L005
Date: 25-May-2025

PO: PO-1005

Item ty Unit Total
Fuel Surcharge 1 120 120

Express Boxes 25 4.5 112.5

Subtotal 232.5
TAX 23.25

Total 255.75

2025-12-05 21:20:55,747 - InvoiceAuditor - INFO - extracted_data:: {'invoice_number': None, 'date': None, 'vendor': None, 'currency': None, 'total': '255.75', 'lines': []}
2025-12-05 21:20:56,303 - InvoiceAuditor - ERROR - File Extraction Failed: 6 validation errors for InvoiceExtractionSchema
invoice_number
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.12/v/string_type
invoice_date
  Field required [type=missing, input_value={'invoice_number': None, ...: '255.75', 'lines': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
vendor_name
  Field required [type=missing, input_value={'invoice_number': None, ...: '255.75', 'lines': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
currency
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.12/v/string_type
total_amount
  Field required [type=missing, input_value={'invoice_number': None, ...: '255.75', 'lines': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
line_items
  Field required [type=missing, input_value={'invoice_number': None, ...: '255.75', 'lines': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-12-05 21:20:56,304 - InvoiceAuditor - INFO - Condition: Language is None. Proceeding to translation.
2025-12-05 21:20:56,307 - root - INFO - Report saved successfully to: data/reports/INV_EN_005_scan.json
2025-12-05 21:25:41,314 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-05 21:25:41,371 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-05 21:25:41,372 - InvoiceAuditor - INFO - extracted_data:: {'invoice_number': None, 'date': None, 'vendor': None, 'currency': None, 'total': None, 'lines': []}
2025-12-05 21:25:41,802 - InvoiceAuditor - ERROR - File Extraction Failed: 6 validation errors for InvoiceExtractionSchema
invoice_number
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.12/v/string_type
invoice_date
  Field required [type=missing, input_value={'invoice_number': None, ...tal': None, 'lines': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
vendor_name
  Field required [type=missing, input_value={'invoice_number': None, ...tal': None, 'lines': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
currency
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.12/v/string_type
total_amount
  Field required [type=missing, input_value={'invoice_number': None, ...tal': None, 'lines': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
line_items
  Field required [type=missing, input_value={'invoice_number': None, ...tal': None, 'lines': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-12-05 21:25:41,802 - InvoiceAuditor - INFO - Condition: Language is None. Proceeding to translation.
2025-12-05 21:25:41,805 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-05 22:27:24,839 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-05 22:27:24,910 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-05 22:27:25,394 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-05 22:27:25,396 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-05 22:28:52,759 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-05 22:28:52,823 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-05 22:28:52,836 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-05 22:28:52,839 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-05 22:29:52,192 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-05 22:29:52,257 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-05 22:29:52,776 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-05 22:29:52,776 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-05 22:29:52,793 - LiteLLM - INFO - 
LiteLLM completion() model= gpt-4o; provider = azure
2025-12-05 22:29:52,809 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: litellm.APIError: AzureException APIError - argument of type 'NoneType' is not iterable
2025-12-05 22:29:52,811 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-05 22:34:19,733 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-05 22:34:19,794 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-05 22:34:20,252 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-05 22:34:20,253 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-05 22:34:20,253 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-05 22:34:20,265 - LiteLLM - INFO - 
LiteLLM completion() model= gpt-4o; provider = azure
2025-12-05 22:34:20,276 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: litellm.APIError: AzureException APIError - argument of type 'NoneType' is not iterable
2025-12-05 22:34:20,279 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-05 23:04:13,770 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-05 23:04:13,827 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-05 23:04:14,254 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-05 23:04:14,254 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-05 23:04:14,254 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-05 23:04:14,265 - LiteLLM - INFO - 
LiteLLM completion() model= gpt-4o; provider = azure
2025-12-05 23:04:15,588 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: litellm.NotFoundError: AzureException NotFoundError - The API deployment for this resource does not exist. If you created the deployment within the last 5 minutes, please wait a moment and try again.
2025-12-05 23:04:15,594 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-05 23:09:14,724 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-05 23:09:14,791 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-05 23:09:15,243 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-05 23:09:15,244 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-05 23:09:15,244 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-05 23:09:15,255 - LiteLLM - INFO - 
LiteLLM completion() model= gpt-4o; provider = azure
2025-12-05 23:09:16,515 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: litellm.NotFoundError: AzureException NotFoundError - The API deployment for this resource does not exist. If you created the deployment within the last 5 minutes, please wait a moment and try again.
2025-12-05 23:09:16,560 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-05 23:12:26,185 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-05 23:12:26,247 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-05 23:12:26,716 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-05 23:12:26,717 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-05 23:12:26,717 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-05 23:12:26,728 - LiteLLM - INFO - 
LiteLLM completion() model= gpt-4o; provider = azure
2025-12-05 23:12:27,994 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: litellm.NotFoundError: AzureException NotFoundError - The API deployment for this resource does not exist. If you created the deployment within the last 5 minutes, please wait a moment and try again.
2025-12-05 23:12:28,000 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-05 23:24:39,372 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-05 23:24:39,447 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-05 23:24:39,909 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-05 23:24:39,909 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-05 23:24:39,910 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-05 23:24:39,921 - LiteLLM - INFO - 
LiteLLM completion() model= gpt-4o; provider = azure
2025-12-05 23:24:41,203 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: litellm.NotFoundError: AzureException NotFoundError - The API deployment for this resource does not exist. If you created the deployment within the last 5 minutes, please wait a moment and try again.
2025-12-05 23:24:41,208 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-05 23:30:48,472 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-05 23:30:48,530 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-05 23:30:48,981 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-05 23:30:48,981 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-05 23:30:48,982 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-05 23:30:48,994 - LiteLLM - INFO - 
LiteLLM completion() model= gpt-4o; provider = azure
2025-12-05 23:30:50,273 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: litellm.NotFoundError: AzureException NotFoundError - The API deployment for this resource does not exist. If you created the deployment within the last 5 minutes, please wait a moment and try again.
2025-12-05 23:30:50,279 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-06 06:06:22,896 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 06:06:22,960 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 06:06:23,443 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 06:06:23,443 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 06:06:23,444 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 06:06:23,458 - LiteLLM - INFO - 
LiteLLM completion() model= gpt-4o; provider = azure
2025-12-06 06:06:24,834 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: litellm.NotFoundError: AzureException NotFoundError - The API deployment for this resource does not exist. If you created the deployment within the last 5 minutes, please wait a moment and try again.
2025-12-06 06:06:24,839 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-06 06:11:03,819 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 06:11:03,872 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 06:11:04,286 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 06:11:04,287 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 06:11:04,287 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 06:11:04,306 - LiteLLM - INFO - 
LiteLLM completion() model= facebook/m2m100_418M; provider = huggingface
2025-12-06 06:11:04,715 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: litellm.AuthenticationError: HuggingfaceException - <!DOCTYPE html>
<html class="" lang="en">
<head>
    <meta charset="utf-8" />
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <meta
            name="description"
            content="We're on a journey to advance and democratize artificial intelligence through open source and open science."
    />
    <meta property="fb:app_id" content="1321688464574422" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@huggingface" />
    <meta
            property="og:title"
            content="Hugging Face - The AI community building the future."
    />
    <meta property="og:type" content="website" />

    <title>Hugging Face - The AI community building the future.</title>
    <style>
        body {
            margin: 0;
        }

        main {
            background-color: white;
            min-height: 100vh;
            padding: 7rem 1rem 8rem 1rem;
            text-align: center;
            font-family: Source Sans Pro, ui-sans-serif, system-ui, -apple-system,
            BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans,
            sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol,
            Noto Color Emoji;
        }

        img {
            width: 6rem;
            height: 6rem;
            margin: 0 auto 1rem;
        }

        h1 {
            font-size: 3.75rem;
            line-height: 1;
            color: rgba(31, 41, 55, 1);
            font-weight: 700;
            box-sizing: border-box;
            margin: 0 auto;
        }

        p, a {
            color: rgba(107, 114, 128, 1);
            font-size: 1.125rem;
            line-height: 1.75rem;
            max-width: 28rem;
            box-sizing: border-box;
            margin: 0 auto;
        }

        .dark main {
            background-color: rgb(11, 15, 25);
        }
        .dark h1 {
            color: rgb(209, 213, 219);
        }
        .dark p, .dark a {
            color: rgb(156, 163, 175);
        }
    </style>
    <script>
        // On page load or when changing themes, best to add inline in `head` to avoid FOUC
        const key = "_tb_global_settings";
        let theme = window.matchMedia("(prefers-color-scheme: dark)").matches
            ? "dark"
            : "light";
        try {
            const storageTheme = JSON.parse(window.localStorage.getItem(key)).theme;
            if (storageTheme) {
                theme = storageTheme === "dark" ? "dark" : "light";
            }
        } catch (e) {}
        if (theme === "dark") {
            document.documentElement.classList.add("dark");
        } else {
            document.documentElement.classList.remove("dark");
        }
    </script>
</head>

<body>
<main>
    <img
            src="https://cdn-media.huggingface.co/assets/huggingface_logo.svg"
            alt=""
    />
    <div>
        <h1>401</h1>
        <p>Unauthorized access. Please check your credentials or authorization</p>
    </div>
</main>
</body>
</html>
2025-12-06 06:11:04,718 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-06 06:14:08,953 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 06:14:09,010 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 06:14:09,430 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 06:14:09,431 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 06:14:09,431 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 06:14:09,441 - LiteLLM - INFO - 
LiteLLM completion() model= facebook/m2m100_418M; provider = huggingface
2025-12-06 06:14:10,102 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: litellm.APIError: HuggingfaceException - {"error":"This authentication method does not have sufficient permissions to call Inference Providers on behalf of user Someswara"}
2025-12-06 06:14:10,104 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-06 06:15:26,851 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 06:15:26,909 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 06:15:27,378 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 06:15:27,379 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 06:15:27,379 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 06:15:27,390 - LiteLLM - INFO - 
LiteLLM completion() model= facebook/m2m100_418M; provider = huggingface
2025-12-06 06:15:28,006 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: litellm.BadRequestError: HuggingfaceException - {"error":{"message":"The requested model 'facebook/m2m100_418M' is not a chat model.","type":"invalid_request_error","param":"model","code":"model_not_supported"}}
2025-12-06 06:15:28,009 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-06 06:24:43,450 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 06:24:43,511 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 06:24:43,956 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 06:24:43,957 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 06:24:43,957 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 06:24:43,968 - LiteLLM - INFO - 
LiteLLM completion() model= Qwen/Qwen2-7B-Instruc; provider = huggingface
2025-12-06 06:24:44,932 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: litellm.BadRequestError: HuggingfaceException - {"error":{"message":"The requested model 'Qwen/Qwen2-7B-Instruc' does not exist.","type":"invalid_request_error","param":"model","code":"model_not_found"}}
2025-12-06 06:24:44,935 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-06 06:25:36,963 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 06:25:37,022 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 06:25:37,471 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 06:25:37,472 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 06:25:37,472 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 06:25:37,484 - LiteLLM - INFO - 
LiteLLM completion() model= Qwen/Qwen2-7B-Instruct; provider = huggingface
2025-12-06 06:25:38,141 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: litellm.BadRequestError: HuggingfaceException - {"error":{"message":"The requested model 'Qwen/Qwen2-7B-Instruct' is not supported by any provider you have enabled.","type":"invalid_request_error","param":"model","code":"model_not_supported"}}
2025-12-06 06:25:38,144 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-06 06:26:47,946 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 06:26:48,000 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 06:26:48,439 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 06:26:48,440 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 06:26:48,440 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 06:26:48,451 - LiteLLM - INFO - 
LiteLLM completion() model= Qwen/Qwen2-7B-Instruct; provider = huggingface
2025-12-06 06:26:49,044 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: litellm.BadRequestError: HuggingfaceException - {"error":{"message":"The requested model 'Qwen/Qwen2-7B-Instruct' is not supported by any provider you have enabled.","type":"invalid_request_error","param":"model","code":"model_not_supported"}}
2025-12-06 06:26:49,047 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-06 08:13:01,183 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 08:13:01,243 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 08:13:01,658 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 08:13:01,659 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 08:13:01,659 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 08:13:01,674 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 08:14:37,061 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 08:14:37,126 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: 'str' object has no attribute 'get'
2025-12-06 08:14:37,138 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-06 08:20:08,230 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 08:20:08,288 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 08:20:08,715 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 08:20:08,715 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 08:20:08,716 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 08:20:08,727 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 08:21:31,295 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 08:21:31,339 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. res: {
  "translated_text": {
    "Company Name": "HafenLogistik GmbH",
    "Address": "Am Kai 55, Hamburg, Germany",
    "Invoice Number": "RE-2025-004",
    "Invoice Date": "02.05.2025",
    "Purchase Order Number": "PO-1004",
    "Items": [
      {
        "Item Code": "SKU-301",
        "Description": "Transportkisten",
        "Quantity": "40",
        "Price per Unit": "25.00€",
        "Total": "1000.00€"
      },
      {
        "Item Code": "SKU-302",
        "Description": "Sicherheitswesten",
        "Quantity": "60",
        "Price per Unit": "10.00€",
        "Total": "600.00€"
      }
    ],
    "Subtotal": "1600.00€",
    "VAT (10%)": "160.00€",
    "Total Amount": "1760.00€"
  },
  "confidence": 1.0
}
2025-12-06 08:21:31,339 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: 'str' object has no attribute 'get'
2025-12-06 08:21:31,344 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-06 11:09:22,130 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 11:09:22,187 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 11:09:22,632 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 11:09:22,633 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 11:09:22,633 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 11:09:22,648 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 11:10:39,344 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 11:10:39,386 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. res: {
  "translated_text": {
    "Company Name": "HafenLogistik GmbH",
    "Address": "Am Kai 55, Hamburg, Germany",
    "Invoice Number": "RE-2025-004",
    "Invoice Date": "02.05.2025",
    "Purchase Order Number": "PO-1004",
    "Items": [
      {
        "Item Code": "SKU-301",
        "Description": "Transportkisten",
        "Quantity": "40",
        "Price per Unit": "25.00€",
        "Total": "1000.00€"
      },
      {
        "Item Code": "SKU-302",
        "Description": "Sicherheitswesten",
        "Quantity": "60",
        "Price per Unit": "10.00€",
        "Total": "600.00€"
      }
    ],
    "Subtotal": "1600.00€",
    "VAT (10%)": "160.00€",
    "Total Amount": "1760.00€"
  },
  "confidence": 1.0
}
2025-12-06 11:10:39,386 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: string indices must be integers
2025-12-06 11:10:39,389 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-06 11:20:17,536 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 11:20:17,592 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 11:20:18,033 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 11:20:18,034 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 11:20:18,034 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 11:20:18,045 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 11:21:35,894 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 11:21:35,936 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. res: {
  "translated_text": {
    "Company Name": "HafenLogistik GmbH",
    "Address": "Am Kai 55, Hamburg, Germany",
    "Invoice Number": "RE-2025-004",
    "Invoice Date": "02.05.2025",
    "Purchase Order Number": "PO-1004",
    "Items": [
      {
        "Item Code": "SKU-301",
        "Description": "Transportkisten",
        "Quantity": "40",
        "Price per Unit": "25.00€",
        "Total": "1000.00€"
      },
      {
        "Item Code": "SKU-302",
        "Description": "Sicherheitswesten",
        "Quantity": "60",
        "Price per Unit": "10.00€",
        "Total": "600.00€"
      }
    ],
    "Subtotal": "1600.00€",
    "VAT (10%)": "160.00€",
    "Total Amount": "1760.00€"
  },
  "confidence": 1.0
}
2025-12-06 11:21:35,936 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 11:21:35,936 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: unhashable type: 'slice'
2025-12-06 11:21:35,947 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-06 12:35:30,805 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 12:35:30,863 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 12:35:31,299 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 12:35:31,300 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 12:35:31,300 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 12:35:31,314 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 12:36:48,733 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 12:36:48,768 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 12:36:48,768 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 12:41:08,787 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 12:41:08,846 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 12:41:09,281 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 12:41:09,282 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 12:41:09,282 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 12:41:09,294 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 12:42:02,270 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 12:42:02,303 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 12:42:02,303 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 12:42:02,316 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 12:52:59,932 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 12:52:59,989 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 12:53:00,427 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 12:53:00,428 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 12:53:00,428 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 12:53:00,439 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 12:54:17,601 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 12:54:17,648 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 12:54:17,649 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 12:54:17,680 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 13:27:21,621 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 13:27:21,680 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 13:27:22,117 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 13:27:22,118 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 13:27:22,118 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 13:27:22,130 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 13:28:44,915 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 13:28:44,972 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 13:28:44,973 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 13:28:44,982 - InvoiceAuditor - INFO - Node: validation_agent | Starting translation for validations:
2025-12-06 13:30:59,621 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 13:30:59,686 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 13:31:00,134 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 13:31:00,135 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 13:31:00,135 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 13:31:00,147 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 13:31:59,994 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 13:32:00,071 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 13:32:00,072 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 13:32:00,080 - InvoiceAuditor - INFO - Node: validation_agent | Starting translation for validations:
2025-12-06 13:32:00,112 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 13:33:45,556 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 13:33:45,603 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 14:05:25,734 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 14:05:25,796 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 14:05:26,251 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 14:05:26,252 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 14:05:26,252 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 14:05:26,264 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 14:06:52,776 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 14:06:52,828 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 14:06:52,829 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 14:06:52,834 - InvoiceAuditor - INFO - Node: validation_agent | Starting translation for validations:
2025-12-06 14:06:52,857 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 14:08:44,619 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 14:08:44,659 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 14:12:28,322 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 14:12:28,388 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 14:12:28,842 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 14:12:28,842 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 14:12:28,843 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 14:12:28,855 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 14:13:46,934 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 14:13:46,969 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 14:13:46,969 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 14:13:46,973 - InvoiceAuditor - INFO - Node: validation_agent | Starting translation for validations:
2025-12-06 14:13:46,997 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 14:16:19,624 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 14:16:19,670 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 14:37:26,999 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 14:37:27,058 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 14:37:27,487 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 14:37:27,487 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 14:37:27,488 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 14:37:27,499 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 14:38:52,016 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 14:38:52,068 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 14:38:52,069 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 14:38:52,077 - InvoiceAuditor - INFO - Node: validation_agent | Starting translation for validations:
2025-12-06 14:38:52,108 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 14:40:42,413 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 14:40:42,458 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 14:40:42,458 - InvoiceAuditor - INFO - Validation Error: Validation LLM Error via LiteLLM: Expecting value: line 1 column 1 (char 0)
2025-12-06 14:48:35,591 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 14:48:35,651 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 14:48:36,070 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 14:48:36,070 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 14:48:36,070 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 14:48:36,082 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 14:49:58,215 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 14:49:58,273 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 14:49:58,275 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 14:49:58,281 - InvoiceAuditor - INFO - Node: validation_agent | Starting translation for validations:
2025-12-06 14:49:58,301 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 14:51:48,605 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 14:51:48,648 - InvoiceAuditor - INFO - Node: validation agent| validation completedBased on the provided rules and invoice data, here's the validation result:

```json
{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true,
    "calculation_error": false
  },
  "issues": [
    {
      "code": "1",
      "field": "currency",
      "severity": "Low",
      "message": "The currency symbol '€' is not explicitly listed in the accepted_currencies. However, it can be converted to EUR using the currency_symbol_map."
    }
  ]
}
```

In this case, the invoice data is valid and complete with no calculation errors. However, there is a minor inconsistency regarding the currency symbol '€', which is not explicitly listed in the accepted_currencies but can be converted to EUR using the provided currency_symbol_map. This issue is marked as 'Low' severity.
2025-12-06 14:51:48,649 - InvoiceAuditor - INFO - Validation Error: Validation LLM Error via LiteLLM: Expecting value: line 1 column 1 (char 0)
2025-12-06 15:14:09,404 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 15:14:09,463 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 15:14:09,886 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 15:14:09,887 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 15:14:09,887 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 15:14:09,898 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 15:15:34,113 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 15:15:34,167 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 15:15:34,167 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 15:15:34,173 - InvoiceAuditor - INFO - Node: validation_agent | Starting translation for validations:
2025-12-06 15:15:34,203 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 15:17:42,418 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 15:17:42,454 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true,
    "calculation_error": false
  },
  "issues": [
    {
      "code": "currency",
      "field": "Price per Unit",
      "severity": "Low",
      "message": "The currency symbol for the Price per Unit field is EUR, which is accepted. However, it should be represented as "\u20AC" according to the YAML rules."
    },
    {
      "code": "currency",
      "field": "Total",
      "severity": "Low",
      "message": "The currency symbol for the Total field is €, which corresponds to EUR. However, it should be represented as "\u20AC" according to the YAML rules."
    },
    {
      "code": "currency",
      "field": "VAT (10%)",
      "severity": "Low",
      "message": "The currency symbol for VAT (10%) field is not provided. It should be represented as "\u20AC" according to the YAML rules."
    }
  ]
}
2025-12-06 15:17:42,454 - InvoiceAuditor - INFO - Validation Error: Validation LLM Error via LiteLLM: Expecting ',' delimiter: line 12 column 133 (char 353)
2025-12-06 15:24:32,460 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 15:24:32,519 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 15:24:32,951 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 15:24:32,952 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 15:24:32,952 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 15:24:32,963 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 15:25:54,198 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 15:25:54,243 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 15:25:54,243 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 15:25:54,247 - InvoiceAuditor - INFO - Node: validation_agent | Starting translation for validations:
2025-12-06 15:25:54,256 - InvoiceAuditor - INFO - Node: validation_agent | Starting translation for translated_data:{'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 15:25:54,262 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 15:27:56,754 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 15:27:56,791 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true,
    "calculation_error": false
  },
  "issues": [
    {
      "code": "currency",
      "field": "Price per Unit",
      "severity": "Low",
      "message": "The currency symbol for the Price per Unit field is EUR, which is accepted. However, it should be represented as "\u20AC" according to the YAML rules."
    },
    {
      "code": "currency",
      "field": "Total",
      "severity": "Low",
      "message": "The currency symbol for the Total field is €, which corresponds to EUR. However, it should be represented as "\u20AC" according to the YAML rules."
    },
    {
      "code": "currency",
      "field": "VAT (10%)",
      "severity": "Low",
      "message": "The currency symbol for VAT (10%) field is not provided. It should be represented as "\u20AC" according to the YAML rules."
    }
  ]
}
2025-12-06 15:27:56,793 - InvoiceAuditor - INFO - Validation Error: Validation LLM Error via LiteLLM: Expecting ',' delimiter: line 12 column 133 (char 353)
2025-12-06 15:30:57,473 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 15:30:57,531 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 15:30:57,971 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 15:30:57,972 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 15:30:57,972 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 15:30:57,984 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 15:32:15,335 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 15:32:15,389 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 15:32:15,390 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 15:32:15,393 - InvoiceAuditor - INFO - Node: validation_agent | Starting translation for validations:
2025-12-06 15:32:15,422 - InvoiceAuditor - INFO - Node: validation_agent | Starting translation for translated_data:{'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 15:32:15,428 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 15:34:31,860 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 15:34:31,899 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true,
    "calculation_error": false
  },
  "issues": [
    {
      "code": "1",
      "field": "currency",
      "severity": "Low",
      "message": "Currency symbol '€' is not explicitly listed in the accepted_currencies. However, it can be converted to EUR using currency_symbol_map."
    },
    {
      "code": "2",
      "field": "Purchase Order Number",
      "severity": "Low",
      "message": "The field 'Purchase Order Number' is not listed in the required_fields. It may be optional or irrelevant for invoice validation."
    }
  ]
}
2025-12-06 15:34:31,899 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True, 'calculation_error': False}, 'issues': [{'code': '1', 'field': 'currency', 'severity': 'Low', 'message': "Currency symbol '€' is not explicitly listed in the accepted_currencies. However, it can be converted to EUR using currency_symbol_map."}, {'code': '2', 'field': 'Purchase Order Number', 'severity': 'Low', 'message': "The field 'Purchase Order Number' is not listed in the required_fields. It may be optional or irrelevant for invoice validation."}]}
2025-12-06 15:34:31,900 - InvoiceAuditor - INFO - Validation Error: Validation LLM Error via LiteLLM: 'dict' object has no attribute 'append'
2025-12-06 15:47:25,438 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 15:47:25,496 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 15:47:25,906 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 15:47:25,907 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 15:47:25,907 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 15:47:25,918 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 15:48:53,262 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 15:48:53,315 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 15:48:53,316 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 15:48:53,320 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-06 15:48:53,346 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 15:48:53,347 - InvoiceAuditor - INFO - Node: validation_agent | python_issues:[]
2025-12-06 15:48:53,357 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 15:51:41,941 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 15:51:41,994 - InvoiceAuditor - INFO - Validation Error: Validation LLM Error via LiteLLM: Expecting value: line 1 column 1 (char 0)
2025-12-06 15:56:22,678 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 15:56:22,735 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 15:56:23,162 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 15:56:23,163 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 15:56:23,163 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 15:56:23,174 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 15:57:42,889 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 15:57:42,940 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 15:57:42,940 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 15:57:42,941 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-06 15:57:42,952 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 15:57:42,953 - InvoiceAuditor - INFO - Node: validation_agent | python_issues:[]
2025-12-06 15:57:42,958 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 16:01:04,072 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 16:01:04,134 - InvoiceAuditor - INFO - Validation Error: Validation LLM Error via LiteLLM: Expecting value: line 1 column 1 (char 0)
2025-12-06 16:11:47,881 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 16:11:47,976 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 16:11:48,432 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 16:11:48,433 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 16:11:48,433 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 16:11:48,446 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 16:13:14,632 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 16:13:14,693 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 16:13:14,695 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 16:13:14,704 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-06 16:13:14,729 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 16:13:14,729 - InvoiceAuditor - INFO - Node: validation_agent | python_issues:[]
2025-12-06 16:13:14,738 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 16:15:16,333 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 16:15:16,388 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true,
    "calculation_error": false
  },
  "issues": [
    {
      "code": "1",
      "field": "currency",
      "severity": "Low",
      "message": "Currency symbol '€' is not explicitly listed in the accepted_currencies. However, it can be converted to EUR using currency_symbol_map."
    }
  ]
}
2025-12-06 16:15:16,389 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True, 'calculation_error': False}, 'issues': [{'code': '1', 'field': 'currency', 'severity': 'Low', 'message': "Currency symbol '€' is not explicitly listed in the accepted_currencies. However, it can be converted to EUR using currency_symbol_map."}]}
2025-12-06 16:15:16,391 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True, 'calculation_error': False}
2025-12-06 16:15:16,396 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-06 16:49:26,283 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 16:49:26,340 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 16:49:26,773 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 16:49:26,774 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 16:49:26,774 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 16:49:26,786 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 16:50:50,476 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 16:50:50,540 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 16:50:50,540 - InvoiceAuditor - INFO - Node: translation_agent | Response from translation agent: {
  "translated_text": {
    "Company Name": "HafenLogistik GmbH",
    "Address": "Am Kai 55, Hamburg, Germany",
    "Invoice Number": "RE-2025-004",
    "Invoice Date": "02.05.2025",
    "Purchase Order Number": "PO-1004",
    "Items": [
      {
        "Item Code": "SKU-301",
        "Description": "Transportkisten",
        "Quantity": "40",
        "Price per Unit": "25.00€",
        "Total": "1000.00€"
      },
      {
        "Item Code": "SKU-302",
        "Description": "Sicherheitswesten",
        "Quantity": "60",
        "Price per Unit": "10.00€",
        "Total": "600.00€"
      }
    ],
    "Subtotal": "1600.00€",
    "VAT (10%)": "160.00€",
    "Total Amount": "1760.00€"
  },
  "confidence": 1.0
}
2025-12-06 16:50:50,540 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 16:50:50,541 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: unhashable type: 'slice'
2025-12-06 16:50:50,551 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-06 16:50:50,568 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 17:11:17,695 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 17:11:17,754 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 17:11:18,199 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 17:11:18,200 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 17:11:18,200 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 17:11:18,211 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 17:12:42,921 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 17:12:42,971 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 17:12:42,975 - InvoiceAuditor - INFO - Node: translation_agent | Response from translation agent: {
  "translated_text": {
    "Company Name": "HafenLogistik GmbH",
    "Address": "Am Kai 55, Hamburg, Germany",
    "Invoice Number": "RE-2025-004",
    "Invoice Date": "02.05.2025",
    "Purchase Order Number": "PO-1004",
    "Items": [
      {
        "Item Code": "SKU-301",
        "Description": "Transportkisten",
        "Quantity": "40",
        "Price per Unit": "25.00€",
        "Total": "1000.00€"
      },
      {
        "Item Code": "SKU-302",
        "Description": "Sicherheitswesten",
        "Quantity": "60",
        "Price per Unit": "10.00€",
        "Total": "600.00€"
      }
    ],
    "Subtotal": "1600.00€",
    "VAT (10%)": "160.00€",
    "Total Amount": "1760.00€"
  },
  "confidence": 1.0
}
2025-12-06 17:12:42,976 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 17:12:42,978 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 17:12:43,038 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: expected string or bytes-like object
2025-12-06 17:12:43,041 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-06 17:12:43,052 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 17:24:07,417 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 17:24:07,474 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 17:24:07,905 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 17:24:07,906 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 17:24:07,906 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 17:24:07,918 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 17:25:19,274 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 17:25:19,328 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 17:25:19,328 - InvoiceAuditor - INFO - Node: translation_agent | Response from translation agent: {"translated_text": "Hafen Logistics GmbH\nAm Kai 55, Hamburg, Germany\nInvoice Number: RE-2025-004\nInvoice Date: 02.05.2025\nPurchase Order Number: PO-1004\n-------------------------------------------------\nArticle Code | Description | Quantity | Price | Total\n-------------------------------------------------\nSKU-301 | Transport crates | 40 | 25.00€| 1000.00€\nSKU-302 | Safety vests | 60 | 10.00€| 600.00€\n-------------------------------------------------\nSubtotal: 1600.00€\nVAT (10%): 160.00€\nTotal Amount: 1760.00€\n-------------------------------------------------", "confidence": 1.0}
2025-12-06 17:25:19,331 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: Hafen Logistics GmbH
Am Kai 55, Hamburg, Germany
Invoice Number: RE-2025-004
Invoice Date: 02.05.2025
Purchase Order Number: PO-1004
-------------------------------------------------
Article Code | Description | Quantity | Price | Total
-------------------------------------------------
SKU-301 | Transport crates | 40 | 25.00€| 1000.00€
SKU-302 | Safety vests | 60 | 10.00€| 600.00€
-------------------------------------------------
Subtotal: 1600.00€
VAT (10%): 160.00€
Total Amount: 1760.00€
-------------------------------------------------
2025-12-06 17:25:19,337 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-06 17:25:19,356 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:Hafen Logistics GmbH
Am Kai 55, Hamburg, Germany
Invoice Number: RE-2025-004
Invoice Date: 02.05.2025
Purchase Order Number: PO-1004
-------------------------------------------------
Article Code | Description | Quantity | Price | Total
-------------------------------------------------
SKU-301 | Transport crates | 40 | 25.00€| 1000.00€
SKU-302 | Safety vests | 60 | 10.00€| 600.00€
-------------------------------------------------
Subtotal: 1600.00€
VAT (10%): 160.00€
Total Amount: 1760.00€
-------------------------------------------------
2025-12-06 17:29:48,514 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 17:29:48,567 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 17:29:49,012 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 17:29:49,013 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 17:29:49,013 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 17:29:49,024 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 17:30:55,447 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 17:30:55,472 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 17:30:55,472 - InvoiceAuditor - INFO - Node: translation_agent | Response from translation agent: {
  "translated_text": {
    "Company Name": "HafenLogistik GmbH",
    "Address": "Am Kai 55, Hamburg, Germany",
    "Invoice Number": "RE-2025-004",
    "Invoice Date": "02.05.2025",
    "Purchase Order Number": "PO-1004",
    "Items": [
      {
        "Item Code": "SKU-301",
        "Description": "Transportkisten",
        "Quantity": "40",
        "Price per Unit": "25.00€",
        "Total": "1000.00€"
      },
      {
        "Item Code": "SKU-302",
        "Description": "Sicherheitswesten",
        "Quantity": "60",
        "Price per Unit": "10.00€",
        "Total": "600.00€"
      }
    ],
    "Subtotal": "1600.00€",
    "VAT (10%)": "160.00€",
    "Total Amount": "1760.00€"
  },
  "confidence": 1.0
}
2025-12-06 17:30:55,472 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 17:30:55,473 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 17:30:55,519 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: expected string or bytes-like object
2025-12-06 17:30:55,520 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-06 17:30:55,528 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 17:39:18,299 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 17:39:18,356 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 17:39:18,782 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 17:39:18,783 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 17:39:18,783 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 17:39:18,794 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 17:40:41,004 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 17:40:41,043 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 17:40:41,046 - InvoiceAuditor - INFO - Node: translation_agent | Response from translation agent: {
  "translated_text": {
    "Company Name": "HafenLogistik GmbH",
    "Address": "Am Kai 55, Hamburg, Germany",
    "Invoice Number": "RE-2025-004",
    "Invoice Date": "02.05.2025",
    "Purchase Order Number": "PO-1004",
    "Items": [
      {
        "Item Code": "SKU-301",
        "Description": "Transportkisten",
        "Quantity": "40",
        "Price per Unit": "25.00€",
        "Total": "1000.00€"
      },
      {
        "Item Code": "SKU-302",
        "Description": "Sicherheitswesten",
        "Quantity": "60",
        "Price per Unit": "10.00€",
        "Total": "600.00€"
      }
    ],
    "Subtotal": "1600.00€",
    "VAT (10%)": "160.00€",
    "Total Amount": "1760.00€"
  },
  "confidence": 1.0
}
2025-12-06 17:40:41,046 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 17:40:41,049 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 17:40:41,115 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: expected string or bytes-like object
2025-12-06 17:40:41,119 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-06 17:40:41,131 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 17:40:41,136 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 17:42:30,309 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 17:42:30,341 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true,
    "calculation_error": false
  },
  "issues": [
    {
      "code": "currency",
      "field": "unit_price",
      "severity": "Low",
      "message": "The currency symbol for the unit price is EUR, which is accepted. However, it should be in a format that matches the currency_symbol_map provided."
    },
    {
      "code": "calculation",
      "field": "total",
      "severity": "Low",
      "message": "The total calculated from line items does not match the total amount in the invoice. The total should be 1600.00€ instead of 1760.00€."
    }
  ]
}
2025-12-06 17:42:30,341 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True, 'calculation_error': False}, 'issues': [{'code': 'currency', 'field': 'unit_price', 'severity': 'Low', 'message': 'The currency symbol for the unit price is EUR, which is accepted. However, it should be in a format that matches the currency_symbol_map provided.'}, {'code': 'calculation', 'field': 'total', 'severity': 'Low', 'message': 'The total calculated from line items does not match the total amount in the invoice. The total should be 1600.00€ instead of 1760.00€.'}]}
2025-12-06 17:42:30,343 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True, 'calculation_error': False}
2025-12-06 17:42:30,354 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-06 17:59:15,946 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 17:59:16,002 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 17:59:16,413 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 17:59:16,414 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 17:59:16,414 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 17:59:16,425 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 18:01:14,420 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 18:01:14,464 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 18:01:14,466 - InvoiceAuditor - INFO - Node: translation_agent | Response from translation agent: {
  "HafenLogistik GmbH": "Harbor Logistics GmbH",
  "Am Kai 55, Hamburg, Deutschland": "At Pier 55, Hamburg, Germany",
  "Rechnungsnummer: RE-2025-004": "Invoice number: RE-2025-004",
  "Rechnungsdatum: 02.05.2025": "Invoice date: 02.05.2025",
  "Bestellnummer: PO-1004": "Purchase order number: PO-1004",
  "vendor_id": "None",
  "Artikelcode | Beschreibung | Menge | Preis | Gesamt": "Item code | Description | Quantity | Price | Total",
  "SKU-301": "SKU-301",
  "Transportkisten": "Transport crates",
  "40": "40",
  "25.00€": "25.00€",
  "1000.00€": "1000.00€",
  "SKU-302": "SKU-302",
  "Sicherheitswesten": "Safety vests",
  "60": "60",
  "10.00€": "10.00€",
  "600.00€": "600.00€",
  "Zwischensumme: 1600.00€": "Subtotal: 1600.00€",
  "MwSt (10%): 160.00€": "VAT (10%): 160.00€",
  "Gesamtbetrag: 1760.00€": "Total amount: 1760.00€"
}
{
  "confidence": 1.0
}
2025-12-06 18:01:14,466 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: Extra data: line 23 column 1 (char 844)
2025-12-06 18:01:14,467 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-06 18:01:14,477 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 18:01:14,482 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 18:03:05,894 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 18:03:05,928 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true,
    "calculation_error": false
  },
  "issues": [
    {
      "code": "currency",
      "field": "unit_price",
      "severity": "Low",
      "message": "The currency symbol for the unit price is EUR, which is accepted. However, it should be in a format that matches the currency_symbol_map provided."
    },
    {
      "code": "calculation",
      "field": "total",
      "severity": "Low",
      "message": "The total calculated from line items does not match the total amount in the invoice. The total should be 1600.00€ instead of 1760.00€."
    }
  ]
}
2025-12-06 18:03:05,930 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True, 'calculation_error': False}, 'issues': [{'code': 'currency', 'field': 'unit_price', 'severity': 'Low', 'message': 'The currency symbol for the unit price is EUR, which is accepted. However, it should be in a format that matches the currency_symbol_map provided.'}, {'code': 'calculation', 'field': 'total', 'severity': 'Low', 'message': 'The total calculated from line items does not match the total amount in the invoice. The total should be 1600.00€ instead of 1760.00€.'}]}
2025-12-06 18:03:05,930 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True, 'calculation_error': False}
2025-12-06 18:03:05,939 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-06 18:10:39,493 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 18:10:39,551 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 18:10:39,989 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 18:10:39,990 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 18:10:39,990 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 18:10:40,001 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 18:12:02,409 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 18:12:02,473 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 18:12:02,474 - InvoiceAuditor - INFO - Node: translation_agent | Response from translation agent: {
  "translated_text": {
    "Company Name": "HafenLogistik GmbH",
    "Address": "Am Kai 55, Hamburg, Germany",
    "Invoice Number": "RE-2025-004",
    "Invoice Date": "02.05.2025",
    "Purchase Order Number": "PO-1004",
    "Items": [
      {
        "Item Code": "SKU-301",
        "Description": "Transportkisten",
        "Quantity": "40",
        "Price per Unit": "25.00€",
        "Total": "1000.00€"
      },
      {
        "Item Code": "SKU-302",
        "Description": "Sicherheitswesten",
        "Quantity": "60",
        "Price per Unit": "10.00€",
        "Total": "600.00€"
      }
    ],
    "Subtotal": "1600.00€",
    "VAT (10%)": "160.00€",
    "Total Amount": "1760.00€"
  },
  "confidence": 1.0
}
2025-12-06 18:12:02,475 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 18:12:02,483 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-06 18:12:02,522 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 18:12:02,531 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 18:13:48,454 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 18:13:48,485 - InvoiceAuditor - INFO - Node: validation agent| validation completedBased on the provided YAML validation rules and invoice data, here's the JSON response:

```json
{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true,
    "calculation_error": false
  },
  "issues": [
    {
      "code": "completeness_check",
      "field": "Company Name",
      "severity": "Low",
      "message": "The 'Company Name' field is not a required field."
    }
  ]
}
```

In this case, the data is valid and complete with regards to the required fields for the invoice header and line items. However, there is a minor inconsistency as the 'Company Name' field is not a required field according to the validation rules.
2025-12-06 18:13:48,486 - InvoiceAuditor - INFO - Validation Error: Validation LLM Error via LiteLLM: Expecting value: line 1 column 1 (char 0)
2025-12-06 18:13:48,497 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-06 19:46:58,626 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 19:46:58,684 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 19:46:59,136 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 19:46:59,137 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 19:46:59,137 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 19:46:59,150 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 19:48:21,702 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 19:48:21,753 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 19:48:21,753 - InvoiceAuditor - INFO - Node: translation_agent | Response from translation agent: {
  "translated_text": {
    "Company Name": "HafenLogistik GmbH",
    "Address": "Am Kai 55, Hamburg, Germany",
    "Invoice Number": "RE-2025-004",
    "Invoice Date": "02.05.2025",
    "Purchase Order Number": "PO-1004",
    "Items": [
      {
        "Item Code": "SKU-301",
        "Description": "Transportkisten",
        "Quantity": "40",
        "Price per Unit": "25.00€",
        "Total": "1000.00€"
      },
      {
        "Item Code": "SKU-302",
        "Description": "Sicherheitswesten",
        "Quantity": "60",
        "Price per Unit": "10.00€",
        "Total": "600.00€"
      }
    ],
    "Subtotal": "1600.00€",
    "VAT (10%)": "160.00€",
    "Total Amount": "1760.00€"
  },
  "confidence": 0.95
}
2025-12-06 19:48:21,754 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 19:48:21,755 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-06 19:48:21,764 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 19:48:21,770 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 20:16:55,280 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 20:16:55,344 - InvoiceAuditor - INFO - Node: validation agent| validation completedBased on the provided YAML validation rules and invoice data, here's the JSON response for the invoice validation:

```json
{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true,
    "calculation_error": false
  },
  "issues": [
    {
      "code": "currency",
      "field": "Price per Unit",
      "severity": "Low",
      "message": "Currency symbol '€' is not in the accepted currencies list. However, it can be mapped to EUR."
    },
    {
      "code": "currency",
      "field": "Total",
      "severity": "Low",
      "message": "Currency symbol '€' is not in the accepted currencies list. However, it can be mapped to EUR."
    },
    {
      "code": "currency",
      "field": "VAT (10%)",
      "severity": "Low",
      "message": "Currency symbol '€' is not in the accepted currencies list. However, it can be mapped to EUR."
    },
    {
      "code": "currency",
      "field": "Total Amount",
      "severity": "Low",
      "message": "Currency symbol '€' is not in the accepted currencies list. However, it can be mapped to EUR."
    }
  ]
}
```

The invoice data is valid and complete, but there are minor inconsistencies with the currency symbols used in the invoice data. The currency symbol '€' can be mapped to EUR according to the provided `currency_symbol_map`. However, it is important to note that these currencies are not explicitly listed in the accepted_currencies list, which could potentially lead to further issues if the mapping is incorrect or unsupported.
2025-12-06 20:16:55,349 - InvoiceAuditor - INFO - Validation Error: Validation LLM Error via LiteLLM: Expecting value: line 1 column 1 (char 0)
2025-12-06 20:16:55,364 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-06 20:24:03,632 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 20:24:03,692 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 20:24:04,154 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 20:24:04,154 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 20:24:04,155 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 20:24:04,166 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 20:25:29,720 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 20:25:29,779 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 20:25:29,779 - InvoiceAuditor - INFO - Node: translation_agent | Response from translation agent: {
  "translated_text": {
    "Company Name": "HafenLogistik GmbH",
    "Address": "Am Kai 55, Hamburg, Germany",
    "Invoice Number": "RE-2025-004",
    "Invoice Date": "02.05.2025",
    "Purchase Order Number": "PO-1004",
    "Items": [
      {
        "Item Code": "SKU-301",
        "Description": "Transportkisten",
        "Quantity": "40",
        "Price": "25.00€",
        "Total": "1000.00€"
      },
      {
        "Item Code": "SKU-302",
        "Description": "Sicherheitswesten",
        "Quantity": "60",
        "Price": "10.00€",
        "Total": "600.00€"
      }
    ],
    "Subtotal": "1600.00€",
    "VAT (10%)": "160.00€",
    "Total Amount": "1760.00€"
  },
  "confidence": 0.95
}
2025-12-06 20:25:29,780 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 20:25:29,784 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-06 20:25:29,799 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 20:25:29,906 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 20:26:59,755 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 20:26:59,800 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true,
    "calculation_error": false
  },
  "issues": [
    {
      "code": "required_fields",
      "field": "",
      "severity": "Medium",
      "message": "The following required fields are missing: None"
    }
  ]
}
2025-12-06 20:26:59,801 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True, 'calculation_error': False}, 'issues': [{'code': 'required_fields', 'field': '', 'severity': 'Medium', 'message': 'The following required fields are missing: None'}]}
2025-12-06 20:26:59,801 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True, 'calculation_error': False}
2025-12-06 20:26:59,807 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-06 20:37:02,258 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 20:37:02,315 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 20:37:02,740 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 20:37:02,741 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 20:37:02,741 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 20:37:02,753 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 20:38:29,617 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 20:38:29,657 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 20:38:29,659 - InvoiceAuditor - INFO - Node: translation_agent | Response from translation agent: {
  "translated_text": {
    "Company Name": "HafenLogistik GmbH",
    "Address": "Am Kai 55, Hamburg, Germany",
    "Invoice Number": "RE-2025-004",
    "Invoice Date": "02.05.2025",
    "Purchase Order Number": "PO-1004",
    "Items": [
      {
        "Item Code": "SKU-301",
        "Description": "Transportkisten",
        "Quantity": "40",
        "Price per Unit": "25.00€",
        "Total": "1000.00€"
      },
      {
        "Item Code": "SKU-302",
        "Description": "Sicherheitswesten",
        "Quantity": "60",
        "Price per Unit": "10.00€",
        "Total": "600.00€"
      }
    ],
    "Subtotal": "1600.00€",
    "VAT (10%)": "160.00€",
    "Total Amount": "1760.00€"
  },
  "confidence": 1.0
}
2025-12-06 20:38:29,660 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 20:38:29,664 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-06 20:38:29,685 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 20:38:29,692 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 20:40:07,441 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 20:40:07,486 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true,
    "calculation_error": false
  },
  "issues": [
    {
      "code": "required_fields",
      "field": "currency",
      "severity": "Medium",
      "message": "The currency field is missing"
    }
  ]
}
2025-12-06 20:40:07,486 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True, 'calculation_error': False}, 'issues': [{'code': 'required_fields', 'field': 'currency', 'severity': 'Medium', 'message': 'The currency field is missing'}]}
2025-12-06 20:40:07,486 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True, 'calculation_error': False}
2025-12-06 20:40:07,489 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-06 20:56:51,870 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-06 20:56:51,928 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 20:56:52,366 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-06 20:56:52,366 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-06 20:56:52,366 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-06 20:56:52,377 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 20:58:14,757 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 20:58:14,796 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-06 20:58:14,796 - InvoiceAuditor - INFO - Node: translation_agent | Response from translation agent: {
  "translated_text": {
    "Company Name": "HafenLogistik GmbH",
    "Address": "Am Kai 55, Hamburg, Germany",
    "Invoice Number": "RE-2025-004",
    "Invoice Date": "02.05.2025",
    "Purchase Order Number": "PO-1004",
    "Items": [
      {
        "Item Code": "SKU-301",
        "Description": "Transportkisten",
        "Quantity": "40",
        "Price per Unit": "25.00€",
        "Total": "1000.00€"
      },
      {
        "Item Code": "SKU-302",
        "Description": "Sicherheitswesten",
        "Quantity": "60",
        "Price per Unit": "10.00€",
        "Total": "600.00€"
      }
    ],
    "Subtotal": "1600.00€",
    "VAT (10%)": "160.00€",
    "Total Amount": "1760.00€"
  },
  "confidence": 1.0
}
2025-12-06 20:58:14,799 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 20:58:14,803 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-06 20:58:14,824 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-06 20:58:14,831 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-06 20:59:53,217 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-06 20:59:53,246 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "code": "currency",
      "field": "Price per Unit",
      "severity": "Low",
      "message": "Currency symbol '€' is not explicitly listed in the accepted currencies, but it can be converted to EUR using currency_symbol_map."
    },
    {
      "code": "total_amount",
      "field": "",
      "severity": "Low",
      "message": "Total Amount '1760.00€' includes VAT, which may not be compliant with the provided tolerances."
    }
  ]
}
2025-12-06 20:59:53,246 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'code': 'currency', 'field': 'Price per Unit', 'severity': 'Low', 'message': "Currency symbol '€' is not explicitly listed in the accepted currencies, but it can be converted to EUR using currency_symbol_map."}, {'code': 'total_amount', 'field': '', 'severity': 'Low', 'message': "Total Amount '1760.00€' includes VAT, which may not be compliant with the provided tolerances."}]}
2025-12-06 20:59:53,248 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-06 20:59:53,265 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-07 21:51:42,049 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-07 21:51:42,105 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-07 21:51:42,536 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-07 21:51:42,537 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-07 21:51:42,537 - InvoiceAuditor - INFO - Node: translation_agent | Started: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-07 21:51:42,548 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 21:53:23,874 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 21:53:24,031 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-07 21:53:24,031 - InvoiceAuditor - INFO - Node: translation_agent | Response from translation agent: {
  "translated_text": {
    "Company Name": "HafenLogistik GmbH",
    "Address": "Am Kai 55, Hamburg, Germany",
    "Invoice Number": "RE-2025-004",
    "Invoice Date": "02.05.2025",
    "Purchase Order Number": "PO-1004",
    "Items": [
      {
        "Item Code": "SKU-301",
        "Description": "Transportkisten",
        "Quantity": "40",
        "Price per Unit": "25.00€",
        "Total": "1000.00€"
      },
      {
        "Item Code": "SKU-302",
        "Description": "Sicherheitswesten",
        "Quantity": "60",
        "Price per Unit": "10.00€",
        "Total": "600.00€"
      }
    ],
    "Subtotal": "1600.00€",
    "VAT (10%)": "160.00€",
    "Total Amount": "1760.00€"
  },
  "confidence": 1.0
}
2025-12-07 21:53:24,032 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-07 21:53:24,041 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 21:53:24,135 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: expected string or bytes-like object
2025-12-07 21:53:24,145 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-07 21:53:24,163 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-07 21:53:24,173 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 21:55:13,035 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 21:55:13,083 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": false,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "total",
      "severity": "Medium",
      "message": "Total does not match the sum of line items total"
    },
    {
      "field": "currency",
      "severity": "High",
      "message": "Invoice currency is EUR, which is not in the accepted currencies list"
    }
  ]
}
2025-12-07 21:55:13,084 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': False, 'completeness_ok': True}, 'issues': [{'field': 'total', 'severity': 'Medium', 'message': 'Total does not match the sum of line items total'}, {'field': 'currency', 'severity': 'High', 'message': 'Invoice currency is EUR, which is not in the accepted currencies list'}]}
2025-12-07 21:55:13,084 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': False, 'completeness_ok': True}
2025-12-07 21:55:13,088 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-07 22:12:30,383 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-07 22:12:30,437 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-07 22:12:30,837 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-07 22:12:30,837 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-07 22:12:30,848 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 22:14:02,179 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 22:14:02,221 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-07 22:14:02,221 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-07 22:14:02,223 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-07 22:14:02,225 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 22:14:02,297 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: expected string or bytes-like object
2025-12-07 22:14:02,298 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-07 22:14:02,308 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-07 22:14:02,314 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 22:15:52,822 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 22:15:52,857 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": false,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "total",
      "severity": "Medium",
      "message": "Total does not match the sum of line items total"
    },
    {
      "field": "currency",
      "severity": "High",
      "message": "Invoice currency is EUR, which is not in the accepted currencies list"
    }
  ]
}
2025-12-07 22:15:52,859 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': False, 'completeness_ok': True}, 'issues': [{'field': 'total', 'severity': 'Medium', 'message': 'Total does not match the sum of line items total'}, {'field': 'currency', 'severity': 'High', 'message': 'Invoice currency is EUR, which is not in the accepted currencies list'}]}
2025-12-07 22:15:52,859 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': False, 'completeness_ok': True}
2025-12-07 22:15:52,860 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-07 22:19:46,057 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-07 22:19:46,108 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-07 22:19:46,554 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-07 22:19:46,555 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-07 22:19:46,566 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 22:21:17,415 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 22:21:17,458 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-07 22:21:17,459 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-07 22:21:17,459 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-07 22:21:17,460 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 22:21:17,530 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: expected string or bytes-like object
2025-12-07 22:21:17,531 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-07 22:21:17,542 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-07 22:21:17,546 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 22:23:15,627 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 22:23:15,688 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": false,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "total",
      "severity": "Medium",
      "message": "Total does not match the sum of line items total"
    },
    {
      "field": "currency",
      "severity": "High",
      "message": "Invoice currency is EUR, which is not in the accepted currencies list"
    }
  ]
}
2025-12-07 22:23:15,688 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': False, 'completeness_ok': True}, 'issues': [{'field': 'total', 'severity': 'Medium', 'message': 'Total does not match the sum of line items total'}, {'field': 'currency', 'severity': 'High', 'message': 'Invoice currency is EUR, which is not in the accepted currencies list'}]}
2025-12-07 22:23:15,688 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': False, 'completeness_ok': True}
2025-12-07 22:23:15,695 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-07 22:27:54,533 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-07 22:27:54,581 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-07 22:27:54,983 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-07 22:27:54,984 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-07 22:27:54,996 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 22:29:11,422 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 22:29:11,453 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-07 22:29:11,453 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-07 22:29:11,453 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-07 22:29:11,454 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 22:29:11,523 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: expected string or bytes-like object
2025-12-07 22:29:11,523 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-07 22:29:11,532 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-07 22:29:11,536 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 22:31:00,223 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 22:31:00,253 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": false,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "total",
      "severity": "Medium",
      "message": "Total does not match the sum of line items total"
    },
    {
      "field": "currency",
      "severity": "High",
      "message": "Invoice currency is EUR, which is not in the accepted currencies list"
    }
  ]
}
2025-12-07 22:31:00,253 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': False, 'completeness_ok': True}, 'issues': [{'field': 'total', 'severity': 'Medium', 'message': 'Total does not match the sum of line items total'}, {'field': 'currency', 'severity': 'High', 'message': 'Invoice currency is EUR, which is not in the accepted currencies list'}]}
2025-12-07 22:31:00,254 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': False, 'completeness_ok': True}
2025-12-07 22:31:00,255 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-07 22:31:29,047 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-07 22:31:29,095 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-07 22:31:29,535 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-07 22:31:29,535 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-07 22:31:29,548 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 22:32:51,892 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 22:32:51,926 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-07 22:32:51,927 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-07 22:32:51,928 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-07 22:32:51,929 - LiteLLM - DEBUG - 

2025-12-07 22:32:51,930 - LiteLLM - DEBUG - [92mRequest to litellm:[0m
2025-12-07 22:32:51,930 - LiteLLM - DEBUG - [92mlitellm.completion(model='ollama/mistral:7b-instruct', messages=[{'role': 'system', 'content': 'You are an invoice extraction assistant. Extract invoice fields as JSON: \n        invoice_number, po_number, date, vendor, vendor_id, currency, total, taxes, line_items (list of {item_code, description, qty, unit_price, total}). \n        if unable to extract any of the fileds, mark it as None.\n        return JSON: {structured_text} Return pure JSON only.'}, {'role': 'user', 'content': {'role': 'user', 'content': {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}}}], api_base='http://localhost:11434', temperature=0.0)[0m
2025-12-07 22:32:51,930 - LiteLLM - DEBUG - 

2025-12-07 22:32:51,931 - LiteLLM - DEBUG - self.optional_params: {}
2025-12-07 22:32:51,931 - LiteLLM - DEBUG - SYNC kwargs[caching]: False; litellm.cache: None; kwargs.get('cache')['no-cache']: False
2025-12-07 22:32:51,931 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 22:32:51,932 - LiteLLM - DEBUG - 
LiteLLM: Params passed to completion() {'functions': None, 'function_call': None, 'temperature': 0.0, 'top_p': None, 'stream': None, 'stream_options': None, 'stop': None, 'max_tokens': None, 'max_completion_tokens': None, 'modalities': None, 'prediction': None, 'audio': None, 'presence_penalty': None, 'frequency_penalty': None, 'logit_bias': None, 'user': None, 'response_format': None, 'seed': None, 'tools': None, 'tool_choice': None, 'max_retries': None, 'logprobs': None, 'top_logprobs': None, 'extra_headers': None, 'api_version': None, 'parallel_tool_calls': None, 'allowed_openai_params': None, 'reasoning_effort': None, 'verbosity': None, 'additional_drop_params': None, 'messages': [{'role': 'system', 'content': 'You are an invoice extraction assistant. Extract invoice fields as JSON: \n        invoice_number, po_number, date, vendor, vendor_id, currency, total, taxes, line_items (list of {item_code, description, qty, unit_price, total}). \n        if unable to extract any of the fileds, mark it as None.\n        return JSON: {structured_text} Return pure JSON only.'}, {'role': 'user', 'content': {'role': 'user', 'content': {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}}}], 'thinking': None, 'web_search_options': None, 'safety_identifier': None, 'custom_llm_provider': 'ollama', 'drop_params': None, 'model': 'mistral:7b-instruct', 'n': None, 'service_tier': None}
2025-12-07 22:32:51,937 - LiteLLM - DEBUG - 
LiteLLM: Non-Default params passed to completion() {'temperature': 0.0}
2025-12-07 22:32:51,938 - LiteLLM - DEBUG - Final returned optional params: {'temperature': 0.0}
2025-12-07 22:32:51,938 - LiteLLM - DEBUG - self.optional_params: {'temperature': 0.0}
2025-12-07 22:32:51,938 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:32:51,955 - LiteLLM - DEBUG - model_info: {'key': 'mistral:7b-instruct', 'litellm_provider': 'ollama', 'mode': 'chat', 'supports_function_calling': True, 'input_cost_per_token': 0.0, 'output_cost_per_token': 0.0, 'max_tokens': 32768, 'max_input_tokens': 32768, 'max_output_tokens': 32768}
2025-12-07 22:32:51,956 - LiteLLM - DEBUG - Logging Details LiteLLM-Success Call streaming complete
2025-12-07 22:32:51,957 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:32:51,985 - LiteLLM - DEBUG - Logging Details: logger_fn - None | callable(logger_fn) - False
2025-12-07 22:32:51,988 - LiteLLM - DEBUG - model_info: {'key': 'mistral:7b-instruct', 'litellm_provider': 'ollama', 'mode': 'chat', 'supports_function_calling': True, 'input_cost_per_token': 0.0, 'output_cost_per_token': 0.0, 'max_tokens': 32768, 'max_input_tokens': 32768, 'max_output_tokens': 32768}
2025-12-07 22:32:52,020 - LiteLLM - DEBUG - Logging Details LiteLLM-Failure Call: []
2025-12-07 22:32:52,022 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: expected string or bytes-like object
2025-12-07 22:32:52,043 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-07 22:32:52,086 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-07 22:32:52,096 - LiteLLM - DEBUG - 

2025-12-07 22:32:52,110 - LiteLLM - DEBUG - [92mRequest to litellm:[0m
2025-12-07 22:32:52,110 - LiteLLM - DEBUG - [92mlitellm.completion(model='ollama/mistral:7b-instruct', messages=[{'role': 'system', 'content': "\n    You are an expert Invoice Validation Agent. Your task is to check the provided invoice data against the given rules and calculations.\n    **RULES & INSTRUCTIONS:**\n    1. **Completeness Check:** \n        - Check that all fields listed in `required_fields` from the YAML\n        - If po_number, invoice_date, invoice_id are mosssing, mark as 'High' severity.\n        - for currency field, extract from the amounts provided on the invoice \n        - Ignore non `required_fields` for completeness check\n    2. **Consistency Check:** Analyze the data fields for any non-compliance with the rules, and check the context for any obvious inconsistencies (e.g., date of invoice is in the future).\n    3. **Severity:** Use 'High' for critical errors (calculation, forbidden currency), 'Medium' for required but missing fields, and 'Low' for minor inconsistencies.\n    4. keep unicode characters as it is without any changes especially currency symbols\n    5. map currency symbols with currency_symbol_map in YAML rules and then validate against accepted_currencies in YAML rules\n    7. return JSON: {validation_results: {data_valid : True/False, completeness_ok : True/False},  issues: [{field, severity, message}] Return pure JSON only.\n    8. Only output the JSON object. Do NOT include any explanatory text, markdown formatting.\n    "}, {'role': 'user', 'content': '**DATA CONTEXT:**\n1. **YAML Validation Rules:**\naccepted_currencies:\n- USD\n- EUR\n- INR\n- GBP\ncurrency_symbol_map:\n  $: USD\n  "\\xA3": GBP\n  "\\u20AC": EUR\n  "\\u20B9": INR\ndata_types:\n  currency: str\n  invoice_date: date\n  invoice_no: str\n  po_number: str\n  qty: float\n  total: float\n  total_amount: float\n  unit_price: float\n  vendor_id: str\nlogging:\n  enable_audit_log: true\n  log_file: ./logs/invoice_auditor.log\n  log_level: INFO\nreporting:\n  include_discrepancy_summary: true\n  include_translation_confidence: true\n  output_dir: ./outputs/reports\n  report_format: HTML\nrequired_fields:\n  header:\n  - invoice_no\n  - invoice_date\n  - po_number\n  - vendor_id\n  - currency\n  - total_amount\n  line_item:\n  - item_code\n  - description\n  - qty\n  - unit_price\n  - total\ntolerances:\n  price_difference_percent: 5\n  quantity_difference_percent: 0\n  tax_difference_percent: 2\nvalidation_policies:\n  auto_approve_confidence_threshold: 0.95\n  invalid_currency_action: reject\n  missing_field_action: flag\n  total_mismatch_action: manual_review\n\n2. **INVOICE DATA TO VALIDATE:**\nHafenLogistik GmbH\nAm Kai 55, Hamburg, Deutschland\nRechnungsnummer: RE-2025-004\nRechnungsdatum: 02.05.2025\nBestellnummer: PO-1004\n-------------------------------------------------\nArtikelcode | Beschreibung | Menge | Preis | Gesamt\n-------------------------------------------------\nSKU-301 | Transportkisten | 40 | 25.00€| 1000.00€\nSKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€\n-------------------------------------------------\nZwischensumme: 1600.00€\nMwSt (10%): 160.00€\nGesamtbetrag: 1760.00€\n-------------------------------------------------\n\nAnalyze the data and produce the JSON response.\n'}], api_base='http://localhost:11434', temperature=0.0)[0m
2025-12-07 22:32:52,111 - LiteLLM - DEBUG - 

2025-12-07 22:32:52,111 - LiteLLM - DEBUG - self.optional_params: {}
2025-12-07 22:32:52,111 - LiteLLM - DEBUG - SYNC kwargs[caching]: False; litellm.cache: None; kwargs.get('cache')['no-cache']: False
2025-12-07 22:32:52,112 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 22:32:52,112 - LiteLLM - DEBUG - 
LiteLLM: Params passed to completion() {'functions': None, 'function_call': None, 'temperature': 0.0, 'top_p': None, 'stream': None, 'stream_options': None, 'stop': None, 'max_tokens': None, 'max_completion_tokens': None, 'modalities': None, 'prediction': None, 'audio': None, 'presence_penalty': None, 'frequency_penalty': None, 'logit_bias': None, 'user': None, 'response_format': None, 'seed': None, 'tools': None, 'tool_choice': None, 'max_retries': None, 'logprobs': None, 'top_logprobs': None, 'extra_headers': None, 'api_version': None, 'parallel_tool_calls': None, 'allowed_openai_params': None, 'reasoning_effort': None, 'verbosity': None, 'additional_drop_params': None, 'messages': [{'role': 'system', 'content': "\n    You are an expert Invoice Validation Agent. Your task is to check the provided invoice data against the given rules and calculations.\n    **RULES & INSTRUCTIONS:**\n    1. **Completeness Check:** \n        - Check that all fields listed in `required_fields` from the YAML\n        - If po_number, invoice_date, invoice_id are mosssing, mark as 'High' severity.\n        - for currency field, extract from the amounts provided on the invoice \n        - Ignore non `required_fields` for completeness check\n    2. **Consistency Check:** Analyze the data fields for any non-compliance with the rules, and check the context for any obvious inconsistencies (e.g., date of invoice is in the future).\n    3. **Severity:** Use 'High' for critical errors (calculation, forbidden currency), 'Medium' for required but missing fields, and 'Low' for minor inconsistencies.\n    4. keep unicode characters as it is without any changes especially currency symbols\n    5. map currency symbols with currency_symbol_map in YAML rules and then validate against accepted_currencies in YAML rules\n    7. return JSON: {validation_results: {data_valid : True/False, completeness_ok : True/False},  issues: [{field, severity, message}] Return pure JSON only.\n    8. Only output the JSON object. Do NOT include any explanatory text, markdown formatting.\n    "}, {'role': 'user', 'content': '**DATA CONTEXT:**\n1. **YAML Validation Rules:**\naccepted_currencies:\n- USD\n- EUR\n- INR\n- GBP\ncurrency_symbol_map:\n  $: USD\n  "\\xA3": GBP\n  "\\u20AC": EUR\n  "\\u20B9": INR\ndata_types:\n  currency: str\n  invoice_date: date\n  invoice_no: str\n  po_number: str\n  qty: float\n  total: float\n  total_amount: float\n  unit_price: float\n  vendor_id: str\nlogging:\n  enable_audit_log: true\n  log_file: ./logs/invoice_auditor.log\n  log_level: INFO\nreporting:\n  include_discrepancy_summary: true\n  include_translation_confidence: true\n  output_dir: ./outputs/reports\n  report_format: HTML\nrequired_fields:\n  header:\n  - invoice_no\n  - invoice_date\n  - po_number\n  - vendor_id\n  - currency\n  - total_amount\n  line_item:\n  - item_code\n  - description\n  - qty\n  - unit_price\n  - total\ntolerances:\n  price_difference_percent: 5\n  quantity_difference_percent: 0\n  tax_difference_percent: 2\nvalidation_policies:\n  auto_approve_confidence_threshold: 0.95\n  invalid_currency_action: reject\n  missing_field_action: flag\n  total_mismatch_action: manual_review\n\n2. **INVOICE DATA TO VALIDATE:**\nHafenLogistik GmbH\nAm Kai 55, Hamburg, Deutschland\nRechnungsnummer: RE-2025-004\nRechnungsdatum: 02.05.2025\nBestellnummer: PO-1004\n-------------------------------------------------\nArtikelcode | Beschreibung | Menge | Preis | Gesamt\n-------------------------------------------------\nSKU-301 | Transportkisten | 40 | 25.00€| 1000.00€\nSKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€\n-------------------------------------------------\nZwischensumme: 1600.00€\nMwSt (10%): 160.00€\nGesamtbetrag: 1760.00€\n-------------------------------------------------\n\nAnalyze the data and produce the JSON response.\n'}], 'thinking': None, 'web_search_options': None, 'safety_identifier': None, 'custom_llm_provider': 'ollama', 'drop_params': None, 'model': 'mistral:7b-instruct', 'n': None, 'service_tier': None}
2025-12-07 22:32:52,113 - LiteLLM - DEBUG - 
LiteLLM: Non-Default params passed to completion() {'temperature': 0.0}
2025-12-07 22:32:52,113 - LiteLLM - DEBUG - Final returned optional params: {'temperature': 0.0}
2025-12-07 22:32:52,113 - LiteLLM - DEBUG - self.optional_params: {'temperature': 0.0}
2025-12-07 22:32:52,114 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:32:52,141 - LiteLLM - DEBUG - [92m

POST Request Sent from LiteLLM:
curl -X POST \
http://localhost:11434/api/generate \
-d '{'model': 'mistral:7b-instruct', 'prompt': '### System:\n\n    You are an expert Invoice Validation Agent. Your task is to check the provided invoice data against the given rules and calculations.\n    **RULES & INSTRUCTIONS:**\n    1. **Completeness Check:** \n        - Check that all fields listed in `required_fields` from the YAML\n        - If po_number, invoice_date, invoice_id are mosssing, mark as \'High\' severity.\n        - for currency field, extract from the amounts provided on the invoice \n        - Ignore non `required_fields` for completeness check\n    2. **Consistency Check:** Analyze the data fields for any non-compliance with the rules, and check the context for any obvious inconsistencies (e.g., date of invoice is in the future).\n    3. **Severity:** Use \'High\' for critical errors (calculation, forbidden currency), \'Medium\' for required but missing fields, and \'Low\' for minor inconsistencies.\n    4. keep unicode characters as it is without any changes especially currency symbols\n    5. map currency symbols with currency_symbol_map in YAML rules and then validate against accepted_currencies in YAML rules\n    7. return JSON: {validation_results: {data_valid : True/False, completeness_ok : True/False},  issues: [{field, severity, message}] Return pure JSON only.\n    8. Only output the JSON object. Do NOT include any explanatory text, markdown formatting.\n    \n\n### User:\n**DATA CONTEXT:**\n1. **YAML Validation Rules:**\naccepted_currencies:\n- USD\n- EUR\n- INR\n- GBP\ncurrency_symbol_map:\n  $: USD\n  "\\xA3": GBP\n  "\\u20AC": EUR\n  "\\u20B9": INR\ndata_types:\n  currency: str\n  invoice_date: date\n  invoice_no: str\n  po_number: str\n  qty: float\n  total: float\n  total_amount: float\n  unit_price: float\n  vendor_id: str\nlogging:\n  enable_audit_log: true\n  log_file: ./logs/invoice_auditor.log\n  log_level: INFO\nreporting:\n  include_discrepancy_summary: true\n  include_translation_confidence: true\n  output_dir: ./outputs/reports\n  report_format: HTML\nrequired_fields:\n  header:\n  - invoice_no\n  - invoice_date\n  - po_number\n  - vendor_id\n  - currency\n  - total_amount\n  line_item:\n  - item_code\n  - description\n  - qty\n  - unit_price\n  - total\ntolerances:\n  price_difference_percent: 5\n  quantity_difference_percent: 0\n  tax_difference_percent: 2\nvalidation_policies:\n  auto_approve_confidence_threshold: 0.95\n  invalid_currency_action: reject\n  missing_field_action: flag\n  total_mismatch_action: manual_review\n\n2. **INVOICE DATA TO VALIDATE:**\nHafenLogistik GmbH\nAm Kai 55, Hamburg, Deutschland\nRechnungsnummer: RE-2025-004\nRechnungsdatum: 02.05.2025\nBestellnummer: PO-1004\n-------------------------------------------------\nArtikelcode | Beschreibung | Menge | Preis | Gesamt\n-------------------------------------------------\nSKU-301 | Transportkisten | 40 | 25.00€| 1000.00€\nSKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€\n-------------------------------------------------\nZwischensumme: 1600.00€\nMwSt (10%): 160.00€\nGesamtbetrag: 1760.00€\n-------------------------------------------------\n\nAnalyze the data and produce the JSON response.\n\n\n', 'options': {'temperature': 0.0}, 'stream': False, 'images': []}'
[0m

2025-12-07 22:34:42,711 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 22:34:42,712 - LiteLLM - DEBUG - selected model name for cost calculation: ollama/mistral:7b-instruct
2025-12-07 22:34:42,712 - LiteLLM - DEBUG - Logging Details LiteLLM-Success Call: Cache_hit=None
2025-12-07 22:34:42,713 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:34:42,713 - LiteLLM - DEBUG - selected model name for cost calculation: ollama/mistral:7b-instruct
2025-12-07 22:34:42,714 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:34:42,746 - LiteLLM - DEBUG - Returned custom cost for model=ollama/mistral:7b-instruct - prompt_tokens_cost_usd_dollar: 0, completion_tokens_cost_usd_dollar: 0
2025-12-07 22:34:42,747 - LiteLLM - DEBUG - Returned custom cost for model=ollama/mistral:7b-instruct - prompt_tokens_cost_usd_dollar: 0, completion_tokens_cost_usd_dollar: 0
2025-12-07 22:34:42,747 - LiteLLM - DEBUG - response_cost: 0.0
2025-12-07 22:34:42,748 - LiteLLM - DEBUG - response_cost: 0.0
2025-12-07 22:34:42,749 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:34:42,749 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": false,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "total",
      "severity": "Medium",
      "message": "Total does not match the sum of line items total"
    },
    {
      "field": "currency",
      "severity": "High",
      "message": "Invoice currency is EUR, which is not in the accepted currencies list"
    }
  ]
}
2025-12-07 22:34:42,750 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': False, 'completeness_ok': True}, 'issues': [{'field': 'total', 'severity': 'Medium', 'message': 'Total does not match the sum of line items total'}, {'field': 'currency', 'severity': 'High', 'message': 'Invoice currency is EUR, which is not in the accepted currencies list'}]}
2025-12-07 22:34:42,750 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': False, 'completeness_ok': True}
2025-12-07 22:34:42,752 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-07 22:34:42,791 - LiteLLM - DEBUG - model_info: {'key': 'mistral:7b-instruct', 'litellm_provider': 'ollama', 'mode': 'chat', 'supports_function_calling': True, 'input_cost_per_token': 0.0, 'output_cost_per_token': 0.0, 'max_tokens': 32768, 'max_input_tokens': 32768, 'max_output_tokens': 32768}
2025-12-07 22:34:42,792 - LiteLLM - DEBUG - Logging Details LiteLLM-Success Call streaming complete
2025-12-07 22:34:42,792 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:34:42,825 - LiteLLM - DEBUG - model_info: {'key': 'mistral:7b-instruct', 'litellm_provider': 'ollama', 'mode': 'chat', 'supports_function_calling': True, 'input_cost_per_token': 0.0, 'output_cost_per_token': 0.0, 'max_tokens': 32768, 'max_input_tokens': 32768, 'max_output_tokens': 32768}
2025-12-07 22:38:23,032 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-07 22:38:23,082 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-07 22:38:23,467 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-07 22:38:23,468 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-07 22:38:23,478 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 22:39:39,833 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 22:39:39,873 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-07 22:39:39,873 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-07 22:39:39,875 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-07 22:39:39,876 - LiteLLM - DEBUG - 

2025-12-07 22:39:39,876 - LiteLLM - DEBUG - [92mRequest to litellm:[0m
2025-12-07 22:39:39,876 - LiteLLM - DEBUG - [92mlitellm.completion(model='ollama/mistral:7b-instruct', messages=[{'role': 'system', 'content': 'You are an invoice extraction assistant. Extract invoice fields as JSON: \n        invoice_number, po_number, date, vendor, vendor_id, currency, total, taxes, line_items (list of {item_code, description, qty, unit_price, total}). \n        if unable to extract any of the fileds, mark it as None.\n        return JSON: {structured_text} Return pure JSON only.'}, {'role': 'user', 'content': {'role': 'user', 'content': {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}}}], api_base='http://localhost:11434', temperature=0.0)[0m
2025-12-07 22:39:39,877 - LiteLLM - DEBUG - 

2025-12-07 22:39:39,877 - LiteLLM - DEBUG - self.optional_params: {}
2025-12-07 22:39:39,877 - LiteLLM - DEBUG - SYNC kwargs[caching]: False; litellm.cache: None; kwargs.get('cache')['no-cache']: False
2025-12-07 22:39:39,878 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 22:39:39,878 - LiteLLM - DEBUG - 
LiteLLM: Params passed to completion() {'functions': None, 'function_call': None, 'temperature': 0.0, 'top_p': None, 'stream': None, 'stream_options': None, 'stop': None, 'max_tokens': None, 'max_completion_tokens': None, 'modalities': None, 'prediction': None, 'audio': None, 'presence_penalty': None, 'frequency_penalty': None, 'logit_bias': None, 'user': None, 'response_format': None, 'seed': None, 'tools': None, 'tool_choice': None, 'max_retries': None, 'logprobs': None, 'top_logprobs': None, 'extra_headers': None, 'api_version': None, 'parallel_tool_calls': None, 'allowed_openai_params': None, 'reasoning_effort': None, 'verbosity': None, 'additional_drop_params': None, 'messages': [{'role': 'system', 'content': 'You are an invoice extraction assistant. Extract invoice fields as JSON: \n        invoice_number, po_number, date, vendor, vendor_id, currency, total, taxes, line_items (list of {item_code, description, qty, unit_price, total}). \n        if unable to extract any of the fileds, mark it as None.\n        return JSON: {structured_text} Return pure JSON only.'}, {'role': 'user', 'content': {'role': 'user', 'content': {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}}}], 'thinking': None, 'web_search_options': None, 'safety_identifier': None, 'custom_llm_provider': 'ollama', 'drop_params': None, 'model': 'mistral:7b-instruct', 'n': None, 'service_tier': None}
2025-12-07 22:39:39,879 - LiteLLM - DEBUG - 
LiteLLM: Non-Default params passed to completion() {'temperature': 0.0}
2025-12-07 22:39:39,879 - LiteLLM - DEBUG - Final returned optional params: {'temperature': 0.0}
2025-12-07 22:39:39,879 - LiteLLM - DEBUG - self.optional_params: {'temperature': 0.0}
2025-12-07 22:39:39,879 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:39:39,904 - LiteLLM - DEBUG - model_info: {'key': 'mistral:7b-instruct', 'litellm_provider': 'ollama', 'mode': 'chat', 'supports_function_calling': True, 'input_cost_per_token': 0.0, 'output_cost_per_token': 0.0, 'max_tokens': 32768, 'max_input_tokens': 32768, 'max_output_tokens': 32768}
2025-12-07 22:39:39,904 - LiteLLM - DEBUG - Logging Details LiteLLM-Success Call streaming complete
2025-12-07 22:39:39,905 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:39:39,934 - LiteLLM - DEBUG - Logging Details: logger_fn - None | callable(logger_fn) - False
2025-12-07 22:39:39,935 - LiteLLM - DEBUG - model_info: {'key': 'mistral:7b-instruct', 'litellm_provider': 'ollama', 'mode': 'chat', 'supports_function_calling': True, 'input_cost_per_token': 0.0, 'output_cost_per_token': 0.0, 'max_tokens': 32768, 'max_input_tokens': 32768, 'max_output_tokens': 32768}
2025-12-07 22:39:39,942 - LiteLLM - DEBUG - Logging Details LiteLLM-Failure Call: []
2025-12-07 22:39:39,943 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: expected string or bytes-like object
2025-12-07 22:39:39,944 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-07 22:39:39,956 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-07 22:39:39,960 - LiteLLM - DEBUG - 

2025-12-07 22:39:39,960 - LiteLLM - DEBUG - [92mRequest to litellm:[0m
2025-12-07 22:39:39,960 - LiteLLM - DEBUG - [92mlitellm.completion(model='ollama/mistral:7b-instruct', messages=[{'role': 'system', 'content': "\n    You are an expert Invoice Validation Agent. Your task is to check the provided invoice data against the given rules and calculations.\n    **RULES & INSTRUCTIONS:**\n    1. **Completeness Check:** \n        - Check that all fields listed in `required_fields` from the YAML\n        - If po_number, invoice_date, invoice_id are mosssing, mark as 'High' severity.\n        - for currency field, extract from the amounts provided on the invoice \n        - Ignore non `required_fields` for completeness check\n    2. **Consistency Check:** Analyze the data fields for any non-compliance with the rules, and check the context for any obvious inconsistencies (e.g., date of invoice is in the future).\n    3. **Severity:** Use 'High' for critical errors (calculation, forbidden currency), 'Medium' for required but missing fields, and 'Low' for minor inconsistencies.\n    4. keep unicode characters as it is without any changes especially currency symbols\n    5. map currency symbols with currency_symbol_map in YAML rules and then validate against accepted_currencies in YAML rules\n    7. return JSON: {validation_results: {data_valid : True/False, completeness_ok : True/False},  issues: [{field, severity, message}] Return pure JSON only.\n    8. Only output the JSON object. Do NOT include any explanatory text, markdown formatting.\n    "}, {'role': 'user', 'content': '**DATA CONTEXT:**\n1. **YAML Validation Rules:**\naccepted_currencies:\n- USD\n- EUR\n- INR\n- GBP\ncurrency_symbol_map:\n  $: USD\n  "\\xA3": GBP\n  "\\u20AC": EUR\n  "\\u20B9": INR\ndata_types:\n  currency: str\n  invoice_date: date\n  invoice_no: str\n  po_number: str\n  qty: float\n  total: float\n  total_amount: float\n  unit_price: float\n  vendor_id: str\nlogging:\n  enable_audit_log: true\n  log_file: ./logs/invoice_auditor.log\n  log_level: INFO\nreporting:\n  include_discrepancy_summary: true\n  include_translation_confidence: true\n  output_dir: ./outputs/reports\n  report_format: HTML\nrequired_fields:\n  header:\n  - invoice_no\n  - invoice_date\n  - po_number\n  - vendor_id\n  - currency\n  - total_amount\n  line_item:\n  - item_code\n  - description\n  - qty\n  - unit_price\n  - total\ntolerances:\n  price_difference_percent: 5\n  quantity_difference_percent: 0\n  tax_difference_percent: 2\nvalidation_policies:\n  auto_approve_confidence_threshold: 0.95\n  invalid_currency_action: reject\n  missing_field_action: flag\n  total_mismatch_action: manual_review\n\n2. **INVOICE DATA TO VALIDATE:**\nHafenLogistik GmbH\nAm Kai 55, Hamburg, Deutschland\nRechnungsnummer: RE-2025-004\nRechnungsdatum: 02.05.2025\nBestellnummer: PO-1004\n-------------------------------------------------\nArtikelcode | Beschreibung | Menge | Preis | Gesamt\n-------------------------------------------------\nSKU-301 | Transportkisten | 40 | 25.00€| 1000.00€\nSKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€\n-------------------------------------------------\nZwischensumme: 1600.00€\nMwSt (10%): 160.00€\nGesamtbetrag: 1760.00€\n-------------------------------------------------\n\nAnalyze the data and produce the JSON response.\n'}], api_base='http://localhost:11434', temperature=0.0)[0m
2025-12-07 22:39:39,961 - LiteLLM - DEBUG - 

2025-12-07 22:39:39,961 - LiteLLM - DEBUG - self.optional_params: {}
2025-12-07 22:39:39,962 - LiteLLM - DEBUG - SYNC kwargs[caching]: False; litellm.cache: None; kwargs.get('cache')['no-cache']: False
2025-12-07 22:39:39,962 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 22:39:39,963 - LiteLLM - DEBUG - 
LiteLLM: Params passed to completion() {'functions': None, 'function_call': None, 'temperature': 0.0, 'top_p': None, 'stream': None, 'stream_options': None, 'stop': None, 'max_tokens': None, 'max_completion_tokens': None, 'modalities': None, 'prediction': None, 'audio': None, 'presence_penalty': None, 'frequency_penalty': None, 'logit_bias': None, 'user': None, 'response_format': None, 'seed': None, 'tools': None, 'tool_choice': None, 'max_retries': None, 'logprobs': None, 'top_logprobs': None, 'extra_headers': None, 'api_version': None, 'parallel_tool_calls': None, 'allowed_openai_params': None, 'reasoning_effort': None, 'verbosity': None, 'additional_drop_params': None, 'messages': [{'role': 'system', 'content': "\n    You are an expert Invoice Validation Agent. Your task is to check the provided invoice data against the given rules and calculations.\n    **RULES & INSTRUCTIONS:**\n    1. **Completeness Check:** \n        - Check that all fields listed in `required_fields` from the YAML\n        - If po_number, invoice_date, invoice_id are mosssing, mark as 'High' severity.\n        - for currency field, extract from the amounts provided on the invoice \n        - Ignore non `required_fields` for completeness check\n    2. **Consistency Check:** Analyze the data fields for any non-compliance with the rules, and check the context for any obvious inconsistencies (e.g., date of invoice is in the future).\n    3. **Severity:** Use 'High' for critical errors (calculation, forbidden currency), 'Medium' for required but missing fields, and 'Low' for minor inconsistencies.\n    4. keep unicode characters as it is without any changes especially currency symbols\n    5. map currency symbols with currency_symbol_map in YAML rules and then validate against accepted_currencies in YAML rules\n    7. return JSON: {validation_results: {data_valid : True/False, completeness_ok : True/False},  issues: [{field, severity, message}] Return pure JSON only.\n    8. Only output the JSON object. Do NOT include any explanatory text, markdown formatting.\n    "}, {'role': 'user', 'content': '**DATA CONTEXT:**\n1. **YAML Validation Rules:**\naccepted_currencies:\n- USD\n- EUR\n- INR\n- GBP\ncurrency_symbol_map:\n  $: USD\n  "\\xA3": GBP\n  "\\u20AC": EUR\n  "\\u20B9": INR\ndata_types:\n  currency: str\n  invoice_date: date\n  invoice_no: str\n  po_number: str\n  qty: float\n  total: float\n  total_amount: float\n  unit_price: float\n  vendor_id: str\nlogging:\n  enable_audit_log: true\n  log_file: ./logs/invoice_auditor.log\n  log_level: INFO\nreporting:\n  include_discrepancy_summary: true\n  include_translation_confidence: true\n  output_dir: ./outputs/reports\n  report_format: HTML\nrequired_fields:\n  header:\n  - invoice_no\n  - invoice_date\n  - po_number\n  - vendor_id\n  - currency\n  - total_amount\n  line_item:\n  - item_code\n  - description\n  - qty\n  - unit_price\n  - total\ntolerances:\n  price_difference_percent: 5\n  quantity_difference_percent: 0\n  tax_difference_percent: 2\nvalidation_policies:\n  auto_approve_confidence_threshold: 0.95\n  invalid_currency_action: reject\n  missing_field_action: flag\n  total_mismatch_action: manual_review\n\n2. **INVOICE DATA TO VALIDATE:**\nHafenLogistik GmbH\nAm Kai 55, Hamburg, Deutschland\nRechnungsnummer: RE-2025-004\nRechnungsdatum: 02.05.2025\nBestellnummer: PO-1004\n-------------------------------------------------\nArtikelcode | Beschreibung | Menge | Preis | Gesamt\n-------------------------------------------------\nSKU-301 | Transportkisten | 40 | 25.00€| 1000.00€\nSKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€\n-------------------------------------------------\nZwischensumme: 1600.00€\nMwSt (10%): 160.00€\nGesamtbetrag: 1760.00€\n-------------------------------------------------\n\nAnalyze the data and produce the JSON response.\n'}], 'thinking': None, 'web_search_options': None, 'safety_identifier': None, 'custom_llm_provider': 'ollama', 'drop_params': None, 'model': 'mistral:7b-instruct', 'n': None, 'service_tier': None}
2025-12-07 22:39:39,965 - LiteLLM - DEBUG - 
LiteLLM: Non-Default params passed to completion() {'temperature': 0.0}
2025-12-07 22:39:39,965 - LiteLLM - DEBUG - Final returned optional params: {'temperature': 0.0}
2025-12-07 22:39:39,966 - LiteLLM - DEBUG - self.optional_params: {'temperature': 0.0}
2025-12-07 22:39:39,966 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:39:39,999 - LiteLLM - DEBUG - [92m

POST Request Sent from LiteLLM:
curl -X POST \
http://localhost:11434/api/generate \
-d '{'model': 'mistral:7b-instruct', 'prompt': '### System:\n\n    You are an expert Invoice Validation Agent. Your task is to check the provided invoice data against the given rules and calculations.\n    **RULES & INSTRUCTIONS:**\n    1. **Completeness Check:** \n        - Check that all fields listed in `required_fields` from the YAML\n        - If po_number, invoice_date, invoice_id are mosssing, mark as \'High\' severity.\n        - for currency field, extract from the amounts provided on the invoice \n        - Ignore non `required_fields` for completeness check\n    2. **Consistency Check:** Analyze the data fields for any non-compliance with the rules, and check the context for any obvious inconsistencies (e.g., date of invoice is in the future).\n    3. **Severity:** Use \'High\' for critical errors (calculation, forbidden currency), \'Medium\' for required but missing fields, and \'Low\' for minor inconsistencies.\n    4. keep unicode characters as it is without any changes especially currency symbols\n    5. map currency symbols with currency_symbol_map in YAML rules and then validate against accepted_currencies in YAML rules\n    7. return JSON: {validation_results: {data_valid : True/False, completeness_ok : True/False},  issues: [{field, severity, message}] Return pure JSON only.\n    8. Only output the JSON object. Do NOT include any explanatory text, markdown formatting.\n    \n\n### User:\n**DATA CONTEXT:**\n1. **YAML Validation Rules:**\naccepted_currencies:\n- USD\n- EUR\n- INR\n- GBP\ncurrency_symbol_map:\n  $: USD\n  "\\xA3": GBP\n  "\\u20AC": EUR\n  "\\u20B9": INR\ndata_types:\n  currency: str\n  invoice_date: date\n  invoice_no: str\n  po_number: str\n  qty: float\n  total: float\n  total_amount: float\n  unit_price: float\n  vendor_id: str\nlogging:\n  enable_audit_log: true\n  log_file: ./logs/invoice_auditor.log\n  log_level: INFO\nreporting:\n  include_discrepancy_summary: true\n  include_translation_confidence: true\n  output_dir: ./outputs/reports\n  report_format: HTML\nrequired_fields:\n  header:\n  - invoice_no\n  - invoice_date\n  - po_number\n  - vendor_id\n  - currency\n  - total_amount\n  line_item:\n  - item_code\n  - description\n  - qty\n  - unit_price\n  - total\ntolerances:\n  price_difference_percent: 5\n  quantity_difference_percent: 0\n  tax_difference_percent: 2\nvalidation_policies:\n  auto_approve_confidence_threshold: 0.95\n  invalid_currency_action: reject\n  missing_field_action: flag\n  total_mismatch_action: manual_review\n\n2. **INVOICE DATA TO VALIDATE:**\nHafenLogistik GmbH\nAm Kai 55, Hamburg, Deutschland\nRechnungsnummer: RE-2025-004\nRechnungsdatum: 02.05.2025\nBestellnummer: PO-1004\n-------------------------------------------------\nArtikelcode | Beschreibung | Menge | Preis | Gesamt\n-------------------------------------------------\nSKU-301 | Transportkisten | 40 | 25.00€| 1000.00€\nSKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€\n-------------------------------------------------\nZwischensumme: 1600.00€\nMwSt (10%): 160.00€\nGesamtbetrag: 1760.00€\n-------------------------------------------------\n\nAnalyze the data and produce the JSON response.\n\n\n', 'options': {'temperature': 0.0}, 'stream': False, 'images': []}'
[0m

2025-12-07 22:41:32,830 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 22:41:32,831 - LiteLLM - DEBUG - selected model name for cost calculation: ollama/mistral:7b-instruct
2025-12-07 22:41:32,831 - LiteLLM - DEBUG - Logging Details LiteLLM-Success Call: Cache_hit=None
2025-12-07 22:41:32,832 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:41:32,832 - LiteLLM - DEBUG - selected model name for cost calculation: ollama/mistral:7b-instruct
2025-12-07 22:41:32,833 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:41:32,871 - LiteLLM - DEBUG - Returned custom cost for model=ollama/mistral:7b-instruct - prompt_tokens_cost_usd_dollar: 0, completion_tokens_cost_usd_dollar: 0
2025-12-07 22:41:32,871 - LiteLLM - DEBUG - response_cost: 0.0
2025-12-07 22:41:32,872 - LiteLLM - DEBUG - Returned custom cost for model=ollama/mistral:7b-instruct - prompt_tokens_cost_usd_dollar: 0, completion_tokens_cost_usd_dollar: 0
2025-12-07 22:41:32,872 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:41:32,873 - LiteLLM - DEBUG - response_cost: 0.0
2025-12-07 22:41:32,873 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": false,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "total",
      "severity": "Medium",
      "message": "Total does not match the sum of line items total"
    },
    {
      "field": "currency",
      "severity": "High",
      "message": "Invoice currency is EUR, which is not in the accepted currencies list"
    }
  ]
}
2025-12-07 22:41:32,874 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': False, 'completeness_ok': True}, 'issues': [{'field': 'total', 'severity': 'Medium', 'message': 'Total does not match the sum of line items total'}, {'field': 'currency', 'severity': 'High', 'message': 'Invoice currency is EUR, which is not in the accepted currencies list'}]}
2025-12-07 22:41:32,874 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': False, 'completeness_ok': True}
2025-12-07 22:41:32,875 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-07 22:41:32,898 - LiteLLM - DEBUG - model_info: {'key': 'mistral:7b-instruct', 'litellm_provider': 'ollama', 'mode': 'chat', 'supports_function_calling': True, 'input_cost_per_token': 0.0, 'output_cost_per_token': 0.0, 'max_tokens': 32768, 'max_input_tokens': 32768, 'max_output_tokens': 32768}
2025-12-07 22:41:32,898 - LiteLLM - DEBUG - Logging Details LiteLLM-Success Call streaming complete
2025-12-07 22:41:32,899 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:41:32,932 - LiteLLM - DEBUG - model_info: {'key': 'mistral:7b-instruct', 'litellm_provider': 'ollama', 'mode': 'chat', 'supports_function_calling': True, 'input_cost_per_token': 0.0, 'output_cost_per_token': 0.0, 'max_tokens': 32768, 'max_input_tokens': 32768, 'max_output_tokens': 32768}
2025-12-07 22:50:35,438 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-07 22:50:35,497 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-07 22:50:35,924 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-07 22:50:35,925 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-07 22:50:35,936 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 22:52:01,255 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 22:52:01,333 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-07 22:52:01,340 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-07 22:52:01,341 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-07 22:52:01,345 - LiteLLM - DEBUG - 

2025-12-07 22:52:01,345 - LiteLLM - DEBUG - [92mRequest to litellm:[0m
2025-12-07 22:52:01,345 - LiteLLM - DEBUG - [92mlitellm.completion(model='ollama/mistral:7b-instruct', messages=[{'role': 'system', 'content': 'You are an invoice extraction assistant. Extract invoice fields as JSON: \n        invoice_number, po_number, date, vendor, vendor_id, currency, total, taxes, line_items (list of {item_code, description, qty, unit_price, total}). \n        if unable to extract any of the fileds, mark it as None.\n        return JSON: {structured_text} Return pure JSON only.'}, {'role': 'user', 'content': "input json: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}\n"}], api_base='http://localhost:11434', temperature=0.0)[0m
2025-12-07 22:52:01,346 - LiteLLM - DEBUG - 

2025-12-07 22:52:01,348 - LiteLLM - DEBUG - self.optional_params: {}
2025-12-07 22:52:01,350 - LiteLLM - DEBUG - SYNC kwargs[caching]: False; litellm.cache: None; kwargs.get('cache')['no-cache']: False
2025-12-07 22:52:01,357 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 22:52:01,357 - LiteLLM - DEBUG - 
LiteLLM: Params passed to completion() {'functions': None, 'function_call': None, 'temperature': 0.0, 'top_p': None, 'stream': None, 'stream_options': None, 'stop': None, 'max_tokens': None, 'max_completion_tokens': None, 'modalities': None, 'prediction': None, 'audio': None, 'presence_penalty': None, 'frequency_penalty': None, 'logit_bias': None, 'user': None, 'response_format': None, 'seed': None, 'tools': None, 'tool_choice': None, 'max_retries': None, 'logprobs': None, 'top_logprobs': None, 'extra_headers': None, 'api_version': None, 'parallel_tool_calls': None, 'allowed_openai_params': None, 'reasoning_effort': None, 'verbosity': None, 'additional_drop_params': None, 'messages': [{'role': 'system', 'content': 'You are an invoice extraction assistant. Extract invoice fields as JSON: \n        invoice_number, po_number, date, vendor, vendor_id, currency, total, taxes, line_items (list of {item_code, description, qty, unit_price, total}). \n        if unable to extract any of the fileds, mark it as None.\n        return JSON: {structured_text} Return pure JSON only.'}, {'role': 'user', 'content': "input json: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}\n"}], 'thinking': None, 'web_search_options': None, 'safety_identifier': None, 'custom_llm_provider': 'ollama', 'drop_params': None, 'model': 'mistral:7b-instruct', 'n': None, 'service_tier': None}
2025-12-07 22:52:01,357 - LiteLLM - DEBUG - 
LiteLLM: Non-Default params passed to completion() {'temperature': 0.0}
2025-12-07 22:52:01,357 - LiteLLM - DEBUG - Final returned optional params: {'temperature': 0.0}
2025-12-07 22:52:01,358 - LiteLLM - DEBUG - self.optional_params: {'temperature': 0.0}
2025-12-07 22:52:01,358 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:52:01,376 - LiteLLM - DEBUG - model_info: {'key': 'mistral:7b-instruct', 'litellm_provider': 'ollama', 'mode': 'chat', 'supports_function_calling': True, 'input_cost_per_token': 0.0, 'output_cost_per_token': 0.0, 'max_tokens': 32768, 'max_input_tokens': 32768, 'max_output_tokens': 32768}
2025-12-07 22:52:01,378 - LiteLLM - DEBUG - Logging Details LiteLLM-Success Call streaming complete
2025-12-07 22:52:01,378 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:52:01,386 - LiteLLM - DEBUG - [92m

POST Request Sent from LiteLLM:
curl -X POST \
http://localhost:11434/api/generate \
-d '{'model': 'mistral:7b-instruct', 'prompt': "### System:\nYou are an invoice extraction assistant. Extract invoice fields as JSON: \n        invoice_number, po_number, date, vendor, vendor_id, currency, total, taxes, line_items (list of {item_code, description, qty, unit_price, total}). \n        if unable to extract any of the fileds, mark it as None.\n        return JSON: {structured_text} Return pure JSON only.\n\n### User:\ninput json: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}\n\n\n", 'options': {'temperature': 0.0}, 'stream': False, 'images': []}'
[0m

2025-12-07 22:52:01,401 - LiteLLM - DEBUG - model_info: {'key': 'mistral:7b-instruct', 'litellm_provider': 'ollama', 'mode': 'chat', 'supports_function_calling': True, 'input_cost_per_token': 0.0, 'output_cost_per_token': 0.0, 'max_tokens': 32768, 'max_input_tokens': 32768, 'max_output_tokens': 32768}
2025-12-07 22:53:18,174 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 22:53:18,175 - LiteLLM - DEBUG - selected model name for cost calculation: ollama/mistral:7b-instruct
2025-12-07 22:53:18,175 - LiteLLM - DEBUG - Logging Details LiteLLM-Success Call: Cache_hit=None
2025-12-07 22:53:18,175 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:53:18,176 - LiteLLM - DEBUG - selected model name for cost calculation: ollama/mistral:7b-instruct
2025-12-07 22:53:18,177 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:53:18,201 - LiteLLM - DEBUG - Returned custom cost for model=ollama/mistral:7b-instruct - prompt_tokens_cost_usd_dollar: 0, completion_tokens_cost_usd_dollar: 0
2025-12-07 22:53:18,202 - LiteLLM - DEBUG - Returned custom cost for model=ollama/mistral:7b-instruct - prompt_tokens_cost_usd_dollar: 0, completion_tokens_cost_usd_dollar: 0
2025-12-07 22:53:18,202 - LiteLLM - DEBUG - response_cost: 0.0
2025-12-07 22:53:18,202 - LiteLLM - DEBUG - response_cost: 0.0
2025-12-07 22:53:18,203 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:53:18,203 - InvoiceAuditor - INFO - Node: translated raw response: {
  "invoice_number": "RE-2025-004",
  "po_number": "PO-1004",
  "date": "02.05.2025",
  "vendor": "HafenLogistik GmbH",
  "vendor_id": None,
  "currency": "€",
  "total": "1760.00€",
  "taxes": "VAT (10%): 160.00€",
  "line_items": [
    {
      "item_code": "SKU-301",
      "description": "Transportkisten",
      "qty": "40",
      "unit_price": "25.00€",
      "total": "1000.00€"
    },
    {
      "item_code": "SKU-302",
      "description": "Sicherheitswesten",
      "qty": "60",
      "unit_price": "10.00€",
      "total": "600.00€"
    }
  ]
}
2025-12-07 22:53:18,208 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: expected string or bytes-like object
2025-12-07 22:53:18,218 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-07 22:53:18,232 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-07 22:53:18,239 - LiteLLM - DEBUG - 

2025-12-07 22:53:18,240 - LiteLLM - DEBUG - model_info: {'key': 'mistral:7b-instruct', 'litellm_provider': 'ollama', 'mode': 'chat', 'supports_function_calling': True, 'input_cost_per_token': 0.0, 'output_cost_per_token': 0.0, 'max_tokens': 32768, 'max_input_tokens': 32768, 'max_output_tokens': 32768}
2025-12-07 22:53:18,240 - LiteLLM - DEBUG - [92mRequest to litellm:[0m
2025-12-07 22:53:18,241 - LiteLLM - DEBUG - Logging Details LiteLLM-Success Call streaming complete
2025-12-07 22:53:18,241 - LiteLLM - DEBUG - [92mlitellm.completion(model='ollama/mistral:7b-instruct', messages=[{'role': 'system', 'content': "\n    You are an expert Invoice Validation Agent. Your task is to check the provided invoice data against the given rules and calculations.\n    **RULES & INSTRUCTIONS:**\n    1. **Completeness Check:** \n        - Check that all fields listed in `required_fields` from the YAML\n        - If po_number, invoice_date, invoice_id are mosssing, mark as 'High' severity.\n        - for currency field, extract from the amounts provided on the invoice \n        - Ignore non `required_fields` for completeness check\n    2. **Consistency Check:** Analyze the data fields for any non-compliance with the rules, and check the context for any obvious inconsistencies (e.g., date of invoice is in the future).\n    3. **Severity:** Use 'High' for critical errors (calculation, forbidden currency), 'Medium' for required but missing fields, and 'Low' for minor inconsistencies.\n    4. keep unicode characters as it is without any changes especially currency symbols\n    5. map currency symbols with currency_symbol_map in YAML rules and then validate against accepted_currencies in YAML rules\n    7. return JSON: {validation_results: {data_valid : True/False, completeness_ok : True/False},  issues: [{field, severity, message}] Return pure JSON only.\n    8. Only output the JSON object. Do NOT include any explanatory text, markdown formatting.\n    "}, {'role': 'user', 'content': '**DATA CONTEXT:**\n1. **YAML Validation Rules:**\naccepted_currencies:\n- USD\n- EUR\n- INR\n- GBP\ncurrency_symbol_map:\n  $: USD\n  "\\xA3": GBP\n  "\\u20AC": EUR\n  "\\u20B9": INR\ndata_types:\n  currency: str\n  invoice_date: date\n  invoice_no: str\n  po_number: str\n  qty: float\n  total: float\n  total_amount: float\n  unit_price: float\n  vendor_id: str\nlogging:\n  enable_audit_log: true\n  log_file: ./logs/invoice_auditor.log\n  log_level: INFO\nreporting:\n  include_discrepancy_summary: true\n  include_translation_confidence: true\n  output_dir: ./outputs/reports\n  report_format: HTML\nrequired_fields:\n  header:\n  - invoice_no\n  - invoice_date\n  - po_number\n  - vendor_id\n  - currency\n  - total_amount\n  line_item:\n  - item_code\n  - description\n  - qty\n  - unit_price\n  - total\ntolerances:\n  price_difference_percent: 5\n  quantity_difference_percent: 0\n  tax_difference_percent: 2\nvalidation_policies:\n  auto_approve_confidence_threshold: 0.95\n  invalid_currency_action: reject\n  missing_field_action: flag\n  total_mismatch_action: manual_review\n\n2. **INVOICE DATA TO VALIDATE:**\nHafenLogistik GmbH\nAm Kai 55, Hamburg, Deutschland\nRechnungsnummer: RE-2025-004\nRechnungsdatum: 02.05.2025\nBestellnummer: PO-1004\n-------------------------------------------------\nArtikelcode | Beschreibung | Menge | Preis | Gesamt\n-------------------------------------------------\nSKU-301 | Transportkisten | 40 | 25.00€| 1000.00€\nSKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€\n-------------------------------------------------\nZwischensumme: 1600.00€\nMwSt (10%): 160.00€\nGesamtbetrag: 1760.00€\n-------------------------------------------------\n\nAnalyze the data and produce the JSON response.\n'}], api_base='http://localhost:11434', temperature=0.0)[0m
2025-12-07 22:53:18,242 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:53:18,243 - LiteLLM - DEBUG - 

2025-12-07 22:53:18,243 - LiteLLM - DEBUG - self.optional_params: {}
2025-12-07 22:53:18,244 - LiteLLM - DEBUG - SYNC kwargs[caching]: False; litellm.cache: None; kwargs.get('cache')['no-cache']: False
2025-12-07 22:53:18,245 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 22:53:18,245 - LiteLLM - DEBUG - 
LiteLLM: Params passed to completion() {'functions': None, 'function_call': None, 'temperature': 0.0, 'top_p': None, 'stream': None, 'stream_options': None, 'stop': None, 'max_tokens': None, 'max_completion_tokens': None, 'modalities': None, 'prediction': None, 'audio': None, 'presence_penalty': None, 'frequency_penalty': None, 'logit_bias': None, 'user': None, 'response_format': None, 'seed': None, 'tools': None, 'tool_choice': None, 'max_retries': None, 'logprobs': None, 'top_logprobs': None, 'extra_headers': None, 'api_version': None, 'parallel_tool_calls': None, 'allowed_openai_params': None, 'reasoning_effort': None, 'verbosity': None, 'additional_drop_params': None, 'messages': [{'role': 'system', 'content': "\n    You are an expert Invoice Validation Agent. Your task is to check the provided invoice data against the given rules and calculations.\n    **RULES & INSTRUCTIONS:**\n    1. **Completeness Check:** \n        - Check that all fields listed in `required_fields` from the YAML\n        - If po_number, invoice_date, invoice_id are mosssing, mark as 'High' severity.\n        - for currency field, extract from the amounts provided on the invoice \n        - Ignore non `required_fields` for completeness check\n    2. **Consistency Check:** Analyze the data fields for any non-compliance with the rules, and check the context for any obvious inconsistencies (e.g., date of invoice is in the future).\n    3. **Severity:** Use 'High' for critical errors (calculation, forbidden currency), 'Medium' for required but missing fields, and 'Low' for minor inconsistencies.\n    4. keep unicode characters as it is without any changes especially currency symbols\n    5. map currency symbols with currency_symbol_map in YAML rules and then validate against accepted_currencies in YAML rules\n    7. return JSON: {validation_results: {data_valid : True/False, completeness_ok : True/False},  issues: [{field, severity, message}] Return pure JSON only.\n    8. Only output the JSON object. Do NOT include any explanatory text, markdown formatting.\n    "}, {'role': 'user', 'content': '**DATA CONTEXT:**\n1. **YAML Validation Rules:**\naccepted_currencies:\n- USD\n- EUR\n- INR\n- GBP\ncurrency_symbol_map:\n  $: USD\n  "\\xA3": GBP\n  "\\u20AC": EUR\n  "\\u20B9": INR\ndata_types:\n  currency: str\n  invoice_date: date\n  invoice_no: str\n  po_number: str\n  qty: float\n  total: float\n  total_amount: float\n  unit_price: float\n  vendor_id: str\nlogging:\n  enable_audit_log: true\n  log_file: ./logs/invoice_auditor.log\n  log_level: INFO\nreporting:\n  include_discrepancy_summary: true\n  include_translation_confidence: true\n  output_dir: ./outputs/reports\n  report_format: HTML\nrequired_fields:\n  header:\n  - invoice_no\n  - invoice_date\n  - po_number\n  - vendor_id\n  - currency\n  - total_amount\n  line_item:\n  - item_code\n  - description\n  - qty\n  - unit_price\n  - total\ntolerances:\n  price_difference_percent: 5\n  quantity_difference_percent: 0\n  tax_difference_percent: 2\nvalidation_policies:\n  auto_approve_confidence_threshold: 0.95\n  invalid_currency_action: reject\n  missing_field_action: flag\n  total_mismatch_action: manual_review\n\n2. **INVOICE DATA TO VALIDATE:**\nHafenLogistik GmbH\nAm Kai 55, Hamburg, Deutschland\nRechnungsnummer: RE-2025-004\nRechnungsdatum: 02.05.2025\nBestellnummer: PO-1004\n-------------------------------------------------\nArtikelcode | Beschreibung | Menge | Preis | Gesamt\n-------------------------------------------------\nSKU-301 | Transportkisten | 40 | 25.00€| 1000.00€\nSKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€\n-------------------------------------------------\nZwischensumme: 1600.00€\nMwSt (10%): 160.00€\nGesamtbetrag: 1760.00€\n-------------------------------------------------\n\nAnalyze the data and produce the JSON response.\n'}], 'thinking': None, 'web_search_options': None, 'safety_identifier': None, 'custom_llm_provider': 'ollama', 'drop_params': None, 'model': 'mistral:7b-instruct', 'n': None, 'service_tier': None}
2025-12-07 22:53:18,246 - LiteLLM - DEBUG - 
LiteLLM: Non-Default params passed to completion() {'temperature': 0.0}
2025-12-07 22:53:18,246 - LiteLLM - DEBUG - Final returned optional params: {'temperature': 0.0}
2025-12-07 22:53:18,247 - LiteLLM - DEBUG - self.optional_params: {'temperature': 0.0}
2025-12-07 22:53:18,247 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:53:18,275 - LiteLLM - DEBUG - model_info: {'key': 'mistral:7b-instruct', 'litellm_provider': 'ollama', 'mode': 'chat', 'supports_function_calling': True, 'input_cost_per_token': 0.0, 'output_cost_per_token': 0.0, 'max_tokens': 32768, 'max_input_tokens': 32768, 'max_output_tokens': 32768}
2025-12-07 22:53:18,286 - LiteLLM - DEBUG - [92m

POST Request Sent from LiteLLM:
curl -X POST \
http://localhost:11434/api/generate \
-d '{'model': 'mistral:7b-instruct', 'prompt': '### System:\n\n    You are an expert Invoice Validation Agent. Your task is to check the provided invoice data against the given rules and calculations.\n    **RULES & INSTRUCTIONS:**\n    1. **Completeness Check:** \n        - Check that all fields listed in `required_fields` from the YAML\n        - If po_number, invoice_date, invoice_id are mosssing, mark as \'High\' severity.\n        - for currency field, extract from the amounts provided on the invoice \n        - Ignore non `required_fields` for completeness check\n    2. **Consistency Check:** Analyze the data fields for any non-compliance with the rules, and check the context for any obvious inconsistencies (e.g., date of invoice is in the future).\n    3. **Severity:** Use \'High\' for critical errors (calculation, forbidden currency), \'Medium\' for required but missing fields, and \'Low\' for minor inconsistencies.\n    4. keep unicode characters as it is without any changes especially currency symbols\n    5. map currency symbols with currency_symbol_map in YAML rules and then validate against accepted_currencies in YAML rules\n    7. return JSON: {validation_results: {data_valid : True/False, completeness_ok : True/False},  issues: [{field, severity, message}] Return pure JSON only.\n    8. Only output the JSON object. Do NOT include any explanatory text, markdown formatting.\n    \n\n### User:\n**DATA CONTEXT:**\n1. **YAML Validation Rules:**\naccepted_currencies:\n- USD\n- EUR\n- INR\n- GBP\ncurrency_symbol_map:\n  $: USD\n  "\\xA3": GBP\n  "\\u20AC": EUR\n  "\\u20B9": INR\ndata_types:\n  currency: str\n  invoice_date: date\n  invoice_no: str\n  po_number: str\n  qty: float\n  total: float\n  total_amount: float\n  unit_price: float\n  vendor_id: str\nlogging:\n  enable_audit_log: true\n  log_file: ./logs/invoice_auditor.log\n  log_level: INFO\nreporting:\n  include_discrepancy_summary: true\n  include_translation_confidence: true\n  output_dir: ./outputs/reports\n  report_format: HTML\nrequired_fields:\n  header:\n  - invoice_no\n  - invoice_date\n  - po_number\n  - vendor_id\n  - currency\n  - total_amount\n  line_item:\n  - item_code\n  - description\n  - qty\n  - unit_price\n  - total\ntolerances:\n  price_difference_percent: 5\n  quantity_difference_percent: 0\n  tax_difference_percent: 2\nvalidation_policies:\n  auto_approve_confidence_threshold: 0.95\n  invalid_currency_action: reject\n  missing_field_action: flag\n  total_mismatch_action: manual_review\n\n2. **INVOICE DATA TO VALIDATE:**\nHafenLogistik GmbH\nAm Kai 55, Hamburg, Deutschland\nRechnungsnummer: RE-2025-004\nRechnungsdatum: 02.05.2025\nBestellnummer: PO-1004\n-------------------------------------------------\nArtikelcode | Beschreibung | Menge | Preis | Gesamt\n-------------------------------------------------\nSKU-301 | Transportkisten | 40 | 25.00€| 1000.00€\nSKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€\n-------------------------------------------------\nZwischensumme: 1600.00€\nMwSt (10%): 160.00€\nGesamtbetrag: 1760.00€\n-------------------------------------------------\n\nAnalyze the data and produce the JSON response.\n\n\n', 'options': {'temperature': 0.0}, 'stream': False, 'images': []}'
[0m

2025-12-07 22:55:00,710 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 22:55:00,712 - LiteLLM - DEBUG - selected model name for cost calculation: ollama/mistral:7b-instruct
2025-12-07 22:55:00,712 - LiteLLM - DEBUG - Logging Details LiteLLM-Success Call: Cache_hit=None
2025-12-07 22:55:00,713 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:55:00,713 - LiteLLM - DEBUG - selected model name for cost calculation: ollama/mistral:7b-instruct
2025-12-07 22:55:00,714 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:55:00,745 - LiteLLM - DEBUG - Returned custom cost for model=ollama/mistral:7b-instruct - prompt_tokens_cost_usd_dollar: 0, completion_tokens_cost_usd_dollar: 0
2025-12-07 22:55:00,746 - LiteLLM - DEBUG - Returned custom cost for model=ollama/mistral:7b-instruct - prompt_tokens_cost_usd_dollar: 0, completion_tokens_cost_usd_dollar: 0
2025-12-07 22:55:00,746 - LiteLLM - DEBUG - response_cost: 0.0
2025-12-07 22:55:00,747 - LiteLLM - DEBUG - response_cost: 0.0
2025-12-07 22:55:00,748 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": false,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "total",
      "severity": "Medium",
      "message": "Total does not match the sum of line items total"
    },
    {
      "field": "currency",
      "severity": "High",
      "message": "Invoice currency is EUR, which is not in the accepted currencies list"
    }
  ]
}
2025-12-07 22:55:00,748 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:55:00,748 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': False, 'completeness_ok': True}, 'issues': [{'field': 'total', 'severity': 'Medium', 'message': 'Total does not match the sum of line items total'}, {'field': 'currency', 'severity': 'High', 'message': 'Invoice currency is EUR, which is not in the accepted currencies list'}]}
2025-12-07 22:55:00,749 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': False, 'completeness_ok': True}
2025-12-07 22:55:00,752 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-07 22:55:00,787 - LiteLLM - DEBUG - model_info: {'key': 'mistral:7b-instruct', 'litellm_provider': 'ollama', 'mode': 'chat', 'supports_function_calling': True, 'input_cost_per_token': 0.0, 'output_cost_per_token': 0.0, 'max_tokens': 32768, 'max_input_tokens': 32768, 'max_output_tokens': 32768}
2025-12-07 22:55:00,787 - LiteLLM - DEBUG - Logging Details LiteLLM-Success Call streaming complete
2025-12-07 22:55:00,788 - LiteLLM - DEBUG - checking potential_model_names in litellm.model_cost: {'split_model': 'mistral:7b-instruct', 'combined_model_name': 'ollama/mistral:7b-instruct', 'stripped_model_name': 'mistral:7b-instruct', 'combined_stripped_model_name': 'ollama/mistral:7b-instruct', 'custom_llm_provider': 'ollama'}
2025-12-07 22:55:00,822 - LiteLLM - DEBUG - model_info: {'key': 'mistral:7b-instruct', 'litellm_provider': 'ollama', 'mode': 'chat', 'supports_function_calling': True, 'input_cost_per_token': 0.0, 'output_cost_per_token': 0.0, 'max_tokens': 32768, 'max_input_tokens': 32768, 'max_output_tokens': 32768}
2025-12-07 23:05:23,266 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-07 23:05:23,323 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-07 23:05:23,776 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-07 23:05:23,777 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-07 23:05:23,788 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 23:06:48,971 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 23:06:49,037 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-07 23:06:49,037 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-07 23:06:49,037 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-07 23:06:49,043 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 23:08:04,179 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 23:08:04,205 - InvoiceAuditor - INFO - Node: translated raw response: {
  "invoice_number": "RE-2025-004",
  "po_number": "PO-1004",
  "date": "02.05.2025",
  "vendor": "HafenLogistik GmbH",
  "vendor_id": None,
  "currency": "€",
  "total": "1760.00€",
  "taxes": "VAT (10%): 160.00€",
  "line_items": [
    {
      "item_code": "SKU-301",
      "description": "Transportkisten",
      "qty": "40",
      "unit_price": "25.00€",
      "total": "1000.00€"
    },
    {
      "item_code": "SKU-302",
      "description": "Sicherheitswesten",
      "qty": "60",
      "unit_price": "10.00€",
      "total": "600.00€"
    }
  ]
}
2025-12-07 23:08:04,206 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: expected string or bytes-like object
2025-12-07 23:08:04,208 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-07 23:08:04,228 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-07 23:08:04,236 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 23:09:52,769 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 23:09:52,800 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": false,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "total",
      "severity": "Medium",
      "message": "Total does not match the sum of line items total"
    },
    {
      "field": "currency",
      "severity": "High",
      "message": "Invoice currency is EUR, which is not in the accepted currencies list"
    }
  ]
}
2025-12-07 23:09:52,802 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': False, 'completeness_ok': True}, 'issues': [{'field': 'total', 'severity': 'Medium', 'message': 'Total does not match the sum of line items total'}, {'field': 'currency', 'severity': 'High', 'message': 'Invoice currency is EUR, which is not in the accepted currencies list'}]}
2025-12-07 23:09:52,802 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': False, 'completeness_ok': True}
2025-12-07 23:09:52,803 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': False, 'completeness_ok': True}
2025-12-07 23:09:52,804 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-07 23:21:26,661 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-07 23:21:26,719 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-07 23:21:27,135 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-07 23:21:27,136 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-07 23:21:27,147 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 23:22:58,654 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 23:22:58,720 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-07 23:22:58,720 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-07 23:22:58,723 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-07 23:22:58,728 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 23:24:12,982 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 23:24:13,022 - InvoiceAuditor - INFO - Node: translated raw response: {
  "invoice_number": "RE-2025-004",
  "po_number": "PO-1004",
  "date": "02.05.2025",
  "vendor": "HafenLogistik GmbH",
  "vendor_id": None,
  "currency": "€",
  "total": "1760.00€",
  "taxes": "VAT (10%): 160.00€",
  "line_items": [
    {
      "item_code": "SKU-301",
      "description": "Transportkisten",
      "qty": "40",
      "unit_price": "25.00€",
      "total": "1000.00€"
    },
    {
      "item_code": "SKU-302",
      "description": "Sicherheitswesten",
      "qty": "60",
      "unit_price": "10.00€",
      "total": "600.00€"
    }
  ]
}
2025-12-07 23:24:13,023 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: expected string or bytes-like object
2025-12-07 23:24:13,027 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-07 23:24:13,055 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-07 23:24:13,061 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 23:25:58,782 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 23:25:58,817 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": false,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "total",
      "severity": "Medium",
      "message": "Total does not match the sum of line items total"
    },
    {
      "field": "currency",
      "severity": "High",
      "message": "Invoice currency is EUR, which is not in the accepted currencies list"
    }
  ]
}
2025-12-07 23:25:58,818 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': False, 'completeness_ok': True}, 'issues': [{'field': 'total', 'severity': 'Medium', 'message': 'Total does not match the sum of line items total'}, {'field': 'currency', 'severity': 'High', 'message': 'Invoice currency is EUR, which is not in the accepted currencies list'}]}
2025-12-07 23:25:58,819 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': False, 'completeness_ok': True}
2025-12-07 23:25:58,820 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': False, 'completeness_ok': True}
2025-12-07 23:25:58,822 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-07 23:39:22,835 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-07 23:39:22,885 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-07 23:39:23,302 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-07 23:39:23,302 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-07 23:39:23,313 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 23:40:49,047 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 23:40:49,103 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-07 23:40:49,103 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-07 23:40:49,106 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-07 23:40:49,109 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-07 23:42:11,060 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-07 23:42:11,097 - InvoiceAuditor - INFO - Node: translated raw response: {
  "invoice_number": "RE-2025-004",
  "po_number": "PO-1004",
  "date": "02.05.2025",
  "vendor": "HafenLogistik GmbH",
  "vendor_id": None,
  "currency": "€",
  "total": "1760.00€",
  "taxes": {
    "VAT (10%)": "160.00€"
  },
  "line_items": [
    {
      "item_code": "SKU-301",
      "description": "Transportkisten",
      "qty": "40",
      "unit_price": "25.00€",
      "total": "1000.00€"
    },
    {
      "item_code": "SKU-302",
      "description": "Sicherheitswesten",
      "qty": "60",
      "unit_price": "10.00€",
      "total": "600.00€"
    }
  ],
  "subtotal": "1600.00€"
}
2025-12-07 23:42:11,099 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: expected string or bytes-like object
2025-12-07 23:59:48,263 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-07 23:59:48,321 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-07 23:59:48,757 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-07 23:59:48,758 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-07 23:59:48,769 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 00:01:18,980 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 00:01:19,040 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-08 00:01:19,042 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-08 00:01:19,042 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-08 00:01:19,050 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 00:02:39,231 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 00:02:39,268 - InvoiceAuditor - INFO - Node: translated raw response: {
  "invoice_number": "RE-2025-004",
  "po_number": "PO-1004",
  "date": "02.05.2025",
  "vendor": "HafenLogistik GmbH",
  "vendor_id": None,
  "currency": "€",
  "total": "1760.00€",
  "taxes": {
    "VAT (10%)": "160.00€"
  },
  "line_items": [
    {
      "item_code": "SKU-301",
      "description": "Transportkisten",
      "qty": "40",
      "unit_price": "25.00€",
      "total": "1000.00€"
    },
    {
      "item_code": "SKU-302",
      "description": "Sicherheitswesten",
      "qty": "60",
      "unit_price": "10.00€",
      "total": "600.00€"
    }
  ],
  "subtotal": "1600.00€"
}
2025-12-08 00:02:39,269 - InvoiceAuditor - ERROR - Structured text extraction via LiteLLM: Expecting value: line 6 column 16 (char 136)
2025-12-08 00:02:39,271 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: expected string or bytes-like object
2025-12-08 00:02:39,278 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-08 00:02:39,304 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{}
2025-12-08 00:02:39,310 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 00:04:40,025 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 00:04:40,056 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": false,
    "completeness_ok": false
  },
  "issues": [
    {
      "field": "po_number",
      "severity": "High",
      "message": "PO number is missing"
    },
    {
      "field": "invoice_date",
      "severity": "High",
      "message": "Invoice date is missing"
    },
    {
      "field": "invoice_no",
      "severity": "Medium",
      "message": "Invoice number is not provided in the required fields"
    },
    {
      "field": "invoice_id",
      "severity": "Medium",
      "message": "Invoice ID is not provided in the required fields"
    },
    {
      "field": "currency",
      "severity": "High",
      "message": "Currency is missing"
    },
    {
      "field": "total_amount",
      "severity": "High",
      "message": "Total amount is not provided in the required fields"
    }
  ]
}
2025-12-08 00:04:40,057 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': False, 'completeness_ok': False}, 'issues': [{'field': 'po_number', 'severity': 'High', 'message': 'PO number is missing'}, {'field': 'invoice_date', 'severity': 'High', 'message': 'Invoice date is missing'}, {'field': 'invoice_no', 'severity': 'Medium', 'message': 'Invoice number is not provided in the required fields'}, {'field': 'invoice_id', 'severity': 'Medium', 'message': 'Invoice ID is not provided in the required fields'}, {'field': 'currency', 'severity': 'High', 'message': 'Currency is missing'}, {'field': 'total_amount', 'severity': 'High', 'message': 'Total amount is not provided in the required fields'}]}
2025-12-08 00:04:40,057 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': False, 'completeness_ok': False}
2025-12-08 00:04:40,058 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': False, 'completeness_ok': False}
2025-12-08 00:09:32,977 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-08 00:09:33,032 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-08 00:09:33,451 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-08 00:09:33,452 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-08 00:09:33,463 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 00:10:52,427 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 00:10:52,463 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-08 00:10:52,464 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-08 00:10:52,464 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-08 00:10:52,466 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 00:12:52,819 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 00:12:52,874 - InvoiceAuditor - INFO - Node: translated raw response: {
  "invoice_number": "RE-2025-004",
  "po_number": "PO-1004",
  "date": "02.05.2025",
  "vendor": "HafenLogistik GmbH",
  "vendor_id": **"None"",
  "currency": "€",
  "total": "1760.00€",
  "taxes": "160.00€",
  "line_items": [
    {
      "item_code": "SKU-301",
      "description": "Transportkisten",
      "qty": "40",
      "unit_price": "25.00€",
      "total": "1000.00€"
    },
    {
      "item_code": "SKU-302",
      "description": "Sicherheitswesten",
      "qty": "60",
      "unit_price": "10.00€",
      "total": "600.00€"
    }
  ],
  "subtotal": **"None"",
  "vat (10%)": "160.00€"
}
2025-12-08 00:12:52,875 - InvoiceAuditor - ERROR - Structured text extraction via LiteLLM: Expecting value: line 6 column 16 (char 136)
2025-12-08 00:12:52,877 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: expected string or bytes-like object
2025-12-08 00:12:52,883 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-08 00:12:52,902 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{}
2025-12-08 00:12:52,911 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 00:15:45,252 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-08 00:15:45,339 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-08 00:15:45,947 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-08 00:15:45,948 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-08 00:15:45,970 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 00:18:16,664 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 00:18:16,744 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-08 00:18:16,744 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-08 00:18:16,745 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-08 00:18:16,746 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-08 00:18:16,748 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 00:20:39,479 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 00:20:39,541 - InvoiceAuditor - INFO - Node: translated raw response: {
  "invoice_number": "RE-2025-004",
  "po_number": "PO-1004",
  "date": "02.05.2025",
  "vendor": "HafenLogistik GmbH",
  "vendor_id": "None",
  "currency": "€",
  "total": "1760.00€",
  "taxes": "VAT (10%): 160.00€",
  "line_items": [
    {
      "item_code": "SKU-301",
      "description": "Transportkisten",
      "qty": "40",
      "unit_price": "25.00€",
      "total": "1000.00€"
    },
    {
      "item_code": "SKU-302",
      "description": "Sicherheitswesten",
      "qty": "60",
      "unit_price": "10.00€",
      "total": "600.00€"
    }
  ],
  "subtotal": "1600.00€"
}
2025-12-08 00:20:39,542 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': 'None', 'currency': '€', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}], 'subtotal': '1600.00€'}
2025-12-08 00:20:39,544 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-08 00:20:39,564 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': 'None', 'currency': '€', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}], 'subtotal': '1600.00€'}
2025-12-08 00:20:39,574 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 00:24:09,394 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 00:24:09,466 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The vendor ID 'None' is missing from the required fields."
    }
  ]
}
2025-12-08 00:24:09,467 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The vendor ID 'None' is missing from the required fields."}]}
2025-12-08 00:24:09,469 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-08 00:24:09,471 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-08 00:24:09,472 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-08 00:24:09,689 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-08 00:24:09,690 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-08 00:24:09,693 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 00:26:39,074 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 00:26:39,140 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0.0,
    "quantity_difference_percent": 0.0,
    "tax_difference_percent": 0.0
  },
  "discrepancies": [],
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The vendor ID in the invoice is not present in ERP data."
    }
  ]
}
2025-12-08 00:26:39,165 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: [{'field': 'vendor_id', 'severity': 'Medium', 'message': 'The vendor ID in the invoice is not present in ERP data.'}, {'field': 'vendor_id', 'severity': 'HIGH', 'message': 'Vendor None not found in ERP'}]
 {'price_difference_percent': 0.0, 'quantity_difference_percent': 0.0, 'tax_difference_percent': 0.0}
2025-12-08 07:49:53,781 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-08 07:49:53,840 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-08 07:49:54,257 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-08 07:49:54,258 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-08 07:49:54,270 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 07:51:23,040 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 07:51:23,098 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-08 07:51:23,098 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-08 07:51:23,098 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-08 07:51:23,099 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-08 07:51:23,101 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 07:52:37,881 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 07:52:37,921 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': 'None', 'currency': '€', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}], 'subtotal': '1600.00€'}
2025-12-08 07:52:37,922 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-08 07:52:37,933 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': 'None', 'currency': '€', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}], 'subtotal': '1600.00€'}
2025-12-08 07:52:37,943 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 07:54:14,487 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 07:54:14,538 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The vendor ID 'None' is missing from the required fields."
    }
  ]
}
2025-12-08 07:54:14,538 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The vendor ID 'None' is missing from the required fields."}]}
2025-12-08 07:54:14,540 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-08 07:54:14,541 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-08 07:54:14,542 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-08 07:54:14,571 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-08 07:54:14,572 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-08 07:54:14,573 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 07:55:26,274 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 07:55:26,302 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0.0,
    "quantity_difference_percent": 0.0,
    "tax_difference_percent": 0.0
  },
  "discrepancies": [],
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The vendor ID in the invoice is not present in ERP data."
    }
  ]
}
2025-12-08 07:55:26,302 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: [{'field': 'vendor_id', 'severity': 'Medium', 'message': 'The vendor ID in the invoice is not present in ERP data.'}, {'field': 'vendor_id', 'severity': 'MED', 'message': 'Vendor ID not provided in invoice'}]
 {'price_difference_percent': 0.0, 'quantity_difference_percent': 0.0, 'tax_difference_percent': 0.0}
2025-12-08 08:06:42,304 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-08 08:06:42,354 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-08 08:06:42,759 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-08 08:06:42,759 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-08 08:06:42,770 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 08:08:27,301 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 08:08:27,431 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-08 08:08:27,437 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-08 08:08:27,437 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-08 08:08:27,437 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-08 08:08:27,446 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 08:09:44,854 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 08:09:44,900 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': 'None', 'currency': '€', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}], 'subtotal': '1600.00€'}
2025-12-08 08:09:44,911 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-08 08:09:44,929 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': 'None', 'currency': '€', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}], 'subtotal': '1600.00€'}
2025-12-08 08:09:44,935 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 08:11:24,878 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 08:11:24,914 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The vendor ID 'None' is missing from the required fields."
    }
  ]
}
2025-12-08 08:11:24,916 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The vendor ID 'None' is missing from the required fields."}]}
2025-12-08 08:11:24,916 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-08 08:11:24,917 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-08 08:11:24,918 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-08 08:11:24,970 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-08 08:11:24,971 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-08 08:11:24,972 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 08:12:56,856 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 08:12:56,900 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0.0,
    "quantity_difference_percent": 0.0,
    "tax_difference_percent": 0.0
  },
  "discrepancies": [],
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The vendor ID in the invoice is not present in ERP data."
    }
  ]
}
2025-12-08 08:12:56,901 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: business_issues: [{'field': 'vendor_id', 'severity': 'Medium', 'message': 'The vendor ID in the invoice is not present in ERP data.'}]
 data_differences_against_erp:{'price_difference_percent': 0.0, 'quantity_difference_percent': 0.0, 'tax_difference_percent': 0.0}
 discrepancies_details: []
2025-12-08 11:03:34,226 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-08 11:03:34,281 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-08 11:03:34,699 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-08 11:03:34,699 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-08 11:03:34,712 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 11:05:14,449 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 11:05:14,551 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-08 11:05:14,552 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-08 11:05:14,560 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-08 11:05:14,561 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-08 11:05:14,587 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 11:06:39,855 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 11:06:39,906 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': 'None', 'currency': '€', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}], 'subtotal': '1600.00€'}
2025-12-08 11:06:39,950 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-08 11:06:39,981 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': 'None', 'currency': '€', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}], 'subtotal': '1600.00€'}
2025-12-08 11:06:39,983 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 11:08:26,760 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 11:08:26,815 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The vendor ID is missing in the invoice data."
    }
  ]
}
2025-12-08 11:08:26,817 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': 'The vendor ID is missing in the invoice data.'}]}
2025-12-08 11:08:26,817 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-08 11:08:26,818 - InvoiceAuditor - INFO - Validation Error: Validation LLM Error via LiteLLM: name 'rules_yaml_str' is not defined
2025-12-08 11:08:26,828 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {}
2025-12-08 11:21:05,475 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-08 11:21:05,535 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-08 11:21:05,980 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-08 11:21:05,981 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-08 11:21:05,992 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 11:24:30,869 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 11:24:31,120 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-08 11:24:31,120 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-08 11:24:31,120 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-08 11:24:31,121 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-08 11:24:31,163 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 11:29:51,924 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 11:29:52,289 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': 'None', 'currency': '€', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}], 'subtotal': '1600.00€'}
2025-12-08 11:29:52,441 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-08 11:29:52,651 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': 'None', 'currency': '€', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}], 'subtotal': '1600.00€'}
2025-12-08 11:29:52,980 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 11:38:05,770 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 11:38:06,951 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The vendor ID is missing in the invoice data."
    }
  ]
}
2025-12-08 11:38:06,987 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': 'The vendor ID is missing in the invoice data.'}]}
2025-12-08 11:38:07,006 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-08 11:38:07,100 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-08 11:38:07,233 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-08 11:38:08,810 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-08 11:38:08,832 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-08 11:38:08,987 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 11:44:07,112 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 11:44:07,428 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0.0,
    "quantity_difference_percent": 0.0,
    "tax_difference_percent": 0.0
  },
  "discrepancies": [],
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The vendor ID in the invoice is not present in ERP data."
    }
  ]
}
2025-12-08 11:44:07,440 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: business_issues: [{'field': 'vendor_id', 'severity': 'Medium', 'message': 'The vendor ID in the invoice is not present in ERP data.'}]
 data_differences_against_erp:{'price_difference_percent': 0.0, 'quantity_difference_percent': 0.0, 'tax_difference_percent': 0.0}
 discrepancies_details: []
2025-12-08 12:13:24,762 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-08 12:13:24,827 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-08 12:13:25,295 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-08 12:13:25,296 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-08 12:13:25,311 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 12:14:52,564 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 12:14:52,610 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-08 12:14:52,610 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-08 12:14:52,610 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-08 12:14:52,610 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-08 12:14:52,614 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 12:16:11,911 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 12:16:11,962 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': 'None', 'currency': '€', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}], 'subtotal': '1600.00€'}
2025-12-08 12:16:11,996 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-08 12:16:12,043 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': 'None', 'currency': '€', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}], 'subtotal': '1600.00€'}
2025-12-08 12:16:12,044 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 12:28:07,143 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 12:28:07,245 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The vendor ID 'None' is missing from the required fields."
    }
  ]
}
2025-12-08 12:28:07,258 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The vendor ID 'None' is missing from the required fields."}]}
2025-12-08 12:28:07,258 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-08 12:28:07,275 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-08 12:28:07,292 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-08 12:28:07,570 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-08 12:28:07,571 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-08 12:28:07,580 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 12:29:49,441 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 12:29:49,522 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0.0,
    "quantity_difference_percent": 0.0,
    "tax_difference_percent": 0.0
  },
  "discrepancies": [],
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The vendor ID in the invoice is not present in ERP data."
    }
  ]
}
2025-12-08 12:29:49,524 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: business_issues: [{'field': 'vendor_id', 'severity': 'Medium', 'message': 'The vendor ID in the invoice is not present in ERP data.'}]
 data_differences_against_erp:{'price_difference_percent': 0.0, 'quantity_difference_percent': 0.0, 'tax_difference_percent': 0.0}
 discrepancies_details: []
2025-12-08 12:29:49,540 - InvoiceAuditor - INFO - Node: report_agent | LLM call initiated
2025-12-08 12:29:49,550 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 12:31:25,830 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 12:31:25,942 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed Based on the provided rules, translation confidence, data differences against ERP, and discrepancies list, the recommendation can be generated as follows:

```json
{
  "Recommendation": "Approve"
}
```

Explanation:
- The translation confidence is 1.0, which is greater than or equal to the auto_approve_confidence_threshold of 0.95.
- There are no discrepancies found in the data differences against ERP and discrepancies list.
- The currency used in the data is USD (as per the currency symbol map), which is an accepted currency according to the rules.
- No total mismatch, price difference, quantity difference, or tax difference beyond tolerances.

Therefore, the recommendation is "Approve".
2025-12-08 12:31:25,950 - InvoiceAuditor - INFO - Report generation error: REport generationerror via LiteLLM: Expecting value: line 1 column 1 (char 0)
2025-12-08 12:51:02,977 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-08 12:51:03,108 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-08 12:51:04,151 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-08 12:51:04,153 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-08 12:51:04,216 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 12:58:09,211 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 12:58:09,654 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-08 12:58:09,665 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-08 12:58:09,682 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-08 12:58:09,700 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-08 12:58:09,765 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 13:01:57,381 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 13:01:57,625 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': 'None', 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-08 13:01:57,842 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-08 13:01:59,512 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': 'None', 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-08 13:01:59,572 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 13:09:01,272 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 13:09:01,521 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The vendor ID 'None' is missing from the required fields."
    }
  ]
}
2025-12-08 13:09:01,529 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The vendor ID 'None' is missing from the required fields."}]}
2025-12-08 13:09:01,544 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-08 13:09:01,601 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-08 13:09:01,664 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-08 13:09:02,707 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-08 13:09:02,718 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-08 13:09:02,760 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 13:13:50,825 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 13:13:51,215 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0.0,
    "quantity_difference_percent": 0.0,
    "tax_difference_percent": 0.0
  },
  "discrepancies": [],
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The vendor ID in the invoice does not match with ERP data."
    }
  ]
}
2025-12-08 13:13:51,288 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: business_issues: [{'field': 'vendor_id', 'severity': 'Medium', 'message': 'The vendor ID in the invoice does not match with ERP data.'}]
 data_differences_against_erp:{'price_difference_percent': 0.0, 'quantity_difference_percent': 0.0, 'tax_difference_percent': 0.0}
 discrepancies_details: []
2025-12-08 13:13:51,514 - InvoiceAuditor - INFO - Node: report_agent | LLM call initiated
2025-12-08 13:13:51,597 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 13:16:56,660 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 13:16:56,867 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "Recommendation": "Approve"
}
2025-12-08 13:16:56,886 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-08 13:34:10,667 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-08 13:34:10,729 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-08 13:34:11,171 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-08 13:34:11,172 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-08 13:34:11,183 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 13:35:36,429 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 13:35:36,475 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-08 13:35:36,475 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-08 13:35:36,475 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-08 13:35:36,477 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-08 13:35:36,479 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 13:36:52,377 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 13:36:52,404 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': 'None', 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-08 13:36:52,405 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-08 13:36:52,428 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': 'None', 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-08 13:36:52,429 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 13:38:28,932 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 13:38:28,972 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The vendor ID 'None' is missing from the required fields."
    }
  ]
}
2025-12-08 13:38:28,973 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The vendor ID 'None' is missing from the required fields."}]}
2025-12-08 13:38:28,974 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-08 13:38:28,974 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-08 13:38:28,976 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-08 13:42:38,904 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-08 13:42:38,963 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-08 13:42:39,399 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-08 13:42:39,400 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-08 13:42:39,411 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 13:43:54,613 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 13:43:54,639 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-08 13:43:54,640 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-08 13:43:54,640 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-08 13:43:54,641 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-08 13:43:54,642 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 13:45:19,387 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 13:45:19,438 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': 'None', 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-08 13:45:19,439 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-08 13:45:19,458 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': 'None', 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-08 13:45:19,459 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 13:47:20,691 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 13:47:20,744 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The vendor ID 'None' is missing from the required fields."
    }
  ]
}
2025-12-08 13:47:20,745 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The vendor ID 'None' is missing from the required fields."}]}
2025-12-08 13:47:20,747 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-08 13:47:20,747 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-08 13:47:20,749 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-08 13:52:46,068 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-08 13:52:46,127 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-08 13:52:46,550 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-08 13:52:46,550 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-08 13:52:46,561 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 13:54:08,395 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 13:54:08,458 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-08 13:54:08,458 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-08 13:54:08,459 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-08 13:54:08,459 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-08 13:54:08,462 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 13:55:36,672 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 13:55:36,711 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': 'None', 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-08 13:55:36,715 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-08 13:55:36,741 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': 'None', 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-08 13:55:36,742 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 13:57:37,478 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 13:57:37,535 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The vendor ID 'None' is missing from the required fields."
    }
  ]
}
2025-12-08 13:57:37,536 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The vendor ID 'None' is missing from the required fields."}]}
2025-12-08 13:57:37,536 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-08 13:57:37,539 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-08 13:57:37,541 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-08 13:57:37,593 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-08 13:57:37,594 - InvoiceAuditor - INFO - Node: business validation_agent | PO Record fetched:{'po_number': 'PO-1004', 'vendor_id': 'VEND-004', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': 40, 'unit_price': 25.0, 'currency': 'EUR'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': 60, 'unit_price': 10.0, 'currency': 'EUR'}]}
2025-12-08 13:57:37,594 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-08 13:57:37,595 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 13:59:12,355 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 13:59:12,411 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0.0,
    "quantity_difference_percent": 0.0,
    "tax_difference_percent": 0.0
  },
  "discrepancies": [],
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The vendor ID in the invoice does not match with ERP data."
    }
  ]
}
2025-12-08 13:59:12,412 - InvoiceAuditor - INFO - Node: business validation_agent | vendor_id in invoice:None
2025-12-08 13:59:12,414 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: business_issues: [{'field': 'vendor_id', 'severity': 'Medium', 'message': 'The vendor ID in the invoice does not match with ERP data.'}]
 data_differences_against_erp:{'price_difference_percent': 0.0, 'quantity_difference_percent': 0.0, 'tax_difference_percent': 0.0}
 discrepancies_details: []
2025-12-08 13:59:12,416 - InvoiceAuditor - INFO - Node: report_agent | LLM call initiated
2025-12-08 13:59:12,417 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 14:00:55,172 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 14:00:55,238 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "Recommendation": "Approved"
}
2025-12-08 14:00:55,240 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-08 14:14:36,571 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-08 14:14:36,629 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-08 14:14:37,056 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-08 14:14:37,057 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-08 14:14:37,068 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 14:15:59,046 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 14:15:59,093 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-08 14:15:59,093 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-08 14:15:59,094 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-08 14:15:59,094 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-08 14:15:59,097 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 14:17:13,450 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 14:17:13,486 - InvoiceAuditor - ERROR - Structured text extraction via LiteLLM: Expecting value: line 6 column 16 (char 136)
2025-12-08 14:17:13,488 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: expected string or bytes-like object
2025-12-08 14:17:13,494 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-08 14:17:13,509 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{}
2025-12-08 14:17:13,510 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 14:28:23,821 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-08 14:28:23,880 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-08 14:28:24,325 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-08 14:28:24,326 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-08 14:28:24,337 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 14:29:56,264 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 14:29:56,344 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-08 14:29:56,344 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-08 14:29:56,344 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-08 14:29:56,351 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-08 14:29:56,359 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 14:31:10,217 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 14:31:10,255 - InvoiceAuditor - ERROR - Structured text extraction via LiteLLM: Expecting value: line 6 column 16 (char 136)
2025-12-08 14:31:10,256 - InvoiceAuditor - ERROR - Translation LLM Error via LiteLLM: expected string or bytes-like object
2025-12-08 14:31:10,265 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-08 14:31:10,293 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{}
2025-12-08 14:31:10,295 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-08 14:33:12,908 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-08 14:33:12,952 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": false,
    "completeness_ok": false
  },
  "issues": [
    {
      "field": "po_number",
      "severity": "High",
      "message": "PO number is missing"
    },
    {
      "field": "invoice_date",
      "severity": "High",
      "message": "Invoice date is missing"
    },
    {
      "field": "invoice_no",
      "severity": "Medium",
      "message": "Invoice number is not provided in the required fields"
    },
    {
      "field": "invoice_id",
      "severity": "Medium",
      "message": "Invoice ID is not provided in the required fields"
    },
    {
      "field": "currency",
      "severity": "High",
      "message": "Currency is missing"
    },
    {
      "field": "total_amount",
      "severity": "High",
      "message": "Total amount is not provided in the required fields"
    }
  ]
}
2025-12-08 14:33:12,952 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': False, 'completeness_ok': False}, 'issues': [{'field': 'po_number', 'severity': 'High', 'message': 'PO number is missing'}, {'field': 'invoice_date', 'severity': 'High', 'message': 'Invoice date is missing'}, {'field': 'invoice_no', 'severity': 'Medium', 'message': 'Invoice number is not provided in the required fields'}, {'field': 'invoice_id', 'severity': 'Medium', 'message': 'Invoice ID is not provided in the required fields'}, {'field': 'currency', 'severity': 'High', 'message': 'Currency is missing'}, {'field': 'total_amount', 'severity': 'High', 'message': 'Total amount is not provided in the required fields'}]}
2025-12-08 14:33:12,954 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': False, 'completeness_ok': False}
2025-12-08 14:33:12,955 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': False, 'completeness_ok': False}
2025-12-09 20:03:07,740 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-09 20:03:07,805 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-09 20:03:08,298 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-09 20:03:08,299 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-09 20:03:08,312 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 20:04:35,260 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 20:04:35,303 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-09 20:04:35,303 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-09 20:04:35,303 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-09 20:04:35,303 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-09 20:04:35,305 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 20:05:47,489 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 20:05:47,530 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-09 20:05:47,531 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-09 20:05:47,548 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-09 20:05:47,549 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 20:07:20,166 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 20:07:20,192 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The field 'vendor_id' is required but missing in the invoice data."
    }
  ]
}
2025-12-09 20:07:20,192 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}]}
2025-12-09 20:07:20,192 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-09 20:07:20,193 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-09 20:07:20,194 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-09 20:07:20,262 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-09 20:07:20,262 - InvoiceAuditor - INFO - Node: business validation_agent | PO Record fetched:{'po_number': 'PO-1004', 'vendor_id': 'VEND-004', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': 40, 'unit_price': 25.0, 'currency': 'EUR'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': 60, 'unit_price': 10.0, 'currency': 'EUR'}]}
2025-12-09 20:07:20,263 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-09 20:07:20,263 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 20:08:41,339 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 20:08:41,385 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0.0,
    "quantity_difference_percent": 0.0,
    "tax_difference_percent": 0.0
  },
  "discrepancies": [],
  "issues": []
}

Explanation:
- The invoice and ERP data match in terms of PO number, vendor (HafenLogistik GmbH), currency (Euro), total, taxes, and line items.
- For each line item, the quantity, unit price, and total are also consistent between the invoice and ERP data.
- Therefore, there are no discrepancies or issues to report. The JSON response indicates that all data matches perfectly.
2025-12-09 20:08:41,386 - InvoiceAuditor - INFO - Validation Error: Validation LLM Error via LiteLLM: Extra data: line 11 column 1 (char 183)
2025-12-09 20:08:41,388 - InvoiceAuditor - INFO - Node: business validation_agent | vendor_id in invoice:None
2025-12-09 20:08:41,388 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: business_issues: []
 data_differences_against_erp:{}
 discrepancies_details: []
2025-12-09 20:08:41,391 - InvoiceAuditor - INFO - Node: report_agent | LLM call initiated
2025-12-09 20:08:41,392 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 20:09:52,094 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 20:09:52,138 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "Recommendation": "Approved"
}
2025-12-09 20:09:52,145 - InvoiceAuditor - INFO - Report generation error: REport generationerror via LiteLLM: [Errno 20] Not a directory: '/Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf/INV_DE_004.meta.json'
2025-12-09 20:09:52,152 - InvoiceAuditor - INFO - Node: rag_indexing | Starting batch indexing from reports folder.
2025-12-09 20:09:52,153 - InvoiceAuditor - ERROR - Error processing file None: [Errno 2] No such file or directory: 'None'
2025-12-09 20:09:52,153 - InvoiceAuditor - WARNING - No valid reports found for indexing.
2025-12-09 20:22:17,051 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-09 20:22:17,115 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-09 20:22:17,602 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-09 20:22:17,602 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-09 20:22:17,614 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 20:23:54,536 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 20:23:54,588 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-09 20:23:54,589 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-09 20:23:54,589 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-09 20:23:54,590 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-09 20:23:54,594 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 20:25:09,727 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 20:25:09,773 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-09 20:25:09,781 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-09 20:25:09,810 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-09 20:25:09,811 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 20:26:45,642 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 20:26:45,674 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The field 'vendor_id' is required but missing in the invoice data."
    }
  ]
}
2025-12-09 20:26:45,675 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}]}
2025-12-09 20:26:45,676 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-09 20:26:45,683 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-09 20:26:45,690 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-09 20:26:45,763 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-09 20:26:45,765 - InvoiceAuditor - INFO - Node: business validation_agent | PO Record fetched:{'po_number': 'PO-1004', 'vendor_id': 'VEND-004', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': 40, 'unit_price': 25.0, 'currency': 'EUR'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': 60, 'unit_price': 10.0, 'currency': 'EUR'}]}
2025-12-09 20:26:45,766 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-09 20:26:45,767 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 20:28:02,961 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 20:28:03,010 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0.0,
    "quantity_difference_percent": 0.0,
    "tax_difference_percent": 0.0
  },
  "discrepancies": [],
  "issues": []
}

Explanation:
- The invoice and ERP data match in terms of PO number, vendor (HafenLogistik GmbH), currency (Euro), total, taxes, and line items.
- For each line item, the quantity, unit price, and total are also consistent between the invoice and ERP data.
- Therefore, there are no discrepancies or issues to report. The JSON response indicates that all data matches perfectly.
2025-12-09 20:28:03,011 - InvoiceAuditor - INFO - Validation Error: Validation LLM Error via LiteLLM: Extra data: line 11 column 1 (char 183)
2025-12-09 20:28:03,011 - InvoiceAuditor - INFO - Node: business validation_agent | vendor_id in invoice:None
2025-12-09 20:28:03,013 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: business_issues: []
 data_differences_against_erp:{}
 discrepancies_details: []
2025-12-09 20:28:03,017 - InvoiceAuditor - INFO - Node: report_agent | LLM call initiated
2025-12-09 20:28:03,018 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 20:29:11,715 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 20:29:11,808 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "Recommendation": "Approved"
}
2025-12-09 20:29:11,817 - InvoiceAuditor - INFO - Node: busiess_validation_agent | metadata file name /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.meta.json
2025-12-09 20:29:11,818 - InvoiceAuditor - INFO - Report generation error: REport generationerror via LiteLLM: the JSON object must be str, bytes or bytearray, not TextIOWrapper
2025-12-09 20:29:11,823 - InvoiceAuditor - INFO - Node: rag_indexing | Starting batch indexing from reports folder.
2025-12-09 20:29:11,824 - InvoiceAuditor - ERROR - Error processing file None: [Errno 2] No such file or directory: 'None'
2025-12-09 20:29:11,824 - InvoiceAuditor - WARNING - No valid reports found for indexing.
2025-12-09 20:55:25,723 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-09 20:55:25,783 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-09 20:55:26,265 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-09 20:55:26,266 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-09 20:55:26,277 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 20:56:47,329 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 20:56:47,382 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-09 20:56:47,383 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-09 20:56:47,383 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-09 20:56:47,383 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-09 20:56:47,384 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 20:58:00,440 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 20:58:00,489 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-09 20:58:00,492 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-09 20:58:00,522 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-09 20:58:00,523 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 21:26:55,969 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 21:26:56,037 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The field 'vendor_id' is required but missing in the invoice data."
    }
  ]
}
2025-12-09 21:26:56,037 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}]}
2025-12-09 21:26:56,038 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-09 21:26:56,043 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-09 21:26:56,053 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-09 21:26:56,113 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-09 21:26:56,114 - InvoiceAuditor - INFO - Node: business validation_agent | PO Record fetched:{'po_number': 'PO-1004', 'vendor_id': 'VEND-004', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': 40, 'unit_price': 25.0, 'currency': 'EUR'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': 60, 'unit_price': 10.0, 'currency': 'EUR'}]}
2025-12-09 21:26:56,114 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-09 21:26:56,120 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 21:28:08,377 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 21:28:08,422 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0.0,
    "quantity_difference_percent": 0.0,
    "tax_difference_percent": 0.0
  },
  "discrepancies": [],
  "issues": []
}

Explanation:
- The invoice and ERP data match in terms of PO number, vendor (HafenLogistik GmbH), currency (Euro), total, taxes, and line items.
- For each line item, the quantity, unit price, and total are also consistent between the invoice and ERP data.
- Therefore, there are no discrepancies or issues to report. The JSON response indicates that all data matches perfectly.
2025-12-09 21:28:08,425 - InvoiceAuditor - INFO - Validation Error: Validation LLM Error via LiteLLM: Extra data: line 11 column 1 (char 183)
2025-12-09 21:28:08,425 - InvoiceAuditor - INFO - Node: business validation_agent | vendor_id in invoice:None
2025-12-09 21:28:08,426 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: business_issues: []
 data_differences_against_erp:{}
 discrepancies_details: []
2025-12-09 21:28:08,430 - InvoiceAuditor - INFO - Node: report_agent | LLM call initiated
2025-12-09 21:28:08,432 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 21:29:11,789 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 21:29:11,819 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "Recommendation": "Approved"
}
2025-12-09 21:29:11,826 - InvoiceAuditor - INFO - Node: busiess_validation_agent | metadata file name /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.meta.json
2025-12-09 21:29:11,844 - InvoiceAuditor - INFO - Report generation error: REport generationerror via LiteLLM: the JSON object must be str, bytes or bytearray, not TextIOWrapper
2025-12-09 21:29:11,850 - InvoiceAuditor - INFO - Node: rag_indexing | Starting batch indexing from reports folder.
2025-12-09 21:29:11,850 - InvoiceAuditor - ERROR - Error processing file None: [Errno 2] No such file or directory: 'None'
2025-12-09 21:29:11,850 - InvoiceAuditor - WARNING - No valid reports found for indexing.
2025-12-09 21:56:38,324 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-09 21:56:38,387 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-09 21:56:38,865 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-09 21:56:38,866 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-09 21:56:38,877 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 21:58:03,692 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 21:58:03,738 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-09 21:58:03,740 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-09 21:58:03,741 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-09 21:58:03,741 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-09 21:58:03,742 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 21:59:16,657 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 21:59:16,690 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-09 21:59:16,691 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-09 21:59:16,722 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-09 21:59:16,724 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 22:01:04,684 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 22:01:04,736 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The field 'vendor_id' is required but missing in the invoice data."
    }
  ]
}
2025-12-09 22:01:04,736 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}]}
2025-12-09 22:01:04,738 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-09 22:01:04,739 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-09 22:01:04,740 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-09 22:01:04,780 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-09 22:01:04,781 - InvoiceAuditor - INFO - Node: business validation_agent | PO Record fetched:{'po_number': 'PO-1004', 'vendor_id': 'VEND-004', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': 40, 'unit_price': 25.0, 'currency': 'EUR'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': 60, 'unit_price': 10.0, 'currency': 'EUR'}]}
2025-12-09 22:01:04,781 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-09 22:01:04,782 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 22:02:35,897 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 22:02:35,930 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0.0,
    "quantity_difference_percent": 0.0,
    "tax_difference_percent": 0.0
  },
  "discrepancies": [],
  "issues": []
}

Explanation:
- The invoice and ERP data match in terms of PO number, vendor (HafenLogistik GmbH), currency (Euro), total, taxes, and line items.
- For each line item, the quantity, unit price, and total are also consistent between the invoice and ERP data.
- Therefore, there are no discrepancies or issues to report. The JSON response indicates that all data matches perfectly.
2025-12-09 22:02:35,930 - InvoiceAuditor - INFO - Validation Error: Validation LLM Error via LiteLLM: Extra data: line 11 column 1 (char 183)
2025-12-09 22:02:35,932 - InvoiceAuditor - INFO - Node: business validation_agent | vendor_id in invoice:None
2025-12-09 22:02:35,932 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: business_issues: []
 data_differences_against_erp:{}
 discrepancies_details: []
2025-12-09 22:02:35,933 - InvoiceAuditor - INFO - Node: report_agent | LLM call initiated
2025-12-09 22:02:35,934 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 22:03:46,740 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 22:03:46,781 - InvoiceAuditor - INFO - Node: reporting_agent | LLM call completed {
  "Recommendation": "Approved"
}
2025-12-09 22:03:46,783 - InvoiceAuditor - INFO - Node: busiess_validation_agent | metadata file name /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.meta.json
2025-12-09 22:03:46,801 - InvoiceAuditor - INFO - Report generationerror via LiteLLM: the JSON object must be str, bytes or bytearray, not TextIOWrapper
2025-12-09 22:03:46,802 - InvoiceAuditor - INFO - Node: rag_indexing | Starting batch indexing from reports folder.
2025-12-09 22:03:46,802 - InvoiceAuditor - ERROR - Error processing file None: [Errno 2] No such file or directory: 'None'
2025-12-09 22:03:46,802 - InvoiceAuditor - WARNING - No valid reports found for indexing.
2025-12-09 22:22:10,063 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-09 22:22:10,124 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-09 22:22:10,615 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-09 22:22:10,616 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-09 22:22:10,627 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 22:23:37,722 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 22:23:37,771 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-09 22:23:37,773 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-09 22:23:37,774 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-09 22:23:37,774 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-09 22:23:37,775 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 22:24:51,301 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 22:24:51,338 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-09 22:24:51,339 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-09 22:24:51,352 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-09 22:24:51,353 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 22:26:27,129 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 22:26:27,160 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The field 'vendor_id' is required but missing in the invoice data."
    }
  ]
}
2025-12-09 22:26:27,160 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}]}
2025-12-09 22:26:27,161 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-09 22:26:27,162 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-09 22:26:27,163 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-09 22:26:27,198 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-09 22:26:27,200 - InvoiceAuditor - INFO - Node: business validation_agent | PO Record fetched:{'po_number': 'PO-1004', 'vendor_id': 'VEND-004', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': 40, 'unit_price': 25.0, 'currency': 'EUR'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': 60, 'unit_price': 10.0, 'currency': 'EUR'}]}
2025-12-09 22:26:27,201 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-09 22:26:27,202 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 22:28:14,484 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 22:28:14,543 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0.0,
    "quantity_difference_percent": 0.0,
    "tax_difference_percent": 0.0
  },
  "discrepancies": [],
  "issues": []
}

Explanation:
- The invoice and ERP data match in terms of PO number, vendor (HafenLogistik GmbH), currency (Euro), total, taxes, and line items.
- For each line item, the quantity, unit price, and total are also consistent between the invoice and ERP data.
- Therefore, there are no discrepancies or issues to report. The JSON response indicates that all data matches perfectly.
2025-12-09 22:28:14,544 - InvoiceAuditor - INFO - Node: business validation_agent | eval_res invoice:{
  "data_differences": {
    "price_difference_percent": 0.0,
    "quantity_difference_percent": 0.0,
    "tax_difference_percent": 0.0
  },
  "discrepancies": [],
  "issues": []
}

Explanation:
- The invoice and ERP data match in terms of PO number, vendor (HafenLogistik GmbH), currency (Euro), total, taxes, and line items.
- For each line item, the quantity, unit price, and total are also consistent between the invoice and ERP data.
- Therefore, there are no discrepancies or issues to report. The JSON response indicates that all data matches perfectly.
2025-12-09 22:28:14,550 - InvoiceAuditor - ERROR - Validation Error: Validation LLM Error via LiteLLM: Extra data: line 11 column 1 (char 183)
2025-12-09 22:28:14,550 - InvoiceAuditor - INFO - Node: business validation_agent | vendor_id in invoice:None
2025-12-09 22:28:14,551 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: business_issues: []
 data_differences_against_erp:{}
 discrepancies_details: []
2025-12-09 22:28:14,561 - InvoiceAuditor - INFO - Node: report_agent | LLM call initiated
2025-12-09 22:28:14,566 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 22:29:47,523 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 22:29:47,618 - InvoiceAuditor - INFO - Node: reporting_agent | LLM call completed {
  "Recommendation": "Approved"
}
2025-12-09 22:29:47,634 - InvoiceAuditor - INFO - Node: busiess_validation_agent | metadata file name /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.meta.json
2025-12-09 22:29:47,645 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-09 22:29:47,648 - InvoiceAuditor - INFO - Node: rag_indexing | Starting batch indexing from reports folder.
2025-12-09 22:29:47,649 - InvoiceAuditor - ERROR - Error processing file INV_DE_004.json: the JSON object must be str, bytes or bytearray, not TextIOWrapper
2025-12-09 22:29:47,649 - InvoiceAuditor - WARNING - No valid reports found for indexing.
2025-12-09 22:52:00,214 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-09 22:52:00,274 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-09 22:52:00,752 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-09 22:52:00,753 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-09 22:52:00,764 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 22:53:45,528 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 22:53:45,623 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-09 22:53:45,623 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-09 22:53:45,626 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-09 22:53:45,627 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-09 22:53:45,632 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 22:55:07,190 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 22:55:07,239 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-09 22:55:07,280 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-09 22:55:07,335 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-09 22:55:07,338 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-09 22:56:48,045 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-09 22:56:48,080 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The field 'vendor_id' is required but missing in the invoice data."
    }
  ]
}
2025-12-09 22:56:48,080 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}]}
2025-12-09 22:56:48,084 - InvoiceAuditor - ERROR - Validation LLM Error via LiteLLM: the JSON object must be str, bytes or bytearray, not dict
2025-12-09 22:56:48,095 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {}
2025-12-10 05:52:58,849 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-10 05:52:58,926 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-10 05:52:59,467 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-10 05:52:59,468 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-10 05:52:59,480 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 05:54:41,469 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 05:54:41,553 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-10 05:54:41,553 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-10 05:54:41,559 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-10 05:54:41,560 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-10 05:54:41,563 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 05:56:02,344 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 05:56:02,370 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 05:56:02,375 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-10 05:56:02,401 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 05:56:02,402 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 05:57:43,612 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 05:57:43,661 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The field 'vendor_id' is required but missing in the invoice data."
    }
  ]
}
2025-12-10 05:57:43,663 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}]}
2025-12-10 05:57:43,664 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-10 05:57:43,665 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-10 05:57:43,667 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-10 05:57:43,758 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-10 05:57:43,759 - InvoiceAuditor - INFO - Node: business validation_agent | PO Record fetched:{'po_number': 'PO-1004', 'vendor_id': 'VEND-004', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': 40, 'unit_price': 25.0, 'currency': 'EUR'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': 60, 'unit_price': 10.0, 'currency': 'EUR'}]}
2025-12-10 05:57:43,760 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-10 05:57:43,761 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 05:58:50,243 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 05:58:50,292 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 05:58:50,292 - InvoiceAuditor - INFO - Node: business validation_agent | eval_res invoice:{
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 05:58:50,294 - InvoiceAuditor - INFO - Node: business validation_agent | data invoice:{'data_differences': {'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}, 'discrepancies': [], 'issues': []}
2025-12-10 05:58:50,294 - InvoiceAuditor - INFO - Node: business validation_agent | business_issues:[]
2025-12-10 05:58:50,294 - InvoiceAuditor - INFO - Node: business validation_agent | vendor_id in invoice:None
2025-12-10 05:58:50,294 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: business_issues: []
 data_differences_against_erp:{'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}
 discrepancies_details: []
2025-12-10 05:58:50,295 - InvoiceAuditor - INFO - Node: report_agent | LLM call initiated
2025-12-10 05:58:50,296 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 06:00:13,855 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 06:00:13,930 - InvoiceAuditor - INFO - Node: reporting_agent | LLM call completed {
  "Recommendation": "Approved"
}
2025-12-10 06:00:13,931 - InvoiceAuditor - INFO - Node: busiess_validation_agent | metadata file name /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.meta.json
2025-12-10 06:00:13,935 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-10 06:00:13,941 - InvoiceAuditor - INFO - Node: rag_indexing | Starting batch indexing from reports folder.
2025-12-10 06:00:13,942 - InvoiceAuditor - ERROR - Error processing file INV_DE_004.json: the JSON object must be str, bytes or bytearray, not TextIOWrapper
2025-12-10 06:00:13,942 - InvoiceAuditor - WARNING - No valid reports found for indexing.
2025-12-10 06:15:31,726 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-10 06:15:31,787 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-10 06:15:32,307 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-10 06:15:32,308 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-10 06:15:32,320 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 06:17:24,962 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 06:17:25,036 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-10 06:17:25,037 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-10 06:17:25,037 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-10 06:17:25,038 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-10 06:17:25,042 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 06:18:49,089 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 06:18:49,118 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 06:18:49,127 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-10 06:18:49,145 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 06:18:49,146 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 06:20:37,236 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 06:20:37,329 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The field 'vendor_id' is required but missing in the invoice data."
    }
  ]
}
2025-12-10 06:20:37,329 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}]}
2025-12-10 06:20:37,333 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-10 06:20:37,342 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-10 06:20:37,351 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-10 06:20:37,564 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-10 06:20:37,565 - InvoiceAuditor - INFO - Node: business validation_agent | PO Record fetched:{'po_number': 'PO-1004', 'vendor_id': 'VEND-004', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': 40, 'unit_price': 25.0, 'currency': 'EUR'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': 60, 'unit_price': 10.0, 'currency': 'EUR'}]}
2025-12-10 06:20:37,566 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-10 06:20:37,567 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 06:21:44,733 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 06:21:44,771 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 06:21:44,771 - InvoiceAuditor - INFO - Node: business validation_agent | eval_res invoice:{
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 06:21:44,772 - InvoiceAuditor - INFO - Node: business validation_agent | data invoice:{'data_differences': {'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}, 'discrepancies': [], 'issues': []}
2025-12-10 06:21:44,772 - InvoiceAuditor - INFO - Node: business validation_agent | business_issues:[]
2025-12-10 06:21:44,772 - InvoiceAuditor - INFO - Node: business validation_agent | vendor_id in invoice:None
2025-12-10 06:21:44,772 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: business_issues: []
 data_differences_against_erp:{'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}
 discrepancies_details: []
2025-12-10 06:21:44,775 - InvoiceAuditor - INFO - Node: report_agent | LLM call initiated
2025-12-10 06:21:44,776 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 06:23:23,898 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 06:23:23,962 - InvoiceAuditor - INFO - Node: reporting_agent | LLM call completed {
  "Recommendation": "Approved"
}
2025-12-10 06:23:23,970 - InvoiceAuditor - INFO - Node: busiess_validation_agent | metadata file name /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.meta.json
2025-12-10 06:23:23,978 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-10 06:23:23,994 - InvoiceAuditor - INFO - Node: rag_indexing | Starting batch indexing from reports folder.
2025-12-10 06:23:23,997 - InvoiceAuditor - ERROR - Error processing file INV_DE_004.json: the JSON object must be str, bytes or bytearray, not TextIOWrapper
2025-12-10 06:23:24,000 - InvoiceAuditor - WARNING - No valid reports found for indexing.
2025-12-10 06:41:20,080 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-10 06:41:20,141 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-10 06:41:20,652 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-10 06:41:20,652 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-10 06:41:20,665 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 06:42:53,556 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 06:42:53,638 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-10 06:42:53,639 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-10 06:42:53,640 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-10 06:42:53,640 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-10 06:42:53,649 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 06:44:13,657 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 06:44:13,684 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 06:44:13,694 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-10 06:44:13,717 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 06:44:13,718 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 06:45:55,415 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 06:45:55,456 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The field 'vendor_id' is required but missing in the invoice data."
    }
  ]
}
2025-12-10 06:45:55,456 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}]}
2025-12-10 06:45:55,458 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-10 06:45:55,460 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-10 06:45:55,463 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-10 06:45:55,516 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-10 06:45:55,517 - InvoiceAuditor - INFO - Node: business validation_agent | PO Record fetched:{'po_number': 'PO-1004', 'vendor_id': 'VEND-004', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': 40, 'unit_price': 25.0, 'currency': 'EUR'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': 60, 'unit_price': 10.0, 'currency': 'EUR'}]}
2025-12-10 06:45:55,517 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-10 06:45:55,518 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 06:47:01,371 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 06:47:01,422 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 06:47:01,423 - InvoiceAuditor - INFO - Node: business validation_agent | eval_res invoice:{
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 06:47:01,425 - InvoiceAuditor - INFO - Node: business validation_agent | data invoice:{'data_differences': {'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}, 'discrepancies': [], 'issues': []}
2025-12-10 06:47:01,427 - InvoiceAuditor - INFO - Node: business validation_agent | business_issues:[]
2025-12-10 06:47:01,427 - InvoiceAuditor - INFO - Node: business validation_agent | vendor_id in invoice:None
2025-12-10 06:47:01,427 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: business_issues: []
 data_differences_against_erp:{'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}
 discrepancies_details: []
2025-12-10 06:47:01,429 - InvoiceAuditor - INFO - Node: report_agent | LLM call initiated
2025-12-10 06:47:01,430 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 06:48:22,270 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 06:48:22,350 - InvoiceAuditor - INFO - Node: reporting_agent | LLM call completed {
  "Recommendation": "Approved"
}
2025-12-10 06:48:22,358 - InvoiceAuditor - INFO - Node: busiess_validation_agent | metadata file name /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.meta.json
2025-12-10 06:48:22,366 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-10 06:48:22,370 - InvoiceAuditor - INFO - Node: rag_indexing | Starting batch indexing from reports folder.
2025-12-10 06:48:22,370 - InvoiceAuditor - INFO - fNode: rag_indexing | report_path datadata/reports/INV_DE_004.json
2025-12-10 06:48:22,371 - InvoiceAuditor - ERROR - Error processing file INV_DE_004.json: the JSON object must be str, bytes or bytearray, not TextIOWrapper
2025-12-10 06:48:22,371 - InvoiceAuditor - WARNING - No valid reports found for indexing.
2025-12-10 07:10:29,387 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-10 07:10:29,450 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-10 07:10:29,964 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-10 07:10:29,965 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-10 07:10:29,977 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 07:12:08,483 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 07:12:08,527 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-10 07:12:08,529 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-10 07:12:08,533 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-10 07:12:08,534 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-10 07:12:08,536 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 07:13:31,318 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 07:13:31,362 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 07:13:31,367 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-10 07:13:31,384 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 07:13:31,385 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 07:15:12,897 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 07:15:12,923 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The field 'vendor_id' is required but missing in the invoice data."
    }
  ]
}
2025-12-10 07:15:12,923 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}]}
2025-12-10 07:15:12,925 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-10 07:15:12,925 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-10 07:15:12,926 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-10 07:15:12,971 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-10 07:15:12,971 - InvoiceAuditor - INFO - Node: business validation_agent | PO Record fetched:{'po_number': 'PO-1004', 'vendor_id': 'VEND-004', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': 40, 'unit_price': 25.0, 'currency': 'EUR'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': 60, 'unit_price': 10.0, 'currency': 'EUR'}]}
2025-12-10 07:15:12,971 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-10 07:15:12,973 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 07:16:23,252 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 07:16:23,293 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 07:16:23,293 - InvoiceAuditor - INFO - Node: business validation_agent | eval_res invoice:{
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 07:16:23,296 - InvoiceAuditor - INFO - Node: business validation_agent | data invoice:{'data_differences': {'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}, 'discrepancies': [], 'issues': []}
2025-12-10 07:16:23,297 - InvoiceAuditor - INFO - Node: business validation_agent | business_issues:[]
2025-12-10 07:16:23,297 - InvoiceAuditor - INFO - Node: business validation_agent | vendor_id in invoice:None
2025-12-10 07:16:23,297 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: business_issues: []
 data_differences_against_erp:{'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}
 discrepancies_details: []
2025-12-10 07:16:23,298 - InvoiceAuditor - INFO - Node: report_agent | LLM call initiated
2025-12-10 07:16:23,300 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 07:17:40,282 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 07:17:40,312 - InvoiceAuditor - INFO - Node: reporting_agent | LLM call completed {
  "Recommendation": "Approved"
}
2025-12-10 07:17:40,314 - InvoiceAuditor - INFO - Node: busiess_validation_agent | metadata file name /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.meta.json
2025-12-10 07:17:40,333 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-10 07:17:40,334 - InvoiceAuditor - INFO - Node: rag_indexing | Starting batch indexing from reports folder.
2025-12-10 07:17:40,334 - InvoiceAuditor - INFO - fNode: rag_indexing | report_path datadata/reports/INV_DE_004.json
2025-12-10 07:17:40,336 - InvoiceAuditor - INFO - fNode: rag_indexing | report data{'invoice_file': 'INV_DE_004.pdf', 'recommendation': 'Approved', 'translated_data': {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}, 'validation_issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}], 'business_validation_issues': [], 'discrepancies_details': [], 'translation_confidence': 1.0, 'meta_data': {'sender': 'rechnung@hafenlogistik.de', 'subject': 'Rechnung RE-2025-004 - Bestellung PO-1004', 'received_timestamp': '2025-05-02T11:00:00Z', 'language': 'de', 'attachments': ['INV_DE_004.docx']}}
2025-12-10 07:17:59,546 - InvoiceAuditor - INFO - Loaded 1 documents and split into 1 chunks.
2025-12-10 07:17:59,546 - InvoiceAuditor - ERROR - RAG Indexing/FAISS Error: OPENAI_API_KEY environment variable not set.
2025-12-10 10:08:05,098 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-10 10:08:05,162 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-10 10:08:05,538 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-10 10:08:05,539 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-10 10:08:05,553 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 10:09:43,236 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 10:09:43,323 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-10 10:09:43,323 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-10 10:09:43,324 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-10 10:09:43,324 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-10 10:09:43,326 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 10:11:03,491 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 10:11:03,534 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 10:11:03,537 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-10 10:11:03,557 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 10:11:03,559 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 10:12:50,504 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 10:12:50,536 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The field 'vendor_id' is required but missing in the invoice data."
    }
  ]
}
2025-12-10 10:12:50,537 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}]}
2025-12-10 10:12:50,537 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-10 10:12:50,538 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-10 10:12:50,541 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-10 10:12:50,618 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-10 10:12:50,621 - InvoiceAuditor - INFO - Node: business validation_agent | PO Record fetched:{'po_number': 'PO-1004', 'vendor_id': 'VEND-004', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': 40, 'unit_price': 25.0, 'currency': 'EUR'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': 60, 'unit_price': 10.0, 'currency': 'EUR'}]}
2025-12-10 10:12:50,621 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-10 10:12:50,622 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 10:13:59,164 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 10:13:59,190 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 10:13:59,190 - InvoiceAuditor - INFO - Node: business validation_agent | eval_res invoice:{
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 10:13:59,192 - InvoiceAuditor - INFO - Node: business validation_agent | data invoice:{'data_differences': {'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}, 'discrepancies': [], 'issues': []}
2025-12-10 10:13:59,192 - InvoiceAuditor - INFO - Node: business validation_agent | business_issues:[]
2025-12-10 10:13:59,193 - InvoiceAuditor - INFO - Node: business validation_agent | vendor_id in invoice:None
2025-12-10 10:13:59,193 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: business_issues: []
 data_differences_against_erp:{'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}
 discrepancies_details: []
2025-12-10 10:13:59,198 - InvoiceAuditor - INFO - Node: report_agent | LLM call initiated
2025-12-10 10:13:59,199 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 10:15:20,061 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 10:15:20,116 - InvoiceAuditor - INFO - Node: reporting_agent | LLM call completed {
  "Recommendation": "Approved"
}
2025-12-10 10:15:20,125 - InvoiceAuditor - INFO - Node: busiess_validation_agent | metadata file name /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.meta.json
2025-12-10 10:15:20,133 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-10 10:15:20,147 - InvoiceAuditor - INFO - Node: rag_indexing | Starting batch indexing from reports folder.
2025-12-10 10:15:20,150 - InvoiceAuditor - INFO - fNode: rag_indexing | report_path datadata/reports/INV_DE_004.json
2025-12-10 10:15:20,153 - InvoiceAuditor - INFO - fNode: rag_indexing | report data{'invoice_file': 'INV_DE_004.pdf', 'recommendation': 'Approved', 'translated_data': {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}, 'validation_issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}], 'business_validation_issues': [], 'discrepancies_details': [], 'translation_confidence': 1.0, 'meta_data': {'sender': 'rechnung@hafenlogistik.de', 'subject': 'Rechnung RE-2025-004 - Bestellung PO-1004', 'received_timestamp': '2025-05-02T11:00:00Z', 'language': 'de', 'attachments': ['INV_DE_004.docx']}}
2025-12-10 10:15:20,684 - InvoiceAuditor - INFO - Loaded 1 documents and split into 1 chunks.
2025-12-10 10:15:20,685 - InvoiceAuditor - ERROR - RAG Indexing/FAISS Error: '_Environ' object is not callable
2025-12-10 10:21:27,812 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-10 10:21:27,875 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-10 10:21:28,234 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-10 10:21:28,235 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-10 10:21:28,247 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 10:23:04,252 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 10:23:04,341 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-10 10:23:04,348 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-10 10:23:04,349 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-10 10:23:04,350 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-10 10:23:04,367 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 10:24:37,937 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 10:24:37,976 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 10:24:38,026 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-10 10:24:38,076 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 10:24:38,079 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 10:26:42,016 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 10:26:42,071 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The field 'vendor_id' is required but missing in the invoice data."
    }
  ]
}
2025-12-10 10:26:42,072 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}]}
2025-12-10 10:26:42,075 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-10 10:26:42,090 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-10 10:26:42,106 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-10 10:26:42,267 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-10 10:26:42,268 - InvoiceAuditor - INFO - Node: business validation_agent | PO Record fetched:{'po_number': 'PO-1004', 'vendor_id': 'VEND-004', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': 40, 'unit_price': 25.0, 'currency': 'EUR'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': 60, 'unit_price': 10.0, 'currency': 'EUR'}]}
2025-12-10 10:26:42,269 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-10 10:26:42,270 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 10:28:14,801 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 10:28:14,878 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 10:28:14,879 - InvoiceAuditor - INFO - Node: business validation_agent | eval_res invoice:{
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 10:28:14,880 - InvoiceAuditor - INFO - Node: business validation_agent | data invoice:{'data_differences': {'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}, 'discrepancies': [], 'issues': []}
2025-12-10 10:28:14,880 - InvoiceAuditor - INFO - Node: business validation_agent | business_issues:[]
2025-12-10 10:28:14,880 - InvoiceAuditor - INFO - Node: business validation_agent | vendor_id in invoice:None
2025-12-10 10:28:14,881 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: business_issues: []
 data_differences_against_erp:{'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}
 discrepancies_details: []
2025-12-10 10:28:14,887 - InvoiceAuditor - INFO - Node: report_agent | LLM call initiated
2025-12-10 10:28:14,894 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 10:30:09,559 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 10:30:09,618 - InvoiceAuditor - INFO - Node: reporting_agent | LLM call completed {
  "Recommendation": "Approved"
}
2025-12-10 10:30:09,635 - InvoiceAuditor - INFO - Node: busiess_validation_agent | metadata file name /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.meta.json
2025-12-10 10:30:09,646 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-10 10:30:09,652 - InvoiceAuditor - INFO - Node: rag_indexing | Starting batch indexing from reports folder.
2025-12-10 10:30:09,652 - InvoiceAuditor - INFO - fNode: rag_indexing | report_path datadata/reports/INV_DE_004.json
2025-12-10 10:30:09,653 - InvoiceAuditor - INFO - fNode: rag_indexing | report data{'invoice_file': 'INV_DE_004.pdf', 'recommendation': 'Approved', 'translated_data': {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}, 'validation_issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}], 'business_validation_issues': [], 'discrepancies_details': [], 'translation_confidence': 1.0, 'meta_data': {'sender': 'rechnung@hafenlogistik.de', 'subject': 'Rechnung RE-2025-004 - Bestellung PO-1004', 'received_timestamp': '2025-05-02T11:00:00Z', 'language': 'de', 'attachments': ['INV_DE_004.docx']}}
2025-12-10 10:30:10,226 - InvoiceAuditor - INFO - Loaded 1 documents and split into 1 chunks.
2025-12-10 10:30:10,227 - InvoiceAuditor - ERROR - RAG Indexing/FAISS Error: str expected, not tuple
2025-12-10 10:44:19,104 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-10 10:44:19,164 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-10 10:44:19,519 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-10 10:44:19,520 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-10 10:44:19,532 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 10:46:01,538 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 10:46:01,611 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-10 10:46:01,612 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-10 10:46:01,615 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-10 10:46:01,615 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-10 10:46:01,625 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 10:47:22,772 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 10:47:22,822 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 10:47:22,865 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-10 10:47:22,911 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 10:47:22,913 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 10:49:29,545 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 10:49:29,596 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The field 'vendor_id' is required but missing in the invoice data."
    }
  ]
}
2025-12-10 10:49:29,597 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}]}
2025-12-10 10:49:29,598 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-10 10:49:29,610 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-10 10:49:29,621 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-10 10:49:29,754 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-10 10:49:29,755 - InvoiceAuditor - INFO - Node: business validation_agent | PO Record fetched:{'po_number': 'PO-1004', 'vendor_id': 'VEND-004', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': 40, 'unit_price': 25.0, 'currency': 'EUR'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': 60, 'unit_price': 10.0, 'currency': 'EUR'}]}
2025-12-10 10:49:29,756 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-10 10:49:29,759 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 10:50:34,097 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 10:50:34,123 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 10:50:34,124 - InvoiceAuditor - INFO - Node: business validation_agent | eval_res invoice:{
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 10:50:34,126 - InvoiceAuditor - INFO - Node: business validation_agent | data invoice:{'data_differences': {'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}, 'discrepancies': [], 'issues': []}
2025-12-10 10:50:34,126 - InvoiceAuditor - INFO - Node: business validation_agent | business_issues:[]
2025-12-10 10:50:34,126 - InvoiceAuditor - INFO - Node: business validation_agent | vendor_id in invoice:None
2025-12-10 10:50:34,127 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: business_issues: []
 data_differences_against_erp:{'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}
 discrepancies_details: []
2025-12-10 10:50:34,131 - InvoiceAuditor - INFO - Node: report_agent | LLM call initiated
2025-12-10 10:50:34,132 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 10:51:44,733 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 10:51:44,779 - InvoiceAuditor - INFO - Node: reporting_agent | LLM call completed {
  "Recommendation": "Approved"
}
2025-12-10 10:51:44,789 - InvoiceAuditor - INFO - Node: busiess_validation_agent | metadata file name /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.meta.json
2025-12-10 10:51:44,807 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-10 10:51:44,809 - InvoiceAuditor - INFO - Node: rag_indexing | Starting batch indexing from reports folder.
2025-12-10 10:51:44,810 - InvoiceAuditor - INFO - fNode: rag_indexing | report_path datadata/reports/INV_DE_004.json
2025-12-10 10:51:44,811 - InvoiceAuditor - INFO - fNode: rag_indexing | report data{'invoice_file': 'INV_DE_004.pdf', 'recommendation': 'Approved', 'translated_data': {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}, 'validation_issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}], 'business_validation_issues': [], 'discrepancies_details': [], 'translation_confidence': 1.0, 'meta_data': {'sender': 'rechnung@hafenlogistik.de', 'subject': 'Rechnung RE-2025-004 - Bestellung PO-1004', 'received_timestamp': '2025-05-02T11:00:00Z', 'language': 'de', 'attachments': ['INV_DE_004.docx']}}
2025-12-10 10:51:45,240 - InvoiceAuditor - INFO - Loaded 1 documents and split into 1 chunks.
2025-12-10 10:51:45,241 - InvoiceAuditor - ERROR - RAG Indexing/FAISS Error: str expected, not tuple
2025-12-10 11:00:58,072 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-10 11:00:58,129 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-10 11:00:58,477 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-10 11:00:58,478 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-10 11:00:58,490 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 11:02:45,547 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 11:02:45,640 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-10 11:02:45,646 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-10 11:02:45,646 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-10 11:02:45,653 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-10 11:02:45,667 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 11:04:11,182 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 11:04:11,275 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 11:04:11,317 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-10 11:04:11,371 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 11:04:11,377 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 11:05:49,353 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 11:05:49,387 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The field 'vendor_id' is required but missing in the invoice data."
    }
  ]
}
2025-12-10 11:05:49,388 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}]}
2025-12-10 11:05:49,389 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-10 11:05:49,397 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-10 11:05:49,404 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-10 11:05:49,517 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-10 11:05:49,518 - InvoiceAuditor - INFO - Node: business validation_agent | PO Record fetched:{'po_number': 'PO-1004', 'vendor_id': 'VEND-004', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': 40, 'unit_price': 25.0, 'currency': 'EUR'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': 60, 'unit_price': 10.0, 'currency': 'EUR'}]}
2025-12-10 11:05:49,519 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-10 11:05:49,520 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 11:06:54,329 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 11:06:54,390 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 11:06:54,390 - InvoiceAuditor - INFO - Node: business validation_agent | eval_res invoice:{
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 11:06:54,391 - InvoiceAuditor - INFO - Node: business validation_agent | data invoice:{'data_differences': {'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}, 'discrepancies': [], 'issues': []}
2025-12-10 11:06:54,391 - InvoiceAuditor - INFO - Node: business validation_agent | business_issues:[]
2025-12-10 11:06:54,391 - InvoiceAuditor - INFO - Node: business validation_agent | vendor_id in invoice:None
2025-12-10 11:06:54,391 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: business_issues: []
 data_differences_against_erp:{'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}
 discrepancies_details: []
2025-12-10 11:06:54,396 - InvoiceAuditor - INFO - Node: report_agent | LLM call initiated
2025-12-10 11:06:54,397 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 11:08:41,155 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 11:08:41,213 - InvoiceAuditor - INFO - Node: reporting_agent | LLM call completed {
  "Recommendation": "Approved"
}
2025-12-10 11:08:41,228 - InvoiceAuditor - INFO - Node: busiess_validation_agent | metadata file name /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.meta.json
2025-12-10 11:08:41,250 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-10 11:08:41,263 - InvoiceAuditor - INFO - Node: rag_indexing | Starting batch indexing from reports folder.
2025-12-10 11:08:41,264 - InvoiceAuditor - INFO - fNode: rag_indexing | report_path datadata/reports/INV_DE_004.json
2025-12-10 11:08:41,264 - InvoiceAuditor - INFO - fNode: rag_indexing | report data{'invoice_file': 'INV_DE_004.pdf', 'recommendation': 'Approved', 'translated_data': {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}, 'validation_issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}], 'business_validation_issues': [], 'discrepancies_details': [], 'translation_confidence': 1.0, 'meta_data': {'sender': 'rechnung@hafenlogistik.de', 'subject': 'Rechnung RE-2025-004 - Bestellung PO-1004', 'received_timestamp': '2025-05-02T11:00:00Z', 'language': 'de', 'attachments': ['INV_DE_004.docx']}}
2025-12-10 11:08:41,675 - InvoiceAuditor - INFO - Loaded 1 documents and split into 1 chunks.
2025-12-10 11:08:41,676 - InvoiceAuditor - ERROR - RAG Indexing/FAISS Error: str expected, not tuple
2025-12-10 12:28:58,380 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-10 12:28:58,444 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-10 12:28:58,823 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-10 12:28:58,824 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-10 12:28:58,844 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 12:30:39,596 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 12:30:39,666 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-10 12:30:39,667 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-10 12:30:39,669 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-10 12:30:39,673 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-10 12:30:39,678 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 12:32:02,585 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 12:32:02,634 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 12:32:02,675 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-10 12:32:02,716 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 12:32:02,717 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 12:33:44,503 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 12:33:44,536 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The field 'vendor_id' is required but missing in the invoice data."
    }
  ]
}
2025-12-10 12:33:44,537 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}]}
2025-12-10 12:33:44,538 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-10 12:33:44,548 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-10 12:33:44,556 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-10 12:33:44,698 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-10 12:33:44,700 - InvoiceAuditor - INFO - Node: business validation_agent | PO Record fetched:{'po_number': 'PO-1004', 'vendor_id': 'VEND-004', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': 40, 'unit_price': 25.0, 'currency': 'EUR'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': 60, 'unit_price': 10.0, 'currency': 'EUR'}]}
2025-12-10 12:33:44,700 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-10 12:33:44,702 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 12:35:02,996 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 12:35:03,110 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 12:35:03,114 - InvoiceAuditor - INFO - Node: business validation_agent | eval_res invoice:{
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 12:35:03,117 - InvoiceAuditor - INFO - Node: business validation_agent | data invoice:{'data_differences': {'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}, 'discrepancies': [], 'issues': []}
2025-12-10 12:35:03,118 - InvoiceAuditor - INFO - Node: business validation_agent | business_issues:[]
2025-12-10 12:35:03,119 - InvoiceAuditor - INFO - Node: business validation_agent | vendor_id in invoice:None
2025-12-10 12:35:03,121 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: business_issues: []
 data_differences_against_erp:{'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}
 discrepancies_details: []
2025-12-10 12:35:03,137 - InvoiceAuditor - INFO - Node: report_agent | LLM call initiated
2025-12-10 12:35:03,153 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 12:36:23,526 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 12:36:23,573 - InvoiceAuditor - INFO - Node: reporting_agent | LLM call completed {
  "Recommendation": "Approved"
}
2025-12-10 12:36:23,585 - InvoiceAuditor - INFO - Node: busiess_validation_agent | metadata file name /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.meta.json
2025-12-10 12:36:23,596 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-10 12:36:23,601 - InvoiceAuditor - INFO - Node: rag_indexing | Starting batch indexing from reports folder.
2025-12-10 12:36:23,602 - InvoiceAuditor - INFO - fNode: rag_indexing | report_path datadata/reports/INV_DE_004.json
2025-12-10 12:36:23,610 - InvoiceAuditor - INFO - fNode: rag_indexing | report data{'invoice_file': 'INV_DE_004.pdf', 'recommendation': 'Approved', 'translated_data': {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}, 'validation_issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}], 'business_validation_issues': [], 'discrepancies_details': [], 'translation_confidence': 1.0, 'meta_data': {'sender': 'rechnung@hafenlogistik.de', 'subject': 'Rechnung RE-2025-004 - Bestellung PO-1004', 'received_timestamp': '2025-05-02T11:00:00Z', 'language': 'de', 'attachments': ['INV_DE_004.docx']}}
2025-12-10 12:36:24,037 - InvoiceAuditor - INFO - Loaded 1 documents and split into 1 chunks.
2025-12-10 12:36:25,601 - InvoiceAuditor - ERROR - Error in initalising vector store: FAISS.__init__() missing 1 required positional argument: 'index_to_docstore_id'
2025-12-10 12:36:25,602 - InvoiceAuditor - ERROR - all_chunks type: <class 'list'>
2025-12-10 12:36:25,602 - InvoiceAuditor - WARNING - Chunk 0 content length is very large: 1285
2025-12-10 12:36:25,602 - InvoiceAuditor - ERROR - RAG Indexing/FAISS Error: 'NoneType' object has no attribute 'add_documents'
2025-12-10 12:48:33,736 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-10 12:48:33,797 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-10 12:48:34,139 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-10 12:48:34,140 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-10 12:48:34,152 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 12:50:21,025 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 12:50:21,107 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-10 12:50:21,108 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-10 12:50:21,108 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-10 12:50:21,108 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-10 12:50:21,115 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 12:51:42,828 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 12:51:42,930 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 12:51:42,972 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-10 12:51:43,031 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 12:51:43,040 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 12:53:50,567 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 12:53:50,651 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The field 'vendor_id' is required but missing in the invoice data."
    }
  ]
}
2025-12-10 12:53:50,651 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}]}
2025-12-10 12:53:50,656 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-10 12:53:50,674 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-10 12:53:50,696 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-10 12:53:50,874 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-10 12:53:50,875 - InvoiceAuditor - INFO - Node: business validation_agent | PO Record fetched:{'po_number': 'PO-1004', 'vendor_id': 'VEND-004', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': 40, 'unit_price': 25.0, 'currency': 'EUR'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': 60, 'unit_price': 10.0, 'currency': 'EUR'}]}
2025-12-10 12:53:50,876 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-10 12:53:50,880 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 12:55:38,678 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 12:55:38,894 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 12:55:38,895 - InvoiceAuditor - INFO - Node: business validation_agent | eval_res invoice:{
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 12:55:38,896 - InvoiceAuditor - INFO - Node: business validation_agent | data invoice:{'data_differences': {'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}, 'discrepancies': [], 'issues': []}
2025-12-10 12:55:38,897 - InvoiceAuditor - INFO - Node: business validation_agent | business_issues:[]
2025-12-10 12:55:38,897 - InvoiceAuditor - INFO - Node: business validation_agent | vendor_id in invoice:None
2025-12-10 12:55:38,898 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: business_issues: []
 data_differences_against_erp:{'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}
 discrepancies_details: []
2025-12-10 12:55:38,911 - InvoiceAuditor - INFO - Node: report_agent | LLM call initiated
2025-12-10 12:55:38,920 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 13:09:19,207 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 13:09:19,442 - InvoiceAuditor - INFO - Node: reporting_agent | LLM call completed {
  "Recommendation": "Approved"
}
2025-12-10 13:09:19,485 - InvoiceAuditor - INFO - Node: busiess_validation_agent | metadata file name /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.meta.json
2025-12-10 13:09:19,527 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-10 13:09:19,569 - InvoiceAuditor - INFO - Node: rag_indexing | Starting batch indexing from reports folder.
2025-12-10 13:09:19,582 - InvoiceAuditor - INFO - fNode: rag_indexing | report_path datadata/reports/INV_DE_004.json
2025-12-10 13:09:19,591 - InvoiceAuditor - INFO - fNode: rag_indexing | report data{'invoice_file': 'INV_DE_004.pdf', 'recommendation': 'Approved', 'translated_data': {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}, 'validation_issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}], 'business_validation_issues': [], 'discrepancies_details': [], 'translation_confidence': 1.0, 'meta_data': {'sender': 'rechnung@hafenlogistik.de', 'subject': 'Rechnung RE-2025-004 - Bestellung PO-1004', 'received_timestamp': '2025-05-02T11:00:00Z', 'language': 'de', 'attachments': ['INV_DE_004.docx']}}
2025-12-10 13:09:20,990 - InvoiceAuditor - INFO - Loaded 1 documents and split into 1 chunks.
2025-12-10 13:09:26,498 - InvoiceAuditor - WARNING - FAISS index not found. Creating a minimal new index.
2025-12-10 13:09:28,625 - openai._base_client - INFO - Retrying request to /embeddings in 0.486715 seconds
2025-12-10 13:09:30,124 - openai._base_client - INFO - Retrying request to /embeddings in 0.948252 seconds
2025-12-10 13:09:32,046 - InvoiceAuditor - ERROR - RAG Indexing/FAISS Error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-12-10 15:28:25,142 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-10 15:28:25,191 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-10 15:28:25,575 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-10 15:28:25,576 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-10 15:28:25,596 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 15:30:13,992 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 15:30:14,140 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-10 15:30:14,150 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-10 15:30:14,158 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-10 15:30:14,159 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-10 15:30:14,180 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 15:31:43,129 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 15:31:43,166 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 15:31:43,219 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-10 15:31:43,279 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 15:31:43,282 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 15:34:05,132 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 15:34:05,265 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The field 'vendor_id' is required but missing in the invoice data."
    }
  ]
}
2025-12-10 15:34:05,273 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}]}
2025-12-10 15:34:05,276 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-10 15:34:05,291 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-10 15:34:05,300 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-10 15:34:07,018 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-10 15:34:07,018 - InvoiceAuditor - INFO - Node: business validation_agent | PO Record fetched:{'po_number': 'PO-1004', 'vendor_id': 'VEND-004', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': 40, 'unit_price': 25.0, 'currency': 'EUR'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': 60, 'unit_price': 10.0, 'currency': 'EUR'}]}
2025-12-10 15:34:07,018 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-10 15:34:07,019 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 15:35:11,901 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 15:35:11,931 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 15:35:11,931 - InvoiceAuditor - INFO - Node: business validation_agent | eval_res invoice:{
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 15:35:11,931 - InvoiceAuditor - INFO - Node: business validation_agent | data invoice:{'data_differences': {'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}, 'discrepancies': [], 'issues': []}
2025-12-10 15:35:11,931 - InvoiceAuditor - INFO - Node: business validation_agent | business_issues:[]
2025-12-10 15:35:11,932 - InvoiceAuditor - INFO - Node: business validation_agent | vendor_id in invoice:None
2025-12-10 15:35:11,932 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: business_issues: []
 data_differences_against_erp:{'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}
 discrepancies_details: []
2025-12-10 15:35:11,933 - InvoiceAuditor - INFO - Node: report_agent | LLM call initiated
2025-12-10 15:35:11,934 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 15:36:27,742 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 15:36:27,774 - InvoiceAuditor - INFO - Node: reporting_agent | LLM call completed {
  "Recommendation": "Approved"
}
2025-12-10 15:36:27,782 - InvoiceAuditor - INFO - Node: busiess_validation_agent | metadata file name /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.meta.json
2025-12-10 15:36:27,797 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-10 15:36:27,798 - InvoiceAuditor - INFO - Node: rag_indexing | Starting batch indexing from reports folder.
2025-12-10 15:36:27,798 - InvoiceAuditor - INFO - fNode: rag_indexing | report_path datadata/reports/INV_DE_004.json
2025-12-10 15:36:27,799 - InvoiceAuditor - INFO - fNode: rag_indexing | report data{'invoice_file': 'INV_DE_004.pdf', 'recommendation': 'Approved', 'translated_data': {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}, 'validation_issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}], 'business_validation_issues': [], 'discrepancies_details': [], 'translation_confidence': 1.0, 'meta_data': {'sender': 'rechnung@hafenlogistik.de', 'subject': 'Rechnung RE-2025-004 - Bestellung PO-1004', 'received_timestamp': '2025-05-02T11:00:00Z', 'language': 'de', 'attachments': ['INV_DE_004.docx']}}
2025-12-10 15:36:35,310 - InvoiceAuditor - INFO - Loaded 1 documents and split into 1 chunks.
2025-12-10 15:36:35,473 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-12-10 15:36:35,473 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-12-10 15:36:40,679 - InvoiceAuditor - WARNING - FAISS index not found. Creating a minimal new index.
2025-12-10 15:36:45,258 - InvoiceAuditor - ERROR - RAG Indexing/FAISS Error: Numpy is not available
2025-12-10 20:05:09,972 - InvoiceAuditor - INFO - Node: extract_data | Starting extraction for /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.pdf
2025-12-10 20:05:10,021 - InvoiceAuditor - INFO - raw text: HafenLogistik GmbH
Am Kai 55, Hamburg, Deutschland
Rechnungsnummer: RE-2025-004
Rechnungsdatum: 02.05.2025
Bestellnummer: PO-1004
-------------------------------------------------
Artikelcode | Beschreibung | Menge | Preis | Gesamt
-------------------------------------------------
SKU-301 | Transportkisten | 40 | 25.00€| 1000.00€
SKU-302 | Sicherheitswesten | 60 | 10.00€| 600.00€
-------------------------------------------------
Zwischensumme: 1600.00€
MwSt (10%): 160.00€
Gesamtbetrag: 1760.00€
-------------------------------------------------

2025-12-10 20:05:10,346 - InvoiceAuditor - INFO - Condition: Language is DE. Proceeding to translation.
2025-12-10 20:05:10,347 - InvoiceAuditor - INFO - Node: translation_agent | Starting translation for language: DE
2025-12-10 20:05:10,570 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 20:07:00,096 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 20:07:00,178 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed
2025-12-10 20:07:00,178 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Translated text: {'Company Name': 'HafenLogistik GmbH', 'Address': 'Am Kai 55, Hamburg, Germany', 'Invoice Number': 'RE-2025-004', 'Invoice Date': '02.05.2025', 'Purchase Order Number': 'PO-1004', 'Items': [{'Item Code': 'SKU-301', 'Description': 'Transportkisten', 'Quantity': '40', 'Price per Unit': '25.00€', 'Total': '1000.00€'}, {'Item Code': 'SKU-302', 'Description': 'Sicherheitswesten', 'Quantity': '60', 'Price per Unit': '10.00€', 'Total': '600.00€'}], 'Subtotal': '1600.00€', 'VAT (10%)': '160.00€', 'Total Amount': '1760.00€'}
2025-12-10 20:07:00,179 - InvoiceAuditor - INFO - Node: translation_agent | Translation completed. Confidence: 1.0
2025-12-10 20:07:00,179 - InvoiceAuditor - INFO - TranslationvNode:getting structure text
2025-12-10 20:07:00,183 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 20:08:21,534 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 20:08:21,575 - InvoiceAuditor - INFO - Node: structure text: {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 20:08:21,580 - InvoiceAuditor - INFO - Node: validation_agent | Starting validation Agent:
2025-12-10 20:08:21,612 - InvoiceAuditor - INFO - Node: validation_agent | translated_data:{'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}
2025-12-10 20:08:21,613 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 20:13:31,924 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 20:13:32,021 - InvoiceAuditor - INFO - Node: validation agent| validation completed{
  "validation_results": {
    "data_valid": true,
    "completeness_ok": true
  },
  "issues": [
    {
      "field": "vendor_id",
      "severity": "Medium",
      "message": "The field 'vendor_id' is required but missing in the invoice data."
    }
  ]
}
2025-12-10 20:13:32,028 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. data: {'validation_results': {'data_valid': True, 'completeness_ok': True}, 'issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}]}
2025-12-10 20:13:32,029 - InvoiceAuditor - INFO - Node: validation_agent | validation completed. validation results: {'data_valid': True, 'completeness_ok': True}
2025-12-10 20:13:32,049 - InvoiceAuditor - INFO - Report generation errordecide_to_review: {'data_valid': True, 'completeness_ok': True}
2025-12-10 20:13:32,065 - InvoiceAuditor - INFO - Node: business validation_agent | Starting business validation Agent:
2025-12-10 20:13:32,229 - InvoiceAuditor - INFO - Node: busiess_validation_agent | https response: <Response [200]>
2025-12-10 20:13:32,230 - InvoiceAuditor - INFO - Node: business validation_agent | PO Record fetched:{'po_number': 'PO-1004', 'vendor_id': 'VEND-004', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': 40, 'unit_price': 25.0, 'currency': 'EUR'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': 60, 'unit_price': 10.0, 'currency': 'EUR'}]}
2025-12-10 20:13:32,231 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call initiated
2025-12-10 20:13:32,235 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 20:14:42,314 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 20:14:42,357 - InvoiceAuditor - INFO - Node: busiess_validation_agent | LLM call completed {
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 20:14:42,357 - InvoiceAuditor - INFO - Node: business validation_agent | eval_res invoice:{
  "data_differences": {
    "price_difference_percent": 0,
    "quantity_difference_percent": 0,
    "tax_difference_percent": 0
  },
  "discrepancies": [],
  "issues": []
}
2025-12-10 20:14:42,358 - InvoiceAuditor - INFO - Node: business validation_agent | data invoice:{'data_differences': {'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}, 'discrepancies': [], 'issues': []}
2025-12-10 20:14:42,359 - InvoiceAuditor - INFO - Node: business validation_agent | business_issues:[]
2025-12-10 20:14:42,360 - InvoiceAuditor - INFO - Node: business validation_agent | vendor_id in invoice:None
2025-12-10 20:14:42,360 - InvoiceAuditor - INFO - Node: busiess_validation_agent | execution completed: business_issues: []
 data_differences_against_erp:{'price_difference_percent': 0, 'quantity_difference_percent': 0, 'tax_difference_percent': 0}
 discrepancies_details: []
2025-12-10 20:14:42,362 - InvoiceAuditor - INFO - Node: report_agent | LLM call initiated
2025-12-10 20:14:42,363 - LiteLLM - INFO - 
LiteLLM completion() model= mistral:7b-instruct; provider = ollama
2025-12-10 20:16:03,233 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-12-10 20:16:03,276 - InvoiceAuditor - INFO - Node: reporting_agent | LLM call completed {
  "Recommendation": "Approved"
}
2025-12-10 20:16:03,281 - InvoiceAuditor - INFO - Node: busiess_validation_agent | metadata file name /Users/someswararaomaradani/IdeaProjects/InvoiceAuditor/data/incoming/INV_DE_004.meta.json
2025-12-10 20:16:03,302 - root - INFO - Report saved successfully to: data/reports/INV_DE_004.json
2025-12-10 20:16:03,306 - InvoiceAuditor - INFO - Node: rag_indexing | Starting batch indexing from reports folder.
2025-12-10 20:16:03,306 - InvoiceAuditor - INFO - fNode: rag_indexing | report_path datadata/reports/INV_DE_004.json
2025-12-10 20:16:03,306 - InvoiceAuditor - INFO - fNode: rag_indexing | report data{'invoice_file': 'INV_DE_004.pdf', 'recommendation': 'Approved', 'translated_data': {'invoice_number': 'RE-2025-004', 'po_number': 'PO-1004', 'date': '02.05.2025', 'vendor': 'HafenLogistik GmbH', 'vendor_id': None, 'currency': 'Euro (€)', 'total': '1760.00€', 'taxes': 'VAT (10%): 160.00€', 'line_items': [{'item_code': 'SKU-301', 'description': 'Transportkisten', 'qty': '40', 'unit_price': '25.00€', 'total': '1000.00€'}, {'item_code': 'SKU-302', 'description': 'Sicherheitswesten', 'qty': '60', 'unit_price': '10.00€', 'total': '600.00€'}]}, 'validation_issues': [{'field': 'vendor_id', 'severity': 'Medium', 'message': "The field 'vendor_id' is required but missing in the invoice data."}], 'business_validation_issues': [], 'discrepancies_details': [], 'translation_confidence': 1.0, 'meta_data': {'sender': 'rechnung@hafenlogistik.de', 'subject': 'Rechnung RE-2025-004 - Bestellung PO-1004', 'received_timestamp': '2025-05-02T11:00:00Z', 'language': 'de', 'attachments': ['INV_DE_004.docx']}}
2025-12-10 20:16:03,740 - InvoiceAuditor - INFO - Loaded 1 documents and split into 1 chunks.
2025-12-10 20:16:04,019 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-12-10 20:16:04,019 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-12-10 20:16:09,516 - InvoiceAuditor - WARNING - FAISS index not found. Creating a minimal new index.
2025-12-10 20:16:10,576 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-12-10 20:16:11,674 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-12-10 20:16:11,683 - InvoiceAuditor - ERROR - all_chunks type: <class 'list'>
2025-12-10 20:16:11,684 - InvoiceAuditor - WARNING - Chunk 0 content length is very large: 1285
2025-12-10 20:16:13,018 - InvoiceAuditor - INFO - Successfully indexed 1 new chunks.
